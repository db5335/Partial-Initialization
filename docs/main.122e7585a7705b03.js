(self.webpackChunkInitialization_Simulation=self.webpackChunkInitialization_Simulation||[]).push([[792],{602:(In,jt,at)=>{"use strict";function fe(e){return"function"==typeof e}function vi(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const lr=vi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function te(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class ut{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(fe(r))try{r()}catch(o){t=o instanceof lr?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{_i(o)}catch(s){t=t??[],s instanceof lr?t=[...t,...s.errors]:t.push(s)}}if(t)throw new lr(t)}}add(t){var n;if(t&&t!==this)if(this.closed)_i(t);else{if(t instanceof ut){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&te(n,t)}remove(t){const{_finalizers:n}=this;n&&te(n,t),t instanceof ut&&t._removeParent(this)}}ut.EMPTY=(()=>{const e=new ut;return e.closed=!0,e})();const Wn=ut.EMPTY;function yi(e){return e instanceof ut||e&&"closed"in e&&fe(e.remove)&&fe(e.add)&&fe(e.unsubscribe)}function _i(e){fe(e)?e():e.unsubscribe()}const tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},qn={setTimeout(e,t,...n){const{delegate:r}=qn;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=qn;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Di(e){qn.setTimeout(()=>{const{onUnhandledError:t}=tn;if(!t)throw e;t(e)})}function Ei(){}const Po=wi("C",void 0,void 0);function wi(e,t,n){return{kind:e,value:t,error:n}}let nn=null;function Zn(e){if(tn.useDeprecatedSynchronousErrorHandling){const t=!nn;if(t&&(nn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=nn;if(nn=null,n)throw r}}else e()}class b extends ut{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,yi(t)&&t.add(this)):this.destination=Fo}static create(t,n,r){return new ee(t,n,r)}next(t){this.isStopped?rn(function Ba(e){return wi("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?rn(function ja(e){return wi("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?rn(Po,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const M=Function.prototype.bind;function F(e,t){return M.call(e,t)}class G{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Z(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Z(r)}else Z(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Z(n)}}}class ee extends b{constructor(t,n,r){let i;if(super(),fe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&tn.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&F(t.next,o),error:t.error&&F(t.error,o),complete:t.complete&&F(t.complete,o)}):i=t}this.destination=new G(i)}}function Z(e){tn.useDeprecatedSynchronousErrorHandling?function T(e){tn.useDeprecatedSynchronousErrorHandling&&nn&&(nn.errorThrown=!0,nn.error=e)}(e):Di(e)}function rn(e,t){const{onStoppedNotification:n}=tn;n&&qn.setTimeout(()=>n(e,t))}const Fo={closed:!0,next:Ei,error:function ct(e){throw e},complete:Ei},bi="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ua(e){return e}let Je=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function _E(e){return e&&e instanceof b||function yE(e){return e&&fe(e.next)&&fe(e.error)&&fe(e.complete)}(e)&&yi(e)}(n)?n:new ee(n,r,i);return Zn(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=qd(r))((i,o)=>{const s=new ee({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[bi](){return this}pipe(...n){return function Wd(e){return 0===e.length?Ua:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=qd(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function qd(e){var t;return null!==(t=e??tn.Promise)&&void 0!==t?t:Promise}const DE=vi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let dr=(()=>{class e extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Zd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new DE}next(n){Zn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Zn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Zn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Wn:(this.currentObservers=null,o.push(n),new ut(()=>{this.currentObservers=null,te(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Je;return n.source=this,n}}return e.create=(t,n)=>new Zd(t,n),e})();class Zd extends dr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Wn}}function Tn(e){return t=>{if(function EE(e){return fe(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function An(e,t,n,r,i){return new wE(e,t,n,r,i)}class wE extends b{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Nn(e){return this instanceof Nn?(this.v=e,this):new Nn(e)}function Xd(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function za(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Jd=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ef(e){return fe(e?.then)}function tf(e){return fe(e[bi])}function nf(e){return Symbol.asyncIterator&&fe(e?.[Symbol.asyncIterator])}function rf(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const of=function KE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function sf(e){return fe(e?.[of])}function af(e){return function Qd(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(v,y){o.push([h,g,v,y])>1||u(h,g)})},p&&(i[h]=p(i[h])))}function u(h,p){try{!function c(h){h.value instanceof Nn?Promise.resolve(h.value.v).then(l,d):f(o[0][2],h)}(r[h](p))}catch(g){f(o[0][3],g)}}function l(h){u("next",h)}function d(h){u("throw",h)}function f(h,p){h(p),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Nn(n.read());if(i)return yield Nn(void 0);yield yield Nn(r)}}finally{n.releaseLock()}})}function uf(e){return fe(e?.getReader)}function on(e){if(e instanceof Je)return e;if(null!=e){if(tf(e))return function QE(e){return new Je(t=>{const n=e[bi]();if(fe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Jd(e))return function XE(e){return new Je(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ef(e))return function JE(e){return new Je(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Di)})}(e);if(nf(e))return cf(e);if(sf(e))return function ew(e){return new Je(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(uf(e))return function tw(e){return cf(af(e))}(e)}throw rf(e)}function cf(e){return new Je(t=>{(function nw(e,t){var n,r,i,o;return function Yd(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Xd(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function Mn(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function lf(e,t,n=1/0){return fe(t)?lf((r,i)=>function bE(e,t){return Tn((n,r)=>{let i=0;n.subscribe(An(r,o=>{r.next(e.call(t,o,i++))}))})}((o,s)=>t(r,o,i,s))(on(e(r,i))),n):("number"==typeof t&&(n=t),Tn((r,i)=>function rw(e,t,n,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const f=()=>{d&&!u.length&&!c&&t.complete()},h=g=>c<r?p(g):u.push(g),p=g=>{o&&t.next(g),c++;let v=!1;on(n(g,l++)).subscribe(An(t,y=>{i?.(y),o?h(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;u.length&&c<r;){const y=u.shift();s?Mn(t,s,()=>p(y)):p(y)}f()}catch(y){t.error(y)}}))};return e.subscribe(An(t,h,()=>{d=!0,f()})),()=>{a?.()}}(r,i,e,n)))}const qa=new Je(e=>e.complete());function Za(e){return e[e.length-1]}function df(e){return function sw(e){return e&&fe(e.schedule)}(Za(e))?e.pop():void 0}function ff(e,t=0){return Tn((n,r)=>{n.subscribe(An(r,i=>Mn(r,e,()=>r.next(i),t),()=>Mn(r,e,()=>r.complete(),t),i=>Mn(r,e,()=>r.error(i),t)))})}function hf(e,t=0){return Tn((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function pf(e,t){if(!e)throw new Error("Iterable cannot be null");return new Je(n=>{Mn(n,t,()=>{const r=e[Symbol.asyncIterator]();Mn(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function gf(e,t){return t?function hw(e,t){if(null!=e){if(tf(e))return function uw(e,t){return on(e).pipe(hf(t),ff(t))}(e,t);if(Jd(e))return function lw(e,t){return new Je(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ef(e))return function cw(e,t){return on(e).pipe(hf(t),ff(t))}(e,t);if(nf(e))return pf(e,t);if(sf(e))return function dw(e,t){return new Je(n=>{let r;return Mn(n,t,()=>{r=e[of](),Mn(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}(e,t);if(uf(e))return function fw(e,t){return pf(af(e),t)}(e,t)}throw rf(e)}(e,t):on(e)}function pw(...e){const t=df(e),n=function aw(e,t){return"number"==typeof Za(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?on(r[0]):function iw(e=1/0){return lf(Ua,e)}(n)(gf(r,t)):qa}class gw extends dr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function mf(e={}){const{connector:t=(()=>new dr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,c=0,l=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=u=void 0,l=d=!1},p=()=>{const g=s;h(),g?.unsubscribe()};return Tn((g,v)=>{c++,!d&&!l&&f();const y=u=u??t();v.add(()=>{c--,0===c&&!d&&!l&&(a=Ya(p,i))}),y.subscribe(v),!s&&c>0&&(s=new ee({next:m=>y.next(m),error:m=>{d=!0,f(),a=Ya(h,n,m),y.error(m)},complete:()=>{l=!0,f(),a=Ya(h,r),y.complete()}}),on(g).subscribe(s))})(o)}}function Ya(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new ee({next:()=>{r.unsubscribe(),e()}});return on(t(...n)).subscribe(r)}function _w(e,t){return e===t}function ae(e){for(let t in e)if(e[t]===ae)return t;throw Error("Could not find renamed property on target object.")}function Ne(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ne).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ka(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Dw=ae({__forward_ref__:ae});function Qa(e){return e.__forward_ref__=Qa,e.toString=function(){return Ne(this())},e}function B(e){return function Xa(e){return"function"==typeof e&&e.hasOwnProperty(Dw)&&e.__forward_ref__===Qa}(e)?e():e}function Ja(e){return e&&!!e.\u0275providers}class R extends Error{constructor(t,n){super(function $o(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function H(e){return"string"==typeof e?e:null==e?"":String(e)}function eu(e,t){throw new R(-201,!1)}function yt(e,t){null==e&&function $(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function ue(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function fr(e){return{providers:e.providers||[],imports:e.imports||[]}}function jo(e){return yf(e,Uo)||yf(e,_f)}function yf(e,t){return e.hasOwnProperty(t)?e[t]:null}function Bo(e){return e&&(e.hasOwnProperty(tu)||e.hasOwnProperty(Tw))?e[tu]:null}const Uo=ae({\u0275prov:ae}),tu=ae({\u0275inj:ae}),_f=ae({ngInjectableDef:ae}),Tw=ae({ngInjectorDef:ae});var K=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(K||{});let nu;function et(e){const t=nu;return nu=e,t}function Ef(e,t,n){const r=jo(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&K.Optional?null:void 0!==t?t:void eu(Ne(e))}const he=globalThis;class U{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=ue({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ci={},au="__NG_DI_FLAG__",Go="ngTempTokenPath",Mw=/\n/gm,bf="__source";let hr;function xn(e){const t=hr;return hr=e,t}function Ow(e,t=K.Default){if(void 0===hr)throw new R(-203,!1);return null===hr?Ef(e,void 0,t):hr.get(e,t&K.Optional?null:void 0,t)}function Q(e,t=K.Default){return(function Df(){return nu}()||Ow)(B(e),t)}function pe(e,t=K.Default){return Q(e,Ho(t))}function Ho(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function uu(e){const t=[];for(let n=0;n<e.length;n++){const r=B(e[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let i,o=K.Default;for(let s=0;s<r.length;s++){const a=r[s],u=Lw(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(Q(i,o))}else t.push(Q(r))}return t}function Lw(e){return e[au]}function sn(e){return{toString:e}.toString()}var Vo=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Vo||{}),Tt=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Tt||{});const Bt={},ne=[],zo=ae({\u0275cmp:ae}),cu=ae({\u0275dir:ae}),lu=ae({\u0275pipe:ae}),Sf=ae({\u0275mod:ae}),an=ae({\u0275fac:ae}),Ii=ae({__NG_ELEMENT_ID__:ae}),If=ae({__NG_ENV_ID__:ae});function Tf(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function du(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];Nf(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Af(e){return 3===e||4===e||6===e}function Nf(e){return 64===e.charCodeAt(0)}function Ti(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Mf(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Mf(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const xf="ng-template";function kw(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==Tf(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Rf(e){return 4===e.type&&e.value!==xf}function $w(e,t,n){return t===(4!==e.type||n?e.value:xf)}function jw(e,t,n){let r=4;const i=e.attrs||[],o=function Gw(e){for(let t=0;t<e.length;t++)if(Af(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!$w(e,u,n)||""===u&&1===t.length){if(At(r))return!1;s=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!kw(e.attrs,c,n)){if(At(r))return!1;s=!0}continue}const d=Bw(8&r?"class":u,i,Rf(e),n);if(-1===d){if(At(r))return!1;s=!0;continue}if(""!==c){let f;f=d>o?"":i[d+1].toLowerCase();const h=8&r?f:null;if(h&&-1!==Tf(h,c,0)||2&r&&c!==f){if(At(r))return!1;s=!0}}}}else{if(!s&&!At(r)&&!At(u))return!1;if(s&&At(u))continue;s=!1,r=u|1&r}}return At(r)||s}function At(e){return 0==(1&e)}function Bw(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Hw(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Of(e,t,n=!1){for(let r=0;r<t.length;r++)if(jw(e,t[r],n))return!0;return!1}function Lf(e,t){return e?":not("+t.trim()+")":t}function zw(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!At(s)&&(t+=Lf(o,i),i=""),r=s,o=o||!At(r);n++}return""!==i&&(t+=Lf(o,i)),t}function fu(e){return sn(()=>{const t=function Ff(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Bt,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||ne,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Pf(e.inputs,t),outputs:Pf(e.outputs)}}(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Vo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Tt.Emulated,styles:e.styles||ne,_:null,schemas:e.schemas||null,tView:null,id:""};!function kf(e){e.features?.forEach(t=>t(e))}(n);const r=e.dependencies;return n.directiveDefs=Wo(r,!1),n.pipeDefs=Wo(r,!0),n.id=function Jw(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function Yw(e){return X(e)||Pe(e)}function Kw(e){return null!==e}function Ai(e){return sn(()=>({type:e.type,bootstrap:e.bootstrap||ne,declarations:e.declarations||ne,imports:e.imports||ne,exports:e.exports||ne,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Pf(e,t){if(null==e)return Bt;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function X(e){return e[zo]||null}function Pe(e){return e[cu]||null}function ze(e){return e[lu]||null}function Wo(e,t){if(!e)return null;const n=t?ze:Yw;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(Kw)}const we=0,N=1,W=2,_e=3,Nt=4,Mi=5,Ge=6,pr=7,Se=8,Rn=9,gr=10,V=11,xi=12,$f=13,mr=14,Ie=15,Ri=16,vr=17,Ut=18,Oi=19,jf=20,On=21,un=22,Li=23,Pi=24,Y=25,hu=1,Bf=2,Gt=7,yr=9,Fe=11;function nt(e){return Array.isArray(e)&&"object"==typeof e[hu]}function We(e){return Array.isArray(e)&&!0===e[hu]}function pu(e){return 0!=(4&e.flags)}function Kn(e){return e.componentOffset>-1}function Zo(e){return 1==(1&e.flags)}function Mt(e){return!!e.template}function gu(e){return 0!=(512&e[W])}function Qn(e,t){return e.hasOwnProperty(an)?e[an]:null}let ke=null,Yo=!1;function Dt(e){const t=ke;return ke=e,t}const Hf={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function zf(e){if(!ki(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Zf(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function qf(e){e.dirty=!0,function Wf(e){if(void 0===e.liveConsumerNode)return;const t=Yo;Yo=!0;try{for(const n of e.liveConsumerNode)n.dirty||qf(n)}finally{Yo=t}}(e),e.consumerMarkedDirty?.(e)}function vu(e){return e&&(e.nextProducerIndex=0),Dt(e)}function yu(e,t){if(Dt(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(ki(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Ko(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Zf(e){_r(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(zf(n),r!==n.version))return!0}return!1}function Yf(e){if(_r(e),ki(e))for(let t=0;t<e.producerNode.length;t++)Ko(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Ko(e,t){if(function Qf(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),_r(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Ko(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];_r(i),i.producerIndexOfThis[r]=t}}function ki(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function _r(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let Xf=null;const nh=()=>{},fb=(()=>({...Hf,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:nh}))();class hb{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function rh(e){return e.type.prototype.ngOnChanges&&(e.setInput=gb),pb}function pb(){const e=oh(this),t=e?.current;if(t){const n=e.previous;if(n===Bt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function gb(e,t,n,r){const i=this.declaredInputs[n],o=oh(e)||function mb(e,t){return e[ih]=t}(e,{previous:Bt,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new hb(u&&u.currentValue,t,a===Bt),e[r]=t}const ih="__ngSimpleChanges__";function oh(e){return e[ih]||null}const Ht=function(e,t,n){};function ge(e){for(;Array.isArray(e);)e=e[we];return e}function rt(e,t){return ge(t[e.index])}function uh(e,t){return e.data[t]}function ft(e,t){const n=t[e];return nt(n)?n:n[we]}function Pn(e,t){return null==t?null:e[t]}function ch(e){e[vr]=0}function wb(e){1024&e[W]||(e[W]|=1024,dh(e,1))}function lh(e){1024&e[W]&&(e[W]&=-1025,dh(e,-1))}function dh(e,t){let n=e[_e];if(null===n)return;n[Mi]+=t;let r=n;for(n=n[_e];null!==n&&(1===t&&1===r[Mi]||-1===t&&0===r[Mi]);)n[Mi]+=t,r=n,n=n[_e]}const j={lFrame:Ch(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ph(){return j.bindingsEnabled}function E(){return j.lFrame.lView}function J(){return j.lFrame.tView}function $e(){let e=vh();for(;null!==e&&64===e.type;)e=e.parent;return e}function vh(){return j.lFrame.currentTNode}function Vt(e,t){const n=j.lFrame;n.currentTNode=e,n.isParent=t}function bu(){return j.lFrame.isParent}function wr(){return j.lFrame.bindingIndex++}function Lb(e,t){const n=j.lFrame;n.bindingIndex=n.bindingRootIndex=e,Su(t)}function Su(e){j.lFrame.currentDirectiveIndex=e}function Tu(e){j.lFrame.currentQueryIndex=e}function Fb(e){const t=e[N];return 2===t.type?t.declTNode:1===t.type?e[Ge]:null}function wh(e,t,n){if(n&K.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&K.Host||(i=Fb(o),null===i||(o=o[mr],10&i.type))););if(null===i)return!1;t=i,e=o}const r=j.lFrame=bh();return r.currentTNode=t,r.lView=e,!0}function Au(e){const t=bh(),n=e[N];j.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function bh(){const e=j.lFrame,t=null===e?null:e.child;return null===t?Ch(e):t}function Ch(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Sh(){const e=j.lFrame;return j.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const Ih=Sh;function Nu(){const e=Sh();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Ze(){return j.lFrame.selectedIndex}function Xn(e){j.lFrame.selectedIndex=e}let Ah=!0;function Jo(){return Ah}function Fn(e){Ah=e}function es(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=l&&(e.destroyHooks??=[]).push(n,l)}}function ts(e,t,n){Nh(e,t,3,n)}function ns(e,t,n,r){(3&e[W])===n&&Nh(e,t,n,r)}function Mu(e,t){let n=e[W];(3&n)===t&&(n&=8191,n+=1,e[W]=n)}function Nh(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&e[vr]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[vr]+=65536),(a<o||-1==o)&&(Vb(e,n,t,u),e[vr]=(4294901760&e[vr])+u+2),u++}function Mh(e,t){Ht(4,e,t);const n=Dt(null);try{t.call(e)}finally{Dt(n),Ht(5,e,t)}}function Vb(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[W]>>13<e[vr]>>16&&(3&e[W])===t&&(e[W]+=8192,Mh(a,o)):Mh(a,o)}const br=-1;class ji{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Bi(e){return 32767&e}function Ui(e,t){let n=function Zb(e){return e>>16}(e),r=t;for(;n>0;)r=r[mr],n--;return r}let Ou=!0;function rs(e){const t=Ou;return Ou=e,t}const xh=255,Rh=5;let Yb=0;const zt={};function is(e,t){const n=Oh(e,t);if(-1!==n)return n;const r=t[N];r.firstCreatePass&&(e.injectorIndex=t.length,Lu(r.data,e),Lu(t,null),Lu(r.blueprint,null));const i=os(e,t),o=e.injectorIndex;if(function Ru(e){return e!==br}(i)){const s=Bi(i),a=Ui(i,t),u=a[N].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function Lu(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Oh(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function os(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=Bh(i),null===r)return br;if(n++,i=i[mr],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return br}function Pu(e,t,n){!function Kb(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ii)&&(r=n[Ii]),null==r&&(r=n[Ii]=Yb++);const i=r&xh;t.data[e+(i>>Rh)]|=1<<i}(e,t,n)}function Lh(e,t,n){if(n&K.Optional||void 0!==e)return e;eu()}function Ph(e,t,n,r){if(n&K.Optional&&void 0===r&&(r=null),!(n&(K.Self|K.Host))){const i=e[Rn],o=et(void 0);try{return i?i.get(t,r,n&K.Optional):Ef(t,r,n&K.Optional)}finally{et(o)}}return Lh(r,0,n)}function Fh(e,t,n,r=K.Default,i){if(null!==e){if(2048&t[W]&&!(r&K.Self)){const s=function rC(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[W]&&!(512&s[W]);){const a=kh(o,s,n,r|K.Self,zt);if(a!==zt)return a;let u=o.parent;if(!u){const c=s[jf];if(c){const l=c.get(n,zt,r);if(l!==zt)return l}u=Bh(s),s=s[mr]}o=u}return i}(e,t,n,r,zt);if(s!==zt)return s}const o=kh(e,t,n,r,zt);if(o!==zt)return o}return Ph(t,n,r,i)}function kh(e,t,n,r,i){const o=function Jb(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Ii)?e[Ii]:void 0;return"number"==typeof t?t>=0?t&xh:tC:t}(n);if("function"==typeof o){if(!wh(t,e,r))return r&K.Host?Lh(i,0,r):Ph(t,n,r,i);try{let s;if(s=o(r),null!=s||r&K.Optional)return s;eu()}finally{Ih()}}else if("number"==typeof o){let s=null,a=Oh(e,t),u=br,c=r&K.Host?t[Ie][Ge]:null;for((-1===a||r&K.SkipSelf)&&(u=-1===a?os(e,t):t[a+8],u!==br&&jh(r,!1)?(s=t[N],a=Bi(u),t=Ui(u,t)):a=-1);-1!==a;){const l=t[N];if($h(o,a,l.data)){const d=Xb(a,t,n,s,r,c);if(d!==zt)return d}u=t[a+8],u!==br&&jh(r,t[N].data[a+8]===c)&&$h(o,a,t)?(s=l,a=Bi(u),t=Ui(u,t)):a=-1}}return i}function Xb(e,t,n,r,i,o){const s=t[N],a=s.data[e+8],l=function ss(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,l=o>>20,f=i?a+l:e.directiveEnd;for(let h=r?a:a+l;h<f;h++){const p=s[h];if(h<u&&n===p||h>=u&&p.type===n)return h}if(i){const h=s[u];if(h&&Mt(h)&&h.type===n)return u}return null}(a,s,n,null==r?Kn(a)&&Ou:r!=s&&0!=(3&a.type),i&K.Host&&o===a);return null!==l?Jn(t,s,l,a):zt}function Jn(e,t,n,r){let i=e[n];const o=t.data;if(function zb(e){return e instanceof ji}(i)){const s=i;s.resolving&&function Ew(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new R(-200,`Circular dependency in DI detected for ${e}${n}`)}(function oe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():H(e)}(o[n]));const a=rs(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?et(s.injectImpl):null;wh(e,r,K.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function Hb(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=rh(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==c&&et(c),rs(a),s.resolving=!1,Ih()}}return i}function $h(e,t,n){return!!(n[t+(e>>Rh)]&1<<e)}function jh(e,t){return!(e&K.Self||e&K.Host&&t)}class Ye{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Fh(this._tNode,this._lView,t,Ho(r),n)}}function tC(){return new Ye($e(),E())}function Bh(e){const t=e[N],n=t.type;return 2===n?t.declTNode:1===n?e[Ge]:null}function Nr(e,t){e.forEach(n=>Array.isArray(n)?Nr(n,t):t(n))}function as(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var kn=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(kn||{});const Wu=new Map;let LC=0;const Zu="__ngContext__";function He(e,t){nt(t)?(e[Zu]=t[Oi],function FC(e){Wu.set(e[Oi],e)}(t)):e[Zu]=t}let Yu;function Ku(e,t){return Yu(e,t)}function qi(e){const t=e[_e];return We(t)?t[_e]:t}function cp(e){return dp(e[xi])}function lp(e){return dp(e[Nt])}function dp(e){for(;null!==e&&!We(e);)e=e[Nt];return e}function Or(e,t,n,r,i){if(null!=r){let o,s=!1;We(r)?o=r:nt(r)&&(s=!0,r=r[we]);const a=ge(r);0===e&&null!==n?null==i?gp(t,n,a):er(t,n,a,i||null,!0):1===e&&null!==n?er(t,n,a,i||null,!0):2===e?function Ds(e,t,n){const r=function ys(e,t){return e.parentNode(t)}(e,t);r&&function tS(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function iS(e,t,n,r,i){const o=n[Gt];o!==ge(n)&&Or(t,e,r,o,i);for(let a=Fe;a<n.length;a++){const u=n[a];Yi(u[N],u,e,t,r,o)}}(t,e,o,n,i)}}function ms(e,t,n){return e.createElement(t,n)}function hp(e,t){const n=e[yr],r=n.indexOf(t);lh(t),n.splice(r,1)}function Ju(e,t){if(!(256&t[W])){t[W]&=-129,t[W]|=256,function eS(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ji)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];Ht(4,a,u);try{u.call(a)}finally{Ht(5,a,u)}}else{Ht(4,i,o);try{o.call(i)}finally{Ht(5,i,o)}}}}}(e,t),function JC(e,t){const n=e.cleanup,r=t[pr];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[pr]=null);const i=t[On];if(null!==i){t[On]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[N].type&&t[V].destroy();const n=t[Ri];if(null!==n&&We(t[_e])){n!==t[_e]&&hp(n,t);const r=t[Ut];null!==r&&r.detachView(e)}!function kC(e){Wu.delete(e[Oi])}(t)}}function ec(e,t,n){return function pp(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[we];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===Tt.None||o===Tt.Emulated)return null}return rt(r,n)}}(e,t.parent,n)}function er(e,t,n,r,i){e.insertBefore(t,n,r,i)}function gp(e,t,n){e.appendChild(t,n)}function mp(e,t,n,r,i){null!==r?er(e,t,n,r,i):gp(e,t,n)}let tc,oc,_p=function yp(e,t,n){return 40&e.type?rt(e,n):null};function _s(e,t,n,r){const i=ec(e,r,t),o=t[V],a=function vp(e,t,n){return _p(e,t,n)}(r.parent||t[Ge],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)mp(o,i,n[u],a,!1);else mp(o,i,n,a,!1);void 0!==tc&&tc(o,r,t,n,i)}function Ep(e,t){return null!==t?e[Ie][Ge].projection[t.projection]:null}function rc(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===t&&(a&&He(ge(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)rc(e,t,n.child,r,i,o,!1),Or(t,e,i,a,o);else if(32&u){const c=Ku(n,r);let l;for(;l=c();)Or(t,e,i,l,o);Or(t,e,i,a,o)}else 16&u?bp(e,t,r,n,i,o):Or(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Yi(e,t,n,r,i,o){rc(n,r,e.firstChild,t,i,o,!1)}function bp(e,t,n,r,i,o){const s=n[Ie],u=s[Ge].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Or(t,e,i,u[c],o);else{let c=u;const l=s[_e];(function hs(e){return 128==(128&e.flags)})(r)&&(c.flags|=128),rc(e,t,c,l,i,o,!0)}}function Cp(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Sp(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&du(e,t,r),null!==i&&Cp(e,t,i),null!==o&&function sS(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}const Cs=new U("ENVIRONMENT_INITIALIZER"),$p=new U("INJECTOR",-1),jp=new U("INJECTOR_DEF_TYPES");class dc{get(t,n=Ci){if(n===Ci){const r=new Error(`NullInjectorError: No provider for ${Ne(t)}!`);throw r.name="NullInjectorError",r}return n}}function LS(...e){return{\u0275providers:Up(0,e),\u0275fromNgModule:!0}}function Up(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Nr(t,s=>{const a=s;Ss(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Gp(i,o),n}function Gp(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];fc(i,o=>{t(o,r)})}}function Ss(e,t,n,r){if(!(e=B(e)))return!1;let i=null,o=Bo(e);const s=!o&&X(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=Bo(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Ss(c,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Nr(o.imports,l=>{Ss(l,t,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&Gp(c,t)}if(!a){const c=Qn(i)||(()=>new i);t({provide:i,useFactory:c,deps:ne},i),t({provide:jp,useValue:i,multi:!0},i),t({provide:Cs,useValue:()=>Q(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=e;fc(u,l=>{t(l,c)})}}}return i!==e&&void 0!==e.providers}function fc(e,t){for(let n of e)Ja(n)&&(n=n.\u0275providers),Array.isArray(n)?fc(n,t):t(n)}const PS=ae({provide:String,useValue:ae});function hc(e){return null!==e&&"object"==typeof e&&PS in e}function tr(e){return"function"==typeof e}const pc=new U("Set Injector scope."),Is={},kS={};let gc;function Ts(){return void 0===gc&&(gc=new dc),gc}class fn{}class kr extends fn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vc(t,s=>this.processProvider(s)),this.records.set($p,$r(void 0,this)),i.has("environment")&&this.records.set(fn,$r(void 0,this));const o=this.records.get(pc);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(jp.multi,ne,K.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=xn(this),r=et(void 0);try{return t()}finally{xn(n),et(r)}}get(t,n=Ci,r=K.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(If))return t[If](this);r=Ho(r);const o=xn(this),s=et(void 0);try{if(!(r&K.SkipSelf)){let u=this.records.get(t);if(void 0===u){const c=function GS(e){return"function"==typeof e||"object"==typeof e&&e instanceof U}(t)&&jo(t);u=c&&this.injectableDefInScope(c)?$r(mc(t),Is):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&K.Self?Ts():this.parent).get(t,n=r&K.Optional&&n===Ci?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Go]=a[Go]||[]).unshift(Ne(t)),o)throw a;return function Pw(e,t,n,r){const i=e[Go];throw t[bf]&&i.unshift(t[bf]),e.message=function Fw(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Ne(t);if(Array.isArray(t))i=t.map(Ne).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ne(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(Mw,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Go]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{et(s),xn(o)}}resolveInjectorInitializers(){const t=xn(this),n=et(void 0);try{const i=this.get(Cs.multi,ne,K.Self);for(const o of i)o()}finally{xn(t),et(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Ne(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(t){let n=tr(t=B(t))?t:B(t&&t.provide);const r=function jS(e){return hc(e)?$r(void 0,e.useValue):$r(function zp(e,t,n){let r;if(tr(e)){const i=B(e);return Qn(i)||mc(i)}if(hc(e))r=()=>B(e.useValue);else if(function Vp(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...uu(e.deps||[]));else if(function Hp(e){return!(!e||!e.useExisting)}(e))r=()=>Q(B(e.useExisting));else{const i=B(e&&(e.useClass||e.provide));if(!function BS(e){return!!e.deps}(e))return Qn(i)||mc(i);r=()=>new i(...uu(e.deps))}return r}(e),Is)}(t);if(tr(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=$r(void 0,Is,!0),i.factory=()=>uu(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Is&&(n.value=kS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function US(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=B(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function mc(e){const t=jo(e),n=null!==t?t.factory:Qn(e);if(null!==n)return n;if(e instanceof U)throw new R(204,!1);if(e instanceof Function)return function $S(e){const t=e.length;if(t>0)throw function Vi(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new R(204,!1);const n=function Iw(e){return e&&(e[Uo]||e[_f])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new R(204,!1)}function $r(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function vc(e,t){for(const n of e)Array.isArray(n)?vc(n,t):n&&Ja(n)?vc(n.\u0275providers,t):t(n)}const As=new U("AppId",{providedIn:"root",factory:()=>HS}),HS="ng",Wp=new U("Platform Initializer"),jr=new U("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qp=new U("CSP nonce",{providedIn:"root",factory:()=>function Pr(){if(void 0!==oc)return oc;if(typeof document<"u")return document;throw new R(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Zp=(e,t,n)=>null;function Sc(e,t,n=!1){return Zp(e,t,n)}class JS{}class Qp{}class t0{resolveComponentFactory(t){throw function e0(e){const t=Error(`No component factory found for ${Ne(e)}.`);return t.ngComponent=e,t}(t)}}let Ls=(()=>{class e{static{this.NULL=new t0}}return e})();function n0(){return Gr($e(),E())}function Gr(e,t){return new Hr(rt(e,t))}let Hr=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=n0}}return e})();class Jp{}let s0=(()=>{class e{static{this.\u0275prov=ue({token:e,providedIn:"root",factory:()=>null})}}return e})();class Ac{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const a0=new Ac("16.2.12"),Nc={};function ig(e,t=null,n=null,r){const i=og(e,t,n,r);return i.resolveInjectorInitializers(),i}function og(e,t=null,n=null,r,i=new Set){const o=[n||ne,LS(e)];return r=r||("object"==typeof e?void 0:Ne(e)),new kr(o,t||Ts(),r||null,i)}let Wt=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Ci}static{this.NULL=new dc}static create(n,r){if(Array.isArray(n))return ig({name:""},r,n,"");{const i=n.name??"";return ig({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=ue({token:e,providedIn:"any",factory:()=>Q($p)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function xc(e){return e.ngOriginalError}class hn{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&xc(t);for(;n&&xc(n);)n=xc(n);return n||null}}function Rc(e){return t=>{setTimeout(e,void 0,t)}}const pn=class g0 extends dr{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Rc(o),i&&(i=Rc(i)),s&&(s=Rc(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof ut&&t.add(a),a}};function ag(...e){}class be{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pn(!1),this.onMicrotaskEmpty=new pn(!1),this.onStable=new pn(!1),this.onError=new pn(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function m0(){const e="function"==typeof he.requestAnimationFrame;let t=he[e?"requestAnimationFrame":"setTimeout"],n=he[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function _0(e){const t=()=>{!function y0(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(he,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Lc(e),e.isCheckStableRunning=!0,Oc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Lc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function E0(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return ug(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),cg(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return ug(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),cg(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Lc(e),Oc(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!be.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(be.isInAngularZone())throw new R(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,v0,ag,ag);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const v0={};function Oc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Lc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ug(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function cg(e){e._nesting--,Oc(e)}class D0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pn,this.onMicrotaskEmpty=new pn,this.onStable=new pn,this.onError=new pn}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const lg=new U("",{providedIn:"root",factory:dg});function dg(){const e=pe(be);let t=!0;return pw(new Je(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Je(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{be.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(mf()))}let Pc=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e})}}return e})();function to(e){for(;e;){e[W]|=64;const t=qi(e);if(gu(e)&&!t)return e;e=t}return null}const mg=new U("",{providedIn:"root",factory:()=>!1});let ks=null;function Dg(e,t){return e[t]??bg()}function Eg(e,t){const n=bg();n.producerNode?.length&&(e[t]=ks,n.lView=e,ks=wg())}const x0={...Hf,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{to(e.lView)},lView:null};function wg(){return Object.create(x0)}function bg(){return ks??=wg(),ks}const z={};function Fc(e){Cg(J(),E(),Ze()+e,!1)}function Cg(e,t,n,r){if(!r)if(3==(3&t[W])){const o=e.preOrderCheckHooks;null!==o&&ts(t,o,n)}else{const o=e.preOrderHooks;null!==o&&ns(t,o,0,n)}Xn(n)}function q(e,t=K.Default){const n=E();return null===n?Q(e,t):Fh($e(),n,B(e),t)}function $s(e,t,n,r,i,o,s,a,u,c,l){const d=t.blueprint.slice();return d[we]=i,d[W]=140|r,(null!==c||e&&2048&e[W])&&(d[W]|=2048),ch(d),d[_e]=d[mr]=e,d[Se]=n,d[gr]=s||e&&e[gr],d[V]=a||e&&e[V],d[Rn]=u||e&&e[Rn]||null,d[Ge]=o,d[Oi]=function PC(){return LC++}(),d[un]=l,d[jf]=c,d[Ie]=2==t.type?e[Ie]:d,d}function Wr(e,t,n,r,i){let o=e.data[t];if(null===o)o=function kc(e,t,n,r,i){const o=vh(),s=bu(),u=e.data[t]=function B0(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function Er(){return null!==j.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,n,r,i),function Ob(){return j.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function $i(){const e=j.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Vt(o,!0),o}function no(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Sg(e,t,n,r,i){const o=Dg(t,Li),s=Ze(),a=2&r;try{Xn(-1),a&&t.length>Y&&Cg(e,t,Y,!1),Ht(a?2:0,i);const c=a?o:null,l=vu(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{yu(c,l)}}finally{a&&null===t[Li]&&Eg(t,Li),Xn(s),Ht(a?3:1,i)}}function $c(e,t,n){if(pu(t)){const r=Dt(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Dt(r)}}}function Ig(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Uc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Uc(e,t,n,r,i,o,s,a,u,c,l){const d=Y+r,f=d+i,h=function L0(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:z);return n}(d,f),p="function"==typeof c?c():c;return h[N]={type:e,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:p,incompleteFirstPass:!1,ssrId:l}}let Tg=e=>null;function Ag(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?Ng(n,t,i,o):r.hasOwnProperty(i)&&Ng(n,t,r[i],o)}return n}function Ng(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Mg(e,t,n,r,i,o){for(let c=0;c<r.length;c++)Pu(is(n,t),e,r[c].type);!function X0(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=no(e,t,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=Ti(n.mergedAttrs,l.hostAttrs),J0(e,n,t,u,l),Q0(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function U0(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let u=null,c=null;for(let l=t.directiveStart;l<i;l++){const d=o[l],f=n?n.get(d):null,p=f?f.outputs:null;u=Ag(d.inputs,l,u,f?f.inputs:null),c=Ag(d.outputs,l,c,p);const g=null===u||null===s||Rf(t)?null:nI(u,l,s);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}(e,n,o)}function xg(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function Pb(){return j.lFrame.currentDirectiveIndex}();try{Xn(o);for(let a=r;a<i;a++){const u=e.data[a],c=t[a];Su(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Z0(u,c)}}finally{Xn(-1),Su(s)}}function Z0(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Hc(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Q0(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Mt(t)&&(n[""]=e)}}function J0(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Qn(i.type)),s=new ji(o,Mt(i),q);e.blueprint[r]=s,n[r]=s,function z0(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function W0(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,no(e,n,i.hostVars,z),i)}function tI(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)Rg(r,n,s[a++],s[a++],s[a++])}function Rg(e,t,n,r,i){const o=Dt(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{Dt(o)}}function nI(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Lg(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Tu(n[r]),s.contentQueries(2,t[o],o)}}}function js(e,t){return e[xi]?e[$f][Nt]=t:e[xi]=t,e[$f]=t,t}function zc(e,t,n){Tu(0);const r=Dt(null);try{t(e,n)}finally{Dt(r)}}function $g(e,t){const n=e[Rn],r=n?n.get(hn,null):null;r&&r.handleError(t)}function Wc(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];Rg(e.data[s],t[s],r,a,i)}}function mn(e,t,n){const r=function Xo(e,t){return ge(t[e])}(t,e);!function fp(e,t,n){e.setValue(t,n)}(e[V],r,n)}function rI(e,t){const n=ft(t,e),r=n[N];!function iI(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[we];null!==i&&null===n[un]&&(n[un]=Sc(i,n[Rn])),qc(r,n,n[Se])}function qc(e,t,n){Au(t);try{const r=e.viewQuery;null!==r&&zc(1,r,n);const i=e.template;null!==i&&Sg(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Lg(e,t),e.staticViewQueries&&zc(2,e.viewQuery,n);const o=e.components;null!==o&&function oI(e,t){for(let n=0;n<t.length;n++)rI(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[W]&=-5,Nu()}}let jg=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function db(e,t,n){const r=Object.create(fb);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>qf(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Zf(r))return;r.hasRun=!0;const s=vu(r);try{r.cleanupFn(),r.cleanupFn=nh,r.fn(i)}finally{yu(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=ue({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Bs(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Ka(i,a):2==o&&(r=Ka(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function ro(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(ge(o)),We(o)&&Bg(o,r);const s=n.type;if(8&s)ro(e,t,n.child,r);else if(32&s){const a=Ku(n,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Ep(t,n);if(Array.isArray(a))r.push(...a);else{const u=qi(t[Ie]);ro(u[N],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Bg(e,t){for(let n=Fe;n<e.length;n++){const r=e[n],i=r[N].firstChild;null!==i&&ro(r[N],r,i,t)}e[Gt]!==e[we]&&t.push(e[Gt])}function Us(e,t,n,r=!0){const i=t[gr],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{Ug(e,t,e.template,n)}catch(u){throw r&&$g(t,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function Ug(e,t,n,r){const i=t[W];if(256!=(256&i)){t[gr].effectManager?.flush(),Au(t);try{ch(t),function _h(e){return j.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&Sg(e,t,n,2,r);const s=3==(3&i);if(s){const c=e.preOrderCheckHooks;null!==c&&ts(t,c,null)}else{const c=e.preOrderHooks;null!==c&&ns(t,c,0,null),Mu(t,0)}if(function uI(e){for(let t=cp(e);null!==t;t=lp(t)){if(!t[Bf])continue;const n=t[yr];for(let r=0;r<n.length;r++){wb(n[r])}}}(t),Gg(t,2),null!==e.contentQueries&&Lg(e,t),s){const c=e.contentCheckHooks;null!==c&&ts(t,c)}else{const c=e.contentHooks;null!==c&&ns(t,c,1),Mu(t,1)}!function O0(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=Dg(t,Pi);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Xn(~o);else{const s=o,a=n[++i],u=n[++i];Lb(a,s),r.dirty=!1;const c=vu(r);try{u(2,t[s])}finally{yu(r,c)}}}}finally{null===t[Pi]&&Eg(t,Pi),Xn(-1)}}(e,t);const a=e.components;null!==a&&Vg(t,a,0);const u=e.viewQuery;if(null!==u&&zc(2,u,r),s){const c=e.viewCheckHooks;null!==c&&ts(t,c)}else{const c=e.viewHooks;null!==c&&ns(t,c,2),Mu(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[W]&=-73,lh(t)}finally{Nu()}}}function Gg(e,t){for(let n=cp(e);null!==n;n=lp(n))for(let r=Fe;r<n.length;r++)Hg(n[r],t)}function cI(e,t,n){Hg(ft(t,e),n)}function Hg(e,t){if(!function Db(e){return 128==(128&e[W])}(e))return;const n=e[N],r=e[W];if(80&r&&0===t||1024&r||2===t)Ug(n,e,n.template,e[Se]);else if(e[Mi]>0){Gg(e,1);const i=n.components;null!==i&&Vg(e,i,1)}}function Vg(e,t,n){for(let r=0;r<t.length;r++)cI(e,t[r],n)}class io{get rootNodes(){const t=this._lView,n=t[N];return ro(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Se]}set context(t){this._lView[Se]=t}get destroyed(){return 256==(256&this._lView[W])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[_e];if(We(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(function vs(e,t){if(e.length<=Fe)return;const n=Fe+t,r=e[n];if(r){const i=r[Ri];null!==i&&i!==e&&hp(i,r),t>0&&(e[n-1][Nt]=r[Nt]);const o=as(e,Fe+t);!function qC(e,t){Yi(e,t,t[V],2,null,null),t[we]=null,t[Ge]=null}(r[N],r);const s=o[Ut];null!==s&&s.detachView(o[N]),r[_e]=null,r[Nt]=null,r[W]&=-129}return r}(t,r),as(n,r))}this._attachedToViewContainer=!1}!function Xu(e,t){if(!(256&t[W])){const n=t[V];t[Li]&&Yf(t[Li]),t[Pi]&&Yf(t[Pi]),n.destroyNode&&Yi(e,t,n,3,null,null),function KC(e){let t=e[xi];if(!t)return Ju(e[N],e);for(;t;){let n=null;if(nt(t))n=t[xi];else{const r=t[Fe];r&&(n=r)}if(!n){for(;t&&!t[Nt]&&t!==e;)nt(t)&&Ju(t[N],t),t=t[_e];null===t&&(t=e),nt(t)&&Ju(t[N],t),n=t&&t[Nt]}t=n}}(t)}}(this._lView[N],this._lView)}onDestroy(t){!function fh(e,t){if(256==(256&e[W]))throw new R(911,!1);null===e[On]&&(e[On]=[]),e[On].push(t)}(this._lView,t)}markForCheck(){to(this._cdRefInjectingView||this._lView)}detach(){this._lView[W]&=-129}reattach(){this._lView[W]|=128}detectChanges(){Us(this._lView[N],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function YC(e,t){Yi(e,t,t[V],2,null,null)}(this._lView[N],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=t}}class lI extends io{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Us(t[N],t,t[Se],!1)}checkNoChanges(){}get context(){return null}}class zg extends Ls{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=X(t);return new oo(n,this.ngModule)}}function Wg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class fI{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Ho(r);const i=this.injector.get(t,Nc,r);return i!==Nc||n===Nc?i:this.parentInjector.get(t,n,r)}}class oo extends Qp{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=Wg(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Wg(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Ww(e){return e.map(zw).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof fn?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new fI(t,o):t,a=s.get(Jp,null);if(null===a)throw new R(407,!1);const d={rendererFactory:a,sanitizer:s.get(s0,null),effectManager:s.get(jg,null),afterRenderEventManager:s.get(Pc,null)},f=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?function P0(e,t,n,r){const o=r.get(mg,!1)||n===Tt.ShadowDom,s=e.selectRootElement(t,o);return function F0(e){Tg(e)}(s),s}(f,r,this.componentDef.encapsulation,s):ms(f,h,function dI(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(h)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let m=null;null!==p&&(m=Sc(p,s,!0));const _=Uc(0,null,null,1,0,null,null,null,null,null,null),D=$s(null,_,null,y,null,null,d,f,s,null,m);let C,A;Au(D);try{const I=this.componentDef;let P,L=null;I.findHostDirectiveDefs?(P=[],L=new Map,I.findHostDirectiveDefs(I,P,L),P.push(I)):P=[I];const se=function pI(e,t){const n=e[N],r=Y;return e[r]=t,Wr(n,r,2,"#host",null)}(D,p),ye=function gI(e,t,n,r,i,o,s){const a=i[N];!function mI(e,t,n,r){for(const i of e)t.mergedAttrs=Ti(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Bs(t,t.mergedAttrs,!0),null!==n&&Sp(r,n,t))}(r,e,t,s);let u=null;null!==t&&(u=Sc(t,i[Rn]));const c=o.rendererFactory.createRenderer(t,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=$s(i,Ig(n),null,l,i[e.index],e,o,c,null,null,u);return a.firstCreatePass&&Hc(a,e,r.length-1),js(i,d),i[e.index]=d}(se,p,I,P,D,d,f);A=uh(_,Y),p&&function yI(e,t,n,r){if(r)du(e,n,["ng-version",a0.full]);else{const{attrs:i,classes:o}=function qw(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!At(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&du(e,n,i),o&&o.length>0&&Cp(e,n,o.join(" "))}}(f,I,p,r),void 0!==n&&function _I(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(A,this.ngContentSelectors,n),C=function vI(e,t,n,r,i,o){const s=$e(),a=i[N],u=rt(s,i);Mg(a,i,s,n,null,r);for(let l=0;l<n.length;l++)He(Jn(i,a,s.directiveStart+l,s),i);xg(a,i,s),u&&He(u,i);const c=Jn(i,a,s.directiveStart+s.componentOffset,s);if(e[Se]=i[Se]=c,null!==o)for(const l of o)l(c,t);return $c(a,s,e),c}(ye,I,P,L,D,[DI]),qc(_,D,null)}finally{Nu()}return new hI(this.componentType,C,Gr(A,D),D,A)}}class hI extends JS{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new lI(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;Wc(o[N],o,i,t,n),this.previousInputValues.set(t,n),to(ft(this._tNode.index,o))}}get injector(){return new Ye(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function DI(){const e=$e();es(E()[N],e)}function Ve(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function el(e,t,n){const r=E();return Ve(r,wr(),t)&&function pt(e,t,n,r,i,o,s,a){const u=rt(t,n);let l,c=t.inputs;!a&&null!=c&&(l=c[r])?(Wc(e,n,l,r,i),Kn(t)&&function H0(e,t){const n=ft(t,e);16&n[W]||(n[W]|=64)}(n,t.index)):3&t.type&&(r=function G0(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(u,r,i))}(J(),function Ee(){const e=j.lFrame;return uh(e.tView,e.selectedIndex)}(),r,e,t,r[V],n,!1),el}function tl(e,t,n,r,i){const s=i?"class":"style";Wc(e,n,t.inputs[s],s,r)}function Yt(e,t,n,r){const i=E(),o=J(),s=Y+e,a=i[V],u=o.firstCreatePass?function tT(e,t,n,r,i,o){const s=t.consts,u=Wr(t,e,2,r,Pn(s,i));return function Gc(e,t,n,r){if(ph()){const i=null===r?null:{"":-1},o=function Y0(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Of(t,s.selectors,!1))if(r||(r=[]),Mt(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Hc(e,t,a.length)}else r.unshift(s),Hc(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&Mg(e,t,n,s,i,a),i&&function K0(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new R(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=Ti(n.mergedAttrs,n.attrs)}(t,n,u,Pn(s,o)),null!==u.attrs&&Bs(u,u.attrs,!1),null!==u.mergedAttrs&&Bs(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,n,r):o.data[s],c=pm(o,i,u,a,t,e);i[s]=c;const l=Zo(u);return Vt(u,!0),Sp(a,c,u),32!=(32&u.flags)&&Jo()&&_s(o,i,c,u),0===function Cb(){return j.lFrame.elementDepthCount}()&&He(c,i),function Sb(){j.lFrame.elementDepthCount++}(),l&&(function jc(e,t,n){ph()&&(function q0(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Kn(n)&&function eI(e,t,n){const r=rt(t,e),i=Ig(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=js(e,$s(e,i,null,s,r,t,null,e[gr].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||is(n,t),He(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const u=e.data[a],c=Jn(t,e,a,n);He(c,t),null!==s&&tI(0,a-i,c,u,0,s),Mt(u)&&(ft(n.index,t)[Se]=Jn(t,e,a,n))}}(e,t,n,rt(n,t)),64==(64&n.flags)&&xg(e,t,n))}(o,i,u),$c(o,u,i)),null!==r&&function Bc(e,t,n=rt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}(i,u),Yt}function Kt(){let e=$e();bu()?function Cu(){j.lFrame.isParent=!1}():(e=e.parent,Vt(e,!1));const t=e;(function Tb(e){return j.skipHydrationRootTNode===e})(t)&&function xb(){j.skipHydrationRootTNode=null}(),function Ib(){j.lFrame.elementDepthCount--}();const n=J();return n.firstCreatePass&&(es(n,e),pu(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Wb(e){return 0!=(8&e.flags)}(t)&&tl(n,t,E(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function qb(e){return 0!=(16&e.flags)}(t)&&tl(n,t,E(),t.stylesWithoutHost,!1),Kt}function Zs(e,t,n,r){return Yt(e,t,n,r),Kt(),Zs}let pm=(e,t,n,r,i,o)=>(Fn(!0),ms(r,i,function Th(){return j.lFrame.currentNamespace}()));function il(e){return!!e&&"function"==typeof e.then}function ym(e){return!!e&&"function"==typeof e.subscribe}function ol(e,t,n,r){const i=E(),o=J(),s=$e();return function Dm(e,t,n,r,i,o,s){const a=Zo(r),c=e.firstCreatePass&&function Fg(e){return e.cleanup||(e.cleanup=[])}(e),l=t[Se],d=function Pg(e){return e[pr]||(e[pr]=[])}(t);let f=!0;if(3&r.type||s){const g=rt(r,t),v=s?s(g):g,y=d.length,m=s?D=>s(ge(D[r.index])):r.index;let _=null;if(!s&&a&&(_=function aT(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[pr],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,f=!1;else{o=wm(r,t,l,o,!1);const D=n.listen(v,i,o);d.push(o,D),c&&c.push(i,m,y,y+1)}}else o=wm(r,t,l,o,!1);const h=r.outputs;let p;if(f&&null!==h&&(p=h[i])){const g=p.length;if(g)for(let v=0;v<g;v+=2){const C=t[p[v]][p[v+1]].subscribe(o),A=d.length;d.push(o,C),c&&c.push(i,r.index,A,-(A+1))}}}(o,i,i[V],s,e,t,r),ol}function Em(e,t,n,r){try{return Ht(6,t,n),!1!==n(r)}catch(i){return $g(e,i),!1}finally{Ht(7,t,n)}}function wm(e,t,n,r,i){return function o(s){if(s===Function)return r;to(e.componentOffset>-1?ft(e.index,t):t);let u=Em(t,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=Em(t,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function fo(e,t=""){const n=E(),r=J(),i=e+Y,o=r.firstCreatePass?Wr(r,i,1,t,null):r.data[i],s=qm(r,n,o,t,e);n[i]=s,Jo()&&_s(r,n,s,o),Vt(o,!1)}let qm=(e,t,n,r,i)=>(Fn(!0),function gs(e,t){return e.createText(t)}(t[V],r));function dl(e){return fl("",e,""),dl}function fl(e,t,n){const r=E(),i=function Zr(e,t,n,r){return Ve(e,wr(),n)?t+H(n)+r:z}(r,e,t,n);return i!==z&&mn(r,Ze(),i),fl}const ii="en-US";let gv=ii;class or{}class nN{}class _l extends or{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zg(this);const i=function dt(e,t){const n=e[Sf]||null;if(!n&&!0===t)throw new Error(`Type ${Ne(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function gn(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=og(t,n,[{provide:or,useValue:this},{provide:Ls,useValue:this.componentFactoryResolver},...r],Ne(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Dl extends nN{constructor(t){super(),this.moduleType=t}create(t){return new _l(this.moduleType,t,[])}}const IM=new U("Application Initializer");let Ol=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=pe(IM,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(il(o))n.push(o);else if(ym(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const yn=new U("LocaleId",{providedIn:"root",factory:()=>pe(yn,K.Optional|K.SkipSelf)||function AM(){return typeof $localize<"u"&&$localize.locale||ii}()});let xM=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new gw(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Oy=new U(""),oa=new U("");let $l,Fl=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$l||(function ex(e){$l=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{be.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(Q(be),Q(kl),Q(oa))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})(),kl=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return $l?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Bn=null;const Ly=new U("AllowMultipleToken"),jl=new U("PlatformDestroyListeners"),Py=new U("appBootstrapListener");function $y(e,t,n=[]){const r=`Platform: ${t}`,i=new U(r);return(o=[])=>{let s=Bl();if(!s||s.injector.get(Ly,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function rx(e){if(Bn&&!Bn.get(Ly,!1))throw new R(400,!1);(function Fy(){!function sb(e){Xf=e}(()=>{throw new R(600,!1)})})(),Bn=e;const t=e.get(By);(function ky(e){e.get(Wp,null)?.forEach(n=>n())})(e)}(function jy(e=[],t){return Wt.create({name:t,providers:[{provide:pc,useValue:"platform"},{provide:jl,useValue:new Set([()=>Bn=null])},...e]})}(a,r))}return function ox(e){const t=Bl();if(!t)throw new R(401,!1);return t}()}}function Bl(){return Bn?.get(By)??null}let By=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function sx(e="zone.js",t){return"noop"===e?new D0:"zone.js"===e?new be(t):e}(r?.ngZone,function Uy(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function iN(e,t,n){return new _l(e,t,n)}(n.moduleType,this.injector,function Wy(e){return[{provide:be,useFactory:e},{provide:Cs,multi:!0,useFactory:()=>{const t=pe(ux,{optional:!0});return()=>t.initialize()}},{provide:zy,useFactory:ax},{provide:lg,useFactory:dg}]}(()=>i)),s=o.injector.get(hn,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{sa(this._modules,o),a.unsubscribe()})}),function Gy(e,t,n){try{const r=n();return il(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Ol);return a.runInitializers(),a.donePromise.then(()=>(function mv(e){yt(e,"Expected localeId to be defined"),"string"==typeof e&&(gv=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(yn,ii)||ii),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=Hy({},r);return function tx(e,t,n){const r=new Dl(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(wo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new R(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(jl,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(Q(Wt))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Hy(e,t){return Array.isArray(t)?t.reduce(Hy,e):{...e,...t}}let wo=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=pe(zy),this.zoneIsStable=pe(lg),this.componentTypes=[],this.components=[],this.isStable=pe(xM).hasPendingTasks.pipe(function vw(e,t){return Tn((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(An(r,u=>{i?.unsubscribe();let c=0;const l=o++;on(e(u,l)).subscribe(i=An(r,d=>r.next(t?t(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}(n=>n?function mw(...e){return gf(e,df(e))}(!1):this.zoneIsStable),function yw(e,t=Ua){return e=e??_w,Tn((n,r)=>{let i,o=!0;n.subscribe(An(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),mf()),this._injector=pe(fn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Qp;if(!this._injector.get(Ol).done)throw!i&&function Ni(e){const t=X(e)||Pe(e)||ze(e);return null!==t&&t.standalone}(n),new R(405,!1);let s;s=i?n:this._injector.get(Ls).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function nx(e){return e.isBoundToModule}(s)?void 0:this._injector.get(or),c=s.create(Wt.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get(Oy,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),sa(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;sa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Py,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>sa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function sa(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const zy=new U("",{providedIn:"root",factory:()=>pe(hn).handleError.bind(void 0)});function ax(){const e=pe(be),t=pe(hn);return n=>e.runOutsideAngular(()=>t.handleError(n))}let ux=(()=>{class e{constructor(){this.zone=pe(be),this.applicationRef=pe(wo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Cx=$y(null,"core",[]);let Sx=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(Q(wo))}}static{this.\u0275mod=Ai({type:e})}static{this.\u0275inj=fr({})}}return e})(),Wl=null;function ql(){return Wl}class $x{}const ar=new U("DocumentToken");let t1=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ai({type:e})}static{this.\u0275inj=fr({})}}return e})();function I_(e){return"server"===e}class N1 extends $x{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ld extends N1{static makeCurrent(){!function kx(e){Wl||(Wl=e)}(new ld)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function M1(){return To=To||document.querySelector("base"),To?To.getAttribute("href"):null}();return null==n?null:function x1(e){ba=ba||document.createElement("a"),ba.setAttribute("href",e);const t=ba.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){To=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function CR(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let ba,To=null,O1=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();const dd=new U("EventManagerPlugins");let x_=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new R(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(Q(dd),Q(be))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();class R_{constructor(t){this._doc=t}}const fd="ng-app-id";let O_=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=I_(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${fd}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(fd),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(fd,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(Q(ar),Q(As),Q(qp,8),Q(jr))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();const hd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pd=/%COMP%/g,k1=new U("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function P_(e,t){return t.map(n=>n.replace(pd,e))}let F_=(()=>{class e{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=I_(a),this.defaultRenderer=new gd(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tt.ShadowDom&&(r={...r,encapsulation:Tt.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof $_?i.applyToHost(n):i instanceof md&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Tt.Emulated:o=new $_(u,c,r,this.appId,l,s,a,d);break;case Tt.ShadowDom:return new U1(u,c,n,r,s,a,this.nonce,d);default:o=new md(u,c,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(Q(x_),Q(O_),Q(As),Q(k1),Q(ar),Q(jr),Q(be),Q(qp))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();class gd{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(hd[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(k_(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(k_(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new R(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=hd[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=hd[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(kn.DashCase|kn.Important)?t.style.setProperty(n,r,i&kn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&kn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ql().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function k_(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class U1 extends gd{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=P_(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class md extends gd{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?P_(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class $_ extends md{constructor(t,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(t,n,r,o,s,a,u,c),this.contentAttr=function $1(e){return"_ngcontent-%COMP%".replace(pd,e)}(c),this.hostAttr=function j1(e){return"_nghost-%COMP%".replace(pd,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let G1=(()=>{class e extends R_{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(Q(ar))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();const j_=["alt","control","meta","shift"],H1={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V1={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let z1=(()=>{class e extends R_{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ql().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),j_.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=H1[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),j_.forEach(s=>{s!==i&&(0,V1[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(Q(ar))}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac})}}return e})();const Y1=$y(Cx,"browser",[{provide:jr,useValue:"browser"},{provide:Wp,useValue:function W1(){ld.makeCurrent()},multi:!0},{provide:ar,useFactory:function Z1(){return function lS(e){oc=e}(document),document},deps:[]}]),K1=new U(""),G_=[{provide:oa,useClass:class R1{addToWindow(t){he.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new R(5103,!1);return o},he.getAllAngularTestabilities=()=>t.getAllTestabilities(),he.getAllAngularRootElements=()=>t.getAllRootElements(),he.frameworkStabilizers||(he.frameworkStabilizers=[]),he.frameworkStabilizers.push(r=>{const i=he.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ql().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Oy,useClass:Fl,deps:[be,kl,oa]},{provide:Fl,useClass:Fl,deps:[be,kl,oa]}],H_=[{provide:pc,useValue:"root"},{provide:hn,useFactory:function q1(){return new hn},deps:[]},{provide:dd,useClass:G1,multi:!0,deps:[ar,be,jr]},{provide:dd,useClass:z1,multi:!0,deps:[ar]},F_,O_,x_,{provide:Jp,useExisting:F_},{provide:class s1{},useClass:O1,deps:[]},[]];let Q1=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:As,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(Q(K1,12))}}static{this.\u0275mod=Ai({type:e})}static{this.\u0275inj=fr({providers:[...H_,...G_],imports:[t1,Sx]})}}return e})();function Ao(e){var t=function iO(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ao(r.key),r)}}function Be(e,t,n){return t&&q_(e.prototype,t),n&&q_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Z_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z_=function(){return!!e})()}function mt(e,t,n){return t=ui(t),function sO(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function oO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Z_()?Reflect.construct(t,n||[],ui(e).constructor):t.apply(e,n))}function yd(e,t){return(yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n})(e,t)}function vt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yd(e,t)}function _d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y_(e,t){if(e){if("string"==typeof e)return _d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_d(e,t):void 0}}function ci(e,t){return function aO(e){if(Array.isArray(e))return e}(e)||function uO(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||Y_(e,t)||function cO(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}typeof window<"u"&&window;var Dd={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},K_=new Int8Array(4),Ca=new Int32Array(K_.buffer,0,1),Q_=new Float32Array(K_.buffer,0,1),lO=/^\s*rgba?\s*\(/,dO=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/,li={};for(var Sa in Dd)li[Sa]=Gn(Dd[Sa]),li[Dd[Sa]]=li[Sa];function X_(e,t,n,r,i){return Ca[0]=r<<24|n<<16|t<<8|e,i&&(Ca[0]=4278190079&Ca[0]),Q_[0]}function Gn(e){if(e=e.toLowerCase(),typeof li[e]<"u")return li[e];var t=function fO(e){var t=0,n=0,r=0,i=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),n=parseInt(e.charAt(2)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(4),16),r=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(i=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(lO.test(e)){var o=e.match(dO);o&&(t=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:t,g:n,b:r,a:i}}(e),o=t.a,s=X_(t.r,t.g,t.b,o=255*o|0,!0);return li[e]=s,s}var Ed={};function J_(e){if(typeof Ed[e]<"u")return Ed[e];var o=X_((16711680&e)>>>16,(65280&e)>>>8,255&e,255,!0);return Ed[e]=o,o}function eD(e,t,n,r){return n+(t<<8)+(e<<16)}function tD(e,t,n,r,i,o){var s=Math.floor(n/o*i),a=Math.floor(e.drawingBufferHeight/o-r/o*i),u=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(s,a,1,1,e.RGBA,e.UNSIGNED_BYTE,u);var c=ci(u,4);return[c[0],c[1],c[2],c[3]]}function w(e,t,n){return(t=Ao(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nD(Object(n),!0).forEach(function(r){w(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wd(){return wd=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function pO(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=ui(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},wd.apply(null,arguments)}function rD(e,t,n,r){var i=wd(ui(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof i?function(o){return i.apply(n,o)}:i}function bd(e){var t=0;return e.forEach(function(n){return t+=function gO(e){return e.normalized?1:e.size}(n)}),t}function iD(e,t,n){var i=t.createShader("VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER);if(null===i)throw new Error("loadShader: error while creating the shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("loadShader: error while compiling the shader:\n".concat(s,"\n").concat(n))}return i}function oD(e){var t=e.gl,n=e.buffer,r=e.program,o=e.fragmentShader;t.deleteShader(e.vertexShader),t.deleteShader(o),t.deleteProgram(r),t.deleteBuffer(n)}function sD(e){return e%1==0?e.toFixed(1):e.toString()}var aD="#define PICKING_MODE\n",_O=w(w(w(w(w(w(w(w({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),uD=function(){return Be(function e(t,n,r){je(this,e),w(this,"array",new Float32Array),w(this,"constantArray",new Float32Array),w(this,"capacity",0),w(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=bd(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",t,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",t,aD+i.VERTEX_SHADER_SOURCE,aD+i.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var o=bd(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var u=0;u<a.length;u++)this.constantArray[s*o+u]=a[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}},[{key:"kill",value:function(){oD(this.normalProgram),this.pickProgram&&(oD(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,r,i,o,s){var a=this.getDefinition(),u=r.createBuffer();if(null===u)throw new Error("Program: error while creating the WebGL buffer.");var c=function mO(e,t){return iD("VERTEX",e,t)}(r,i),l=function vO(e,t){return iD("FRAGMENT",e,t)}(r,o),d=function yO(e,t){var r,i,n=e.createProgram();if(null===n)throw new Error("loadProgram: error while creating the program.");for(r=0,i=t.length;r<i;r++)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}(r,[c,l]),f={};a.UNIFORMS.forEach(function(g){var v=r.getUniformLocation(d,g);v&&(f[g]=v)});var p,h={};if(a.ATTRIBUTES.forEach(function(g){h[g.name]=r.getAttribLocation(d,g.name)}),"CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(g){h[g.name]=r.getAttribLocation(d,g.name)}),null===(p=r.createBuffer())))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:d,gl:r,frameBuffer:s,buffer:u,constantBuffer:p||{},uniformLocations:f,attributeLocations:h,isPicking:"pick"===n,vertexShader:c,fragmentShader:l}}},{key:"bindProgram",value:function(n){var r=this,i=0,o=n.gl,s=n.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,n.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,n.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var r=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!1)}),this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!0)})):this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n)})}},{key:"bindAttribute",value:function(n,r,i,o){var s=_O[n.type];if("number"!=typeof s)throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=r.attributeLocations[n.name],u=r.gl;if(-1!==a){u.enableVertexAttribArray(a);var c=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:bd(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,c,i),this.isInstanced&&o)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(a,1);else{var l=u.getExtension("ANGLE_instanced_arrays");l&&l.vertexAttribDivisorANGLE(a,1)}}return n.size*s}},{key:"unbindAttribute",value:function(n,r,i){var o=r.attributeLocations[n.name],s=r.gl;if(-1!==o&&(s.disableVertexAttribArray(o),this.isInstanced&&i))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return 0===this.verticesCount}},{key:"renderProgram",value:function(n,r){var i=r.gl,o=r.program;i.enable(i.BLEND),i.useProgram(o),this.setUniforms(n,r),this.drawWebGL(this.METHOD,r)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(O(O({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,r){var i=r.gl;if(i.bindFramebuffer(i.FRAMEBUFFER,r.frameBuffer),this.isInstanced)if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var s=i.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}else i.drawArrays(n,0,this.verticesCount)}}])}(),cD=function(e){function t(){return je(this,t),mt(this,t,arguments)}return vt(t,e),Be(t,[{key:"kill",value:function(){rD(t,"kill",this,3)([])}},{key:"process",value:function(r,i,o){var s=i*this.STRIDE;if(!o.hidden)return this.processVisibleItem(J_(r),s,o);for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0}}])}(uD),Ia=function(e){function t(){var n;je(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return w(n=mt(this,t,[].concat(i)),"drawLabel",void 0),n}return vt(t,e),Be(t,[{key:"kill",value:function(){rD(t,"kill",this,3)([])}},{key:"process",value:function(r,i,o,s,a){var u=i*this.STRIDE;if(!(a.hidden||o.hidden||s.hidden))return this.processVisibleItem(J_(r),u,o,s,a);for(var c=u+this.STRIDE;u<c;u++)this.array[u]=0}}])}(uD);function lD(e,t){return function(){return Be(function n(r,i,o){je(this,n),w(this,"drawLabel",t),this.programs=e.map(function(s){return new s(r,i,o)})},[{key:"reallocate",value:function(i){this.programs.forEach(function(o){return o.reallocate(i)})}},{key:"process",value:function(i,o,s,a,u){this.programs.forEach(function(c){return c.process(i,o,s,a,u)})}},{key:"render",value:function(i){this.programs.forEach(function(o){return o.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}])}()}function dD(e,t,n){if(t.label){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;e.fillStyle=n.labelColor.attribute?t[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color,e.font="".concat(o," ").concat(r,"px ").concat(i),e.fillText(t.label,t.x+t.size+3,t.y+r/3)}}var fD=WebGLRenderingContext,hD=fD.UNSIGNED_BYTE,Cd=fD.FLOAT,IO=["u_sizeRatio","u_correctionRatio","u_matrix"],Ta=function(e){function t(){return je(this,t),mt(this,t,arguments)}return vt(t,e),Be(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\nuniform float u_correctionRatio;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float border = u_correctionRatio * 2.0;\n  float dist = length(v_diffVector) - v_radius + border;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > border)\n    gl_FragColor = transparent;\n  else\n    gl_FragColor = v_color;\n\n  #else\n  float t = 0.0;\n  if (dist > border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / border;\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:IO,ATTRIBUTES:[{name:"a_position",size:2,type:Cd},{name:"a_size",size:1,type:Cd},{name:"a_color",size:4,type:hD,normalized:!0},{name:"a_id",size:4,type:hD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Cd}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(r,i,o){var s=this.array,a=Gn(o.color);s[i++]=o.x,s[i++]=o.y,s[i++]=o.size,s[i++]=a,s[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,a=s.u_sizeRatio,c=s.u_matrix;o.uniform1f(s.u_correctionRatio,r.correctionRatio),o.uniform1f(a,r.sizeRatio),o.uniformMatrix3fv(c,!1,r.matrix)}}])}(cD);w(Ta,"ANGLE_1",0),w(Ta,"ANGLE_2",2*Math.PI/3),w(Ta,"ANGLE_3",4*Math.PI/3);var pD=WebGLRenderingContext,gD=pD.UNSIGNED_BYTE,Aa=pD.FLOAT,xO=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],Sd={extremity:"target",lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function Na(e){var t=O(O({},Sd),e||{});return function(n){function r(){return je(this,r),mt(this,r,arguments)}return vt(r,n),Be(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_widenessToThicknessRatio;\n\nvarying vec4 v_color;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:xO,ATTRIBUTES:[{name:"a_position",size:2,type:Aa},{name:"a_normal",size:2,type:Aa},{name:"a_radius",size:1,type:Aa},{name:"a_color",size:4,type:gD,normalized:!0},{name:"a_id",size:4,type:gD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:Aa}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,c){if("source"===t.extremity){var l=[u,a];a=l[0],u=l[1]}var d=c.size||1,f=u.size||1,h=a.x,p=a.y,g=u.x,v=u.y,y=Gn(c.color),m=g-h,_=v-p,D=m*m+_*_,C=0,A=0;D&&(C=-_*(D=1/Math.sqrt(D))*d,A=m*D*d);var I=this.array;I[s++]=g,I[s++]=v,I[s++]=-C,I[s++]=-A,I[s++]=f,I[s++]=y,I[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,l=u.u_sizeRatio,d=u.u_correctionRatio,f=u.u_minEdgeThickness,h=u.u_lengthToThicknessRatio,p=u.u_widenessToThicknessRatio;a.uniformMatrix3fv(u.u_matrix,!1,o.matrix),a.uniform1f(l,o.sizeRatio),a.uniform1f(d,o.correctionRatio),a.uniform1f(f,o.minEdgeThickness),a.uniform1f(h,t.lengthToThicknessRatio),a.uniform1f(p,t.widenessToThicknessRatio)}}])}(Ia)}Na();var Id="\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - v_feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",mD=WebGLRenderingContext,vD=mD.UNSIGNED_BYTE,ur=mD.FLOAT,PO=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],FO={lengthToThicknessRatio:Sd.lengthToThicknessRatio};function yD(e){var t=O(O({},FO),e||{});return function(n){function r(){return je(this,r),mt(this,r,arguments)}return vt(r,n),Be(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:Id,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:PO,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ur},{name:"a_positionEnd",size:2,type:ur},{name:"a_normal",size:2,type:ur},{name:"a_color",size:4,type:vD,normalized:!0},{name:"a_id",size:4,type:vD,normalized:!0},{name:"a_radius",size:1,type:ur}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ur},{name:"a_normalCoef",size:1,type:ur},{name:"a_radiusCoef",size:1,type:ur}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,c){var l=c.size||1,d=a.x,f=a.y,h=u.x,p=u.y,g=Gn(c.color),v=h-d,y=p-f,m=u.size||1,_=v*v+y*y,D=0,C=0;_&&(D=-y*(_=1/Math.sqrt(_))*l,C=v*_*l);var A=this.array;A[s++]=d,A[s++]=f,A[s++]=h,A[s++]=p,A[s++]=D,A[s++]=C,A[s++]=g,A[s++]=o,A[s++]=m}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,l=u.u_zoomRatio,d=u.u_feather,f=u.u_pixelRatio,h=u.u_correctionRatio,p=u.u_sizeRatio,g=u.u_minEdgeThickness,v=u.u_lengthToThicknessRatio;a.uniformMatrix3fv(u.u_matrix,!1,o.matrix),a.uniform1f(l,o.zoomRatio),a.uniform1f(p,o.sizeRatio),a.uniform1f(h,o.correctionRatio),a.uniform1f(f,o.pixelRatio),a.uniform1f(d,o.antiAliasingFeather),a.uniform1f(g,o.minEdgeThickness),a.uniform1f(v,t.lengthToThicknessRatio)}}])}(Ia)}yD();var jO=function kO(e){return lD([yD(e),Na(e)])}(),_D=WebGLRenderingContext,DD=_D.UNSIGNED_BYTE,No=_D.FLOAT,GO=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],HO=function(e){function t(){return je(this,t),mt(this,t,arguments)}return vt(t,e),Be(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:'\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least "minThickness" pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n',FRAGMENT_SHADER_SOURCE:Id,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:GO,ATTRIBUTES:[{name:"a_positionStart",size:2,type:No},{name:"a_positionEnd",size:2,type:No},{name:"a_normal",size:2,type:No},{name:"a_color",size:4,type:DD,normalized:!0},{name:"a_id",size:4,type:DD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:No},{name:"a_normalCoef",size:1,type:No}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(r,i,o,s,a){var u=a.size||1,c=o.x,l=o.y,d=s.x,f=s.y,h=Gn(a.color),p=d-c,g=f-l,v=p*p+g*g,y=0,m=0;v&&(y=-g*(v=1/Math.sqrt(v))*u,m=p*v*u);var _=this.array;_[i++]=c,_[i++]=l,_[i++]=d,_[i++]=f,_[i++]=y,_[i++]=m,_[i++]=h,_[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,u=s.u_zoomRatio,c=s.u_feather,l=s.u_pixelRatio,d=s.u_correctionRatio,f=s.u_sizeRatio,h=s.u_minEdgeThickness;o.uniformMatrix3fv(s.u_matrix,!1,r.matrix),o.uniform1f(u,r.zoomRatio),o.uniform1f(f,r.sizeRatio),o.uniform1f(d,r.correctionRatio),o.uniform1f(l,r.pixelRatio),o.uniform1f(c,r.antiAliasingFeather),o.uniform1f(h,r.minEdgeThickness)}}])}(Ia),zO=(WebGLRenderingContext,"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_sourceRadius;\nattribute float a_targetRadius;\nattribute float a_sourceRadiusCoef;\nattribute float a_targetRadiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow heads:\n  // Source arrow head\n  float sourceRadius = a_sourceRadius * a_sourceRadiusCoef;\n  float sourceDirection = sign(sourceRadius);\n  float webGLSourceRadius = sourceDirection * sourceRadius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLSourceArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  vec2 sourceCompensationVector =\n    vec2(-sourceDirection * unitNormal.y, sourceDirection * unitNormal.x)\n    * (webGLSourceRadius + webGLSourceArrowHeadLength);\n    \n  // Target arrow head\n  float targetRadius = a_targetRadius * a_targetRadiusCoef;\n  float targetDirection = sign(targetRadius);\n  float webGLTargetRadius = targetDirection * targetRadius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLTargetArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  vec2 targetCompensationVector =\n  vec2(-targetDirection * unitNormal.y, targetDirection * unitNormal.x)\n    * (webGLTargetRadius + webGLTargetArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + sourceCompensationVector + targetCompensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n"),wD=WebGLRenderingContext,bD=wD.UNSIGNED_BYTE,En=wD.FLOAT,WO=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],qO={lengthToThicknessRatio:Sd.lengthToThicknessRatio};function CD(e){var t=O(O({},qO),e||{});return function(n){function r(){return je(this,r),mt(this,r,arguments)}return vt(r,n),Be(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:zO,FRAGMENT_SHADER_SOURCE:Id,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:WO,ATTRIBUTES:[{name:"a_positionStart",size:2,type:En},{name:"a_positionEnd",size:2,type:En},{name:"a_normal",size:2,type:En},{name:"a_color",size:4,type:bD,normalized:!0},{name:"a_id",size:4,type:bD,normalized:!0},{name:"a_sourceRadius",size:1,type:En},{name:"a_targetRadius",size:1,type:En}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:En},{name:"a_normalCoef",size:1,type:En},{name:"a_sourceRadiusCoef",size:1,type:En},{name:"a_targetRadiusCoef",size:1,type:En}],CONSTANT_DATA:[[0,1,-1,0],[0,-1,1,0],[1,1,0,1],[1,1,0,1],[0,-1,1,0],[1,-1,0,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,c){var l=c.size||1,d=a.x,f=a.y,h=u.x,p=u.y,g=Gn(c.color),v=h-d,y=p-f,m=a.size||1,_=u.size||1,D=v*v+y*y,C=0,A=0;D&&(C=-y*(D=1/Math.sqrt(D))*l,A=v*D*l);var I=this.array;I[s++]=d,I[s++]=f,I[s++]=h,I[s++]=p,I[s++]=C,I[s++]=A,I[s++]=g,I[s++]=o,I[s++]=m,I[s++]=_}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,l=u.u_zoomRatio,d=u.u_feather,f=u.u_pixelRatio,h=u.u_correctionRatio,p=u.u_sizeRatio,g=u.u_minEdgeThickness,v=u.u_lengthToThicknessRatio;a.uniformMatrix3fv(u.u_matrix,!1,o.matrix),a.uniform1f(l,o.zoomRatio),a.uniform1f(p,o.sizeRatio),a.uniform1f(h,o.correctionRatio),a.uniform1f(f,o.pixelRatio),a.uniform1f(d,o.antiAliasingFeather),a.uniform1f(g,o.minEdgeThickness),a.uniform1f(v,t.lengthToThicknessRatio)}}])}(Ia)}CD(),function ZO(e){lD([CD(e),Na(e),Na(O(O({},e),{},{extremity:"source"}))])}(),WebGLRenderingContext,WebGLRenderingContext;var YO=at(791),KO=at.n(YO);function Td(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function TD(e,t){if(e){if("string"==typeof e)return Td(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Td(e,t):void 0}}function AD(e){var t=function nL(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function ND(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AD(r.key),r)}}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function MD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!e})()}function Ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nd(e,t){return(Nd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n})(e,t)}function di(e,t,n){return(t=AD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Md(e){return function aL(e){if(Array.isArray(e))return Td(e)}(e)||function uL(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||TD(e)||function cL(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xD(Object(n),!0).forEach(function(r){di(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lL="relative",dL={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]};function hL(e){var t=e.borders,n=sD(t.filter(function(i){return"fill"in i.size}).length);return"\nprecision highp float;\n\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\n#ifdef PICKING_MODE\nvarying vec4 v_color;\n#else\n// For normal mode, we use the border colors defined in the program:\n".concat(t.flatMap(function(i,o){return"attribute"in i.size?["varying float v_borderSize_".concat(o+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(i,o){var s=i.color;return"attribute"in s?["varying vec4 v_borderColor_".concat(o+1,";")]:"value"in s?["uniform vec4 u_borderColor_".concat(o+1,";")]:[]}).join("\n"),"\n#endif\n\nuniform float u_correctionRatio;\n\nconst float bias = 255.0 / 254.0;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_diffVector);\n  float aaBorder = 2.0 * u_correctionRatio;\n  float v_borderSize_0 = v_radius;\n  vec4 v_borderColor_0 = transparent;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > v_radius)\n    gl_FragColor = transparent;\n  else {\n    gl_FragColor = v_color;\n    gl_FragColor.a *= bias;\n  }\n  #else\n  // Sizes:\n").concat(t.flatMap(function(i,o){var s=i.size;if("fill"in s)return[];var a="attribute"in s?"v_borderSize_".concat(o+1):sD(s.value),u="pixels"===(s.mode||lL)?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(o+1," = ").concat(u," * ").concat(a,";")]}).join("\n"),'\n  // Now, let\'s split the remaining space between "fill" borders:\n  float fillBorderSize = (v_radius - (').concat(t.flatMap(function(i,o){return"fill"in i.size?[]:["borderSize_".concat(o+1)]}).join(" + "),") ) / ").concat(n,";\n").concat(t.flatMap(function(i,o){return"fill"in i.size?["  float borderSize_".concat(o+1," = fillBorderSize;")]:[]}).join("\n"),"\n\n  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:\n  float adjustedBorderSize_0 = v_radius;\n").concat(t.map(function(i,o){return"  float adjustedBorderSize_".concat(o+1," = adjustedBorderSize_").concat(o," - borderSize_").concat(o+1,";")}).join("\n"),"\n\n  // Colors:\n  vec4 borderColor_0 = transparent;\n").concat(t.map(function(i,o){var s=i.color,a=[];return a.push("attribute"in s?"  vec4 borderColor_".concat(o+1," = v_borderColor_").concat(o+1,";"):"transparent"in s?"  vec4 borderColor_".concat(o+1," = vec4(0.0, 0.0, 0.0, 0.0);"):"  vec4 borderColor_".concat(o+1," = u_borderColor_").concat(o+1,";")),a.push("  borderColor_".concat(o+1,".a *= bias;")),a.push("  if (borderSize_".concat(o+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(o+1," = borderColor_").concat(o,"; }")),a.join("\n")}).join("\n"),"\n  if (dist > adjustedBorderSize_0) {\n    gl_FragColor = borderColor_0;\n  } else ").concat(t.map(function(i,o){return"if (dist > adjustedBorderSize_".concat(o," - aaBorder) {\n    gl_FragColor = mix(borderColor_").concat(o+1,", borderColor_").concat(o,", (dist - adjustedBorderSize_").concat(o," + aaBorder) / aaBorder);\n  } else if (dist > adjustedBorderSize_").concat(o+1,") {\n    gl_FragColor = borderColor_").concat(o+1,";\n  } else ")}).join("")," { /* Nothing to add here */ }\n  #endif\n}\n")}function pL(e){var t=e.borders;return"\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\nvarying vec4 v_color;\n#else\n".concat(t.flatMap(function(r,i){return"attribute"in r.size?["attribute float a_borderSize_".concat(i+1,";"),"varying float v_borderSize_".concat(i+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(r,i){return"attribute"in r.color?["attribute vec4 a_borderColor_".concat(i+1,";"),"varying vec4 v_borderColor_".concat(i+1,";")]:[]}).join("\n"),"\n#endif\n\nconst float bias = 255.0 / 254.0;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_radius = size / 2.0;\n  v_diffVector = diffVector;\n\n  #ifdef PICKING_MODE\n  v_color = a_id;\n  #else\n").concat(t.flatMap(function(r,i){return"attribute"in r.size?["  v_borderSize_".concat(i+1," = a_borderSize_").concat(i+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(r,i){return"attribute"in r.color?["  v_borderColor_".concat(i+1," = a_borderColor_").concat(i+1,";")]:[]}).join("\n"),"\n  #endif\n}\n")}var OD=WebGLRenderingContext,LD=OD.UNSIGNED_BYTE,xa=OD.FLOAT;function xd(e){var t,n=RD(RD({},dL),e||{}),r=n.borders,i=n.drawLabel,o=n.drawHover,s=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(Md(r.flatMap(function(a,u){return"value"in a.color?["u_borderColor_".concat(u+1)]:[]})));return t=function(a){function u(){var c;!function tL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var l=arguments.length,d=new Array(l),f=0;f<l;f++)d[f]=arguments[f];return di(Ad(c=function oL(e,t,n){return t=Ma(t),function iL(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ad(e)}(e,MD()?Reflect.construct(t,n||[],Ma(e).constructor):t.apply(e,n))}(this,u,[].concat(d))),"drawLabel",i),di(Ad(c),"drawHover",o),c}return function sL(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nd(e,t)}(u,a),function rL(e,t,n){t&&ND(e.prototype,t),n&&ND(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(u,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:pL(n),FRAGMENT_SHADER_SOURCE:hL(n),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:s,ATTRIBUTES:[{name:"a_position",size:2,type:xa},{name:"a_id",size:4,type:LD,normalized:!0},{name:"a_size",size:1,type:xa}].concat(Md(r.flatMap(function(l,d){return"attribute"in l.color?[{name:"a_borderColor_".concat(d+1),size:4,type:LD,normalized:!0}]:[]})),Md(r.flatMap(function(l,d){return"attribute"in l.size?[{name:"a_borderSize_".concat(d+1),size:1,type:xa}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:xa}],CONSTANT_DATA:[[u.ANGLE_1],[u.ANGLE_2],[u.ANGLE_3]]}}},{key:"processVisibleItem",value:function(l,d,f){var h=this.array;h[d++]=f.x,h[d++]=f.y,h[d++]=l,h[d++]=f.size,r.forEach(function(p){var g=p.color;"attribute"in g&&(h[d++]=Gn(f[g.attribute]||g.defaultValue||"#000000"))}),r.forEach(function(p){var g=p.size;"attribute"in g&&(h[d++]=f[g.attribute]||g.defaultValue)})}},{key:"setUniforms",value:function(l,d){var f=d.gl,h=d.uniformLocations,p=h.u_sizeRatio,v=h.u_matrix;f.uniform1f(h.u_correctionRatio,l.correctionRatio),f.uniform1f(p,l.sizeRatio),f.uniformMatrix3fv(v,!1,l.matrix),r.forEach(function(y,m){var _=y.color;if("value"in _){var D=h["u_borderColor_".concat(m+1)],C=function hO(e,t){Q_[0]=Gn(e);var n=Ca[0];return t&&(n|=16777216),[255&n,n>>8&255,n>>16&255,n>>24&255]}(_.value),A=function eL(e,t){return function QO(e){if(Array.isArray(e))return e}(e)||function XO(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||TD(e,t)||function JO(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(C,4);f.uniform4f(D,A[0]/255,A[1]/255,A[2]/255,A[3]/255)}})}}]),u}(cD),di(t,"ANGLE_1",0),di(t,"ANGLE_2",2*Math.PI/3),di(t,"ANGLE_3",4*Math.PI/3),t}xd();var PD=at(356);let Re=function gL(){const e=arguments[0];for(let t=1,n=arguments.length;t<n;t++)if(arguments[t])for(const r in arguments[t])e[r]=arguments[t][r];return e};function St(e,t,n,r){const i=e._nodes.get(t);let o=null;return i&&(o="mixed"===r?i.out&&i.out[n]||i.undirected&&i.undirected[n]:"directed"===r?i.out&&i.out[n]:i.undirected&&i.undirected[n]),o}function Ue(e){return"object"==typeof e&&null!==e}function FD(e){let t;for(t in e)return!1;return!0}function It(e,t,n){Object.defineProperty(e,t,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Pt(e,t,n){const r={enumerable:!0,configurable:!0};"function"==typeof n?r.get=n:(r.value=n,r.writable=!1),Object.defineProperty(e,t,r)}function kD(e){return!(!Ue(e)||e.attributes&&!Array.isArray(e.attributes))}function wn(){const e=arguments;let t=null,n=-1;return{[Symbol.iterator](){return this},next(){let r=null;for(;;){if(null===t){if(n++,n>=e.length)return{done:!0};t=e[n][Symbol.iterator]()}if(r=t.next(),!r.done)break;t=null}return r}}}function fi(){return{[Symbol.iterator](){return this},next:()=>({done:!0})}}"function"==typeof Object.assign&&(Re=Object.assign);class Rd extends Error{constructor(t){super(),this.name="GraphError",this.message=t}}class x extends Rd{constructor(t){super(t),this.name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.constructor)}}class S extends Rd{constructor(t){super(t),this.name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.constructor)}}class k extends Rd{constructor(t){super(t),this.name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.constructor)}}function $D(e,t){this.key=e,this.attributes=t,this.clear()}function jD(e,t){this.key=e,this.attributes=t,this.clear()}function BD(e,t){this.key=e,this.attributes=t,this.clear()}function hi(e,t,n,r,i){this.key=t,this.attributes=i,this.undirected=e,this.source=n,this.target=r}$D.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},jD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},BD.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},hi.prototype.attach=function(){let e="out",t="in";this.undirected&&(e=t="undirected");const n=this.source.key,r=this.target.key;this.source[e][r]=this,(!this.undirected||n!==r)&&(this.target[t][n]=this)},hi.prototype.attachMulti=function(){let e="out",t="in";const n=this.source.key,r=this.target.key;this.undirected&&(e=t="undirected");const i=this.source[e],o=i[r];if(typeof o>"u")return i[r]=this,void(this.undirected&&n===r||(this.target[t][n]=this));o.previous=this,this.next=o,i[r]=this,this.target[t][n]=this},hi.prototype.detach=function(){const e=this.source.key;let n="out",r="in";this.undirected&&(n=r="undirected"),delete this.source[n][this.target.key],delete this.target[r][e]},hi.prototype.detachMulti=function(){const e=this.source.key,t=this.target.key;let n="out",r="in";this.undirected&&(n=r="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[n][t],delete this.target[r][e]):(this.next.previous=void 0,this.source[n][t]=this.next,this.target[r][e]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};function bn(e,t,n,r,i,o,s){let a,u,c,l;if(r=""+r,0===n){if(a=e._nodes.get(r),!a)throw new S(`Graph.${t}: could not find the "${r}" node in the graph.`);c=i,l=o}else if(3===n){if(u=e._edges.get(i=""+i),!u)throw new S(`Graph.${t}: could not find the "${i}" edge in the graph.`);const d=u.source.key,f=u.target.key;if(r===d)a=u.target;else{if(r!==f)throw new S(`Graph.${t}: the "${r}" node is not attached to the "${i}" edge (${d}, ${f}).`);a=u.source}c=o,l=s}else{if(u=e._edges.get(r),!u)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`);a=1===n?u.source:u.target,c=i,l=o}return[a,c,l]}const TL=[{name:e=>`get${e}Attribute`,attacher:function yL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);return s.attributes[a]}}},{name:e=>`get${e}Attributes`,attacher:function _L(e,t,n){e.prototype[t]=function(r,i){const[o]=bn(this,t,n,r,i);return o.attributes}}},{name:e=>`has${e}Attribute`,attacher:function DL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);return s.attributes.hasOwnProperty(a)}}},{name:e=>`set${e}Attribute`,attacher:function EL(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=bn(this,t,n,r,i,o,s);return a.attributes[u]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}},{name:e=>`update${e}Attribute`,attacher:function wL(e,t,n){e.prototype[t]=function(r,i,o,s){const[a,u,c]=bn(this,t,n,r,i,o,s);if("function"!=typeof c)throw new x(`Graph.${t}: updater should be a function.`);const l=a.attributes,d=c(l[u]);return l[u]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:u}),this}}},{name:e=>`remove${e}Attribute`,attacher:function bL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);return delete s.attributes[a],this.emit("nodeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:a}),this}}},{name:e=>`replace${e}Attributes`,attacher:function CL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);if(!Ue(a))throw new x(`Graph.${t}: provided attributes are not a plain object.`);return s.attributes=a,this.emit("nodeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function SL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);if(!Ue(a))throw new x(`Graph.${t}: provided attributes are not a plain object.`);return Re(s.attributes,a),this.emit("nodeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:a}),this}}},{name:e=>`update${e}Attributes`,attacher:function IL(e,t,n){e.prototype[t]=function(r,i,o){const[s,a]=bn(this,t,n,r,i,o);if("function"!=typeof a)throw new x(`Graph.${t}: provided updater is not a function.`);return s.attributes=a(s.attributes),this.emit("nodeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}}],$L=[{name:e=>`get${e}Attribute`,attacher:function NL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes[i]}}},{name:e=>`get${e}Attributes`,attacher:function ML(e,t,n){e.prototype[t]=function(r){let i;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,s=""+arguments[1];if(i=St(this,o,s,n),!i)throw new S(`Graph.${t}: could not find an edge for the given path ("${o}" - "${s}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=this._edges.get(r=""+r),!i)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return i.attributes}}},{name:e=>`has${e}Attribute`,attacher:function xL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return o.attributes.hasOwnProperty(i)}}},{name:e=>`set${e}Attribute`,attacher:function RL(e,t,n){e.prototype[t]=function(r,i,o){let s;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=St(this,a,u,n),!s)throw new S(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(s=this._edges.get(r=""+r),!s)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return s.attributes[i]=o,this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}},{name:e=>`update${e}Attribute`,attacher:function OL(e,t,n){e.prototype[t]=function(r,i,o){let s;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+r,u=""+i;if(i=arguments[2],o=arguments[3],s=St(this,a,u,n),!s)throw new S(`Graph.${t}: could not find an edge for the given path ("${a}" - "${u}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(s=this._edges.get(r=""+r),!s)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if("function"!=typeof o)throw new x(`Graph.${t}: updater should be a function.`);return s.attributes[i]=o(s.attributes[i]),this.emit("edgeAttributesUpdated",{key:s.key,type:"set",attributes:s.attributes,name:i}),this}}},{name:e=>`remove${e}Attribute`,attacher:function LL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}return delete o.attributes[i],this.emit("edgeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:i}),this}}},{name:e=>`replace${e}Attributes`,attacher:function PL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ue(i))throw new x(`Graph.${t}: provided attributes are not a plain object.`);return o.attributes=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}},{name:e=>`merge${e}Attributes`,attacher:function FL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if(!Ue(i))throw new x(`Graph.${t}: provided attributes are not a plain object.`);return Re(o.attributes,i),this.emit("edgeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:i}),this}}},{name:e=>`update${e}Attributes`,attacher:function kL(e,t,n){e.prototype[t]=function(r,i){let o;if("mixed"!==this.type&&"mixed"!==n&&n!==this.type)throw new k(`Graph.${t}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new k(`Graph.${t}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+r,a=""+i;if(i=arguments[2],o=St(this,s,a,n),!o)throw new S(`Graph.${t}: could not find an edge for the given path ("${s}" - "${a}").`)}else{if("mixed"!==n)throw new k(`Graph.${t}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(o=this._edges.get(r=""+r),!o)throw new S(`Graph.${t}: could not find the "${r}" edge in the graph.`)}if("function"!=typeof i)throw new x(`Graph.${t}: provided updater is not a function.`);return o.attributes=i(o.attributes),this.emit("edgeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}}],BL=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function UL(e,t,n,r){let i=!1;for(const o in t){if(o===r)continue;const s=t[o];if(i=n(s.key,s.attributes,s.source.key,s.target.key,s.source.attributes,s.target.attributes,s.undirected),e&&i)return s.key}}function GL(e,t,n,r){let i,o,s,a=!1;for(const u in t)if(u!==r){i=t[u];do{if(o=i.source,s=i.target,a=n(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected),e&&a)return i.key;i=i.next}while(void 0!==i)}}function Od(e,t){const n=Object.keys(e),r=n.length;let i,o=0;return{[Symbol.iterator](){return this},next(){do{if(i)i=i.next;else{if(o>=r)return{done:!0};const s=n[o++];if(s===t){i=void 0;continue}i=e[s]}}while(!i);return{done:!1,value:{edge:i.key,attributes:i.attributes,source:i.source.key,target:i.target.key,sourceAttributes:i.source.attributes,targetAttributes:i.target.attributes,undirected:i.undirected}}}}}function HL(e,t,n,r){const i=t[n];if(!i)return;const o=i.source,s=i.target;return r(i.key,i.attributes,o.key,s.key,o.attributes,s.attributes,i.undirected)&&e?i.key:void 0}function VL(e,t,n,r){let i=t[n];if(!i)return;let o=!1;do{if(o=r(i.key,i.attributes,i.source.key,i.target.key,i.source.attributes,i.target.attributes,i.undirected),e&&o)return i.key;i=i.next}while(void 0!==i)}function Ld(e,t){let n=e[t];if(void 0!==n.next)return{[Symbol.iterator](){return this},next(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}};let r=!1;return{[Symbol.iterator](){return this},next:()=>!0===r?{done:!0}:(r=!0,{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}})}}function VD(e,t,n,r){if(0===t.size)return;const i="mixed"!==n&&n!==t.type,o="undirected"===n;let s,a,u=!1;const c=t._edges.values();for(;s=c.next(),!0!==s.done;){if(a=s.value,i&&a.undirected!==o)continue;const{key:l,attributes:d,source:f,target:h}=a;if(u=r(l,d,f.key,h.key,f.attributes,h.attributes,a.undirected),e&&u)return l}}function Pd(e,t,n,r,i,o){const s=t?GL:UL;let a;if("undirected"!==n&&("out"!==r&&(a=s(e,i.in,o),e&&a)||"in"!==r&&(a=s(e,i.out,o,r?void 0:i.key),e&&a))||"directed"!==n&&(a=s(e,i.undirected,o),e&&a))return a}function Fd(e,t,n,r,i,o,s){const a=n?VL:HL;let u;if("undirected"!==t&&(typeof i.in<"u"&&"out"!==r&&(u=a(e,i.in,o,s),e&&u)||typeof i.out<"u"&&"in"!==r&&(r||i.key!==o)&&(u=a(e,i.out,o,s),e&&u))||"directed"!==t&&typeof i.undirected<"u"&&(u=a(e,i.undirected,o,s),e&&u))return u}const nP=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ra(){this.A=null,this.B=null}function Mo(e,t,n,r,i){for(const o in r){const s=r[o],a=s.source,c=a===n?s.target:a;if(t&&t.has(c.key))continue;const l=i(c.key,c.attributes);if(e&&l)return c.key}}function kd(e,t,n,r,i){if("mixed"!==t){if("undirected"===t)return Mo(e,null,r,r.undirected,i);if("string"==typeof n)return Mo(e,null,r,r[n],i)}const o=new Ra;let s;if("undirected"!==t){if("out"!==n){if(s=Mo(e,null,r,r.in,i),e&&s)return s;o.wrap(r.in)}if("in"!==n){if(s=Mo(e,o,r,r.out,i),e&&s)return s;o.wrap(r.out)}}if("directed"!==t&&(s=Mo(e,o,r,r.undirected,i),e&&s))return s}function xo(e,t,n){const r=Object.keys(n),i=r.length;let o=0;return{[Symbol.iterator](){return this},next(){let s=null;do{if(o>=i)return e&&e.wrap(n),{done:!0};const a=n[r[o++]],u=a.source;s=u===t?a.target:u,e&&e.has(s.key)&&(s=null)}while(null===s);return{done:!1,value:{neighbor:s.key,attributes:s.attributes}}}}}function Oa(e,t,n,r,i){const o=r._nodes.values(),s=r.type;let a,u,c,l,d,f,h;for(;a=o.next(),!0!==a.done;){let p=!1;if(u=a.value,"undirected"!==s)for(c in l=u.out,l){d=l[c];do{if(f=d.target,p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}if("directed"!==s)for(c in l=u.undirected,l)if(!(t&&u.key>c)){d=l[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=i(u.key,f.key,u.attributes,f.attributes,d.key,d.attributes,d.undirected),e&&h)return d;d=d.next}while(d)}if(n&&!p&&(h=i(u.key,null,u.attributes,null,null,null,null),e&&h))return null}}function fP(e){if(!Ue(e))throw new x('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in e))throw new x("Graph.import: serialized node is missing its key.");if("attributes"in e&&(!Ue(e.attributes)||null===e.attributes))throw new x("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function hP(e){if(!Ue(e))throw new x('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in e))throw new x("Graph.import: serialized edge is missing its source.");if(!("target"in e))throw new x("Graph.import: serialized edge is missing its target.");if("attributes"in e&&(!Ue(e.attributes)||null===e.attributes))throw new x("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in e&&"boolean"!=typeof e.undirected)throw new x("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Ra.prototype.wrap=function(e){null===this.A?this.A=e:null===this.B&&(this.B=e)},Ra.prototype.has=function(e){return null!==this.A&&e in this.A||null!==this.B&&e in this.B};const pP=function mL(){let e=255&Math.floor(256*Math.random());return()=>e++}(),gP=new Set(["directed","undirected","mixed"]),zD=new Set(["domain","_events","_eventsCount","_maxListeners"]),vP={allowSelfLoops:!0,multi:!1,type:"mixed"};function WD(e,t,n){const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}function qD(e,t,n,r,i,o,s,a){if(!r&&"undirected"===e.type)throw new k(`Graph.${t}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===e.type)throw new k(`Graph.${t}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Ue(a))throw new x(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);if(o=""+o,s=""+s,a=a||{},!e.allowSelfLoops&&o===s)throw new k(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=e._nodes.get(o),c=e._nodes.get(s);if(!u)throw new S(`Graph.${t}: source node "${o}" not found.`);if(!c)throw new S(`Graph.${t}: target node "${s}" not found.`);const l={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(e._edges.has(i=""+i))throw new k(`Graph.${t}: the "${i}" edge already exists in the graph.`);if(!e.multi&&(r?typeof u.undirected[s]<"u":typeof u.out[s]<"u"))throw new k(`Graph.${t}: an edge linking "${o}" to "${s}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new hi(r,i,u,c,a);e._edges.set(i,d);const f=o===s;return r?(u.undirectedDegree++,c.undirectedDegree++,f&&(u.undirectedLoops++,e._undirectedSelfLoopCount++)):(u.outDegree++,c.inDegree++,f&&(u.directedLoops++,e._directedSelfLoopCount++)),e.multi?d.attachMulti():d.attach(),r?e._undirectedSize++:e._directedSize++,l.key=i,e.emit("edgeAdded",l),i}function _P(e,t,n,r,i,o,s,a,u){if(!r&&"undirected"===e.type)throw new k(`Graph.${t}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&"directed"===e.type)throw new k(`Graph.${t}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a)if(u){if("function"!=typeof a)throw new x(`Graph.${t}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Ue(a))throw new x(`Graph.${t}: invalid attributes. Expecting an object but got "${a}"`);let c;if(o=""+o,s=""+s,u&&(c=a,a=void 0),!e.allowSelfLoops&&o===s)throw new k(`Graph.${t}: source & target are the same ("${o}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let f,h,l=e._nodes.get(o),d=e._nodes.get(s);if(!n&&(f=e._edges.get(i),f)){if(!(f.source.key===o&&f.target.key===s||r&&f.source.key===s&&f.target.key===o))throw new k(`Graph.${t}: inconsistency detected when attempting to merge the "${i}" edge with "${o}" source & "${s}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!e.multi&&l&&(h=r?l.undirected[s]:l.out[s]),h){const m=[h.key,!1,!1,!1];return(u?c:a)?(u?(h.attributes=c(h.attributes),e.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})):(Re(h.attributes,a),e.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a})),m):m}a=a||{},u&&c&&(a=c(a));const p={key:null,undirected:r,source:o,target:s,attributes:a};if(n)i=e._edgeKeyGenerator();else if(e._edges.has(i=""+i))throw new k(`Graph.${t}: the "${i}" edge already exists in the graph.`);let g=!1,v=!1;l||(l=WD(e,o,{}),g=!0,o===s&&(d=l,v=!0)),d||(d=WD(e,s,{}),v=!0),f=new hi(r,i,l,d,a),e._edges.set(i,f);const y=o===s;return r?(l.undirectedDegree++,d.undirectedDegree++,y&&(l.undirectedLoops++,e._undirectedSelfLoopCount++)):(l.outDegree++,d.inDegree++,y&&(l.directedLoops++,e._directedSelfLoopCount++)),e.multi?f.attachMulti():f.attach(),r?e._undirectedSize++:e._directedSize++,p.key=i,e.emit("edgeAdded",p),[i,!0,g,v]}function pi(e,t){e._edges.delete(t.key);const{source:n,target:r,attributes:i}=t,o=t.undirected,s=n===r;o?(n.undirectedDegree--,r.undirectedDegree--,s&&(n.undirectedLoops--,e._undirectedSelfLoopCount--)):(n.outDegree--,r.inDegree--,s&&(n.directedLoops--,e._directedSelfLoopCount--)),e.multi?t.detachMulti():t.detach(),o?e._undirectedSize--:e._directedSize--,e.emit("edgeDropped",{key:t.key,attributes:i,source:n.key,target:r.key,undirected:o})}class ce extends PD.EventEmitter{constructor(t){if(super(),"boolean"!=typeof(t=Re({},vP,t)).multi)throw new x(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${t.multi}".`);if(!gP.has(t.type))throw new x(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${t.type}".`);if("boolean"!=typeof t.allowSelfLoops)throw new x(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${t.allowSelfLoops}".`);It(this,"NodeDataClass","mixed"===t.type?$D:"directed"===t.type?jD:BD);const r="geid_"+pP()+"_";let i=0;It(this,"_attributes",{}),It(this,"_nodes",new Map),It(this,"_edges",new Map),It(this,"_directedSize",0),It(this,"_undirectedSize",0),It(this,"_directedSelfLoopCount",0),It(this,"_undirectedSelfLoopCount",0),It(this,"_edgeKeyGenerator",()=>{let s;do{s=r+i++}while(this._edges.has(s));return s}),It(this,"_options",t),zD.forEach(s=>It(this,s,this[s])),Pt(this,"order",()=>this._nodes.size),Pt(this,"size",()=>this._edges.size),Pt(this,"directedSize",()=>this._directedSize),Pt(this,"undirectedSize",()=>this._undirectedSize),Pt(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Pt(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Pt(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Pt(this,"multi",this._options.multi),Pt(this,"type",this._options.type),Pt(this,"allowSelfLoops",this._options.allowSelfLoops),Pt(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(t){return this._nodes.has(""+t)}hasDirectedEdge(t,n){if("undirected"===this.type)return!1;if(1===arguments.length){const i=this._edges.get(""+t);return!!i&&!i.undirected}if(2===arguments.length){n=""+n;const r=this._nodes.get(t=""+t);return!!r&&r.out.hasOwnProperty(n)}throw new x(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(t,n){if("directed"===this.type)return!1;if(1===arguments.length){const i=this._edges.get(""+t);return!!i&&i.undirected}if(2===arguments.length){n=""+n;const r=this._nodes.get(t=""+t);return!!r&&r.undirected.hasOwnProperty(n)}throw new x(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(t,n){if(1===arguments.length)return this._edges.has(""+t);if(2===arguments.length){n=""+n;const r=this._nodes.get(t=""+t);return!!r&&(typeof r.out<"u"&&r.out.hasOwnProperty(n)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(n))}throw new x(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(t,n){if("undirected"===this.type)return;if(t=""+t,n=""+n,this.multi)throw new k("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(t);if(!r)throw new S(`Graph.directedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new S(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||void 0;return i?i.key:void 0}undirectedEdge(t,n){if("directed"===this.type)return;if(t=""+t,n=""+n,this.multi)throw new k("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(t);if(!r)throw new S(`Graph.undirectedEdge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new S(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const i=r.undirected&&r.undirected[n]||void 0;return i?i.key:void 0}edge(t,n){if(this.multi)throw new k("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.edge: could not find the "${t}" source node in the graph.`);if(!this._nodes.has(n))throw new S(`Graph.edge: could not find the "${n}" target node in the graph.`);const i=r.out&&r.out[n]||r.undirected&&r.undirected[n]||void 0;if(i)return i.key}areDirectedNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areDirectedNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&(n in r.in||n in r.out)}areOutNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areOutNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&n in r.out}areInNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areInNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&n in r.in}areUndirectedNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areUndirectedNeighbors: could not find the "${t}" node in the graph.`);return"directed"!==this.type&&n in r.undirected}areNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&(n in r.in||n in r.out)||"directed"!==this.type&&n in r.undirected}areInboundNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areInboundNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&n in r.in||"directed"!==this.type&&n in r.undirected}areOutboundNeighbors(t,n){n=""+n;const r=this._nodes.get(t=""+t);if(!r)throw new S(`Graph.areOutboundNeighbors: could not find the "${t}" node in the graph.`);return"undirected"!==this.type&&n in r.out||"directed"!==this.type&&n in r.undirected}inDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.inDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.inDegree}outDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.outDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.outDegree}directedDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.directedDegree: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.inDegree+n.outDegree}undirectedDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.undirectedDegree: could not find the "${t}" node in the graph.`);return"directed"===this.type?0:n.undirectedDegree}inboundDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.inboundDegree: could not find the "${t}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=n.undirectedDegree),"undirected"!==this.type&&(r+=n.inDegree),r}outboundDegree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.outboundDegree: could not find the "${t}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=n.undirectedDegree),"undirected"!==this.type&&(r+=n.outDegree),r}degree(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.degree: could not find the "${t}" node in the graph.`);let r=0;return"directed"!==this.type&&(r+=n.undirectedDegree),"undirected"!==this.type&&(r+=n.inDegree+n.outDegree),r}inDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.inDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.outDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.directedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"undirected"===this.type?0:n.inDegree+n.outDegree-2*n.directedLoops}undirectedDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);return"directed"===this.type?0:n.undirectedDegree-2*n.undirectedLoops}inboundDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*n.undirectedLoops),"undirected"!==this.type&&(r+=n.inDegree,i+=n.directedLoops),r-i}outboundDegreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*n.undirectedLoops),"undirected"!==this.type&&(r+=n.outDegree,i+=n.directedLoops),r-i}degreeWithoutSelfLoops(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.degreeWithoutSelfLoops: could not find the "${t}" node in the graph.`);let r=0,i=0;return"directed"!==this.type&&(r+=n.undirectedDegree,i+=2*n.undirectedLoops),"undirected"!==this.type&&(r+=n.inDegree+n.outDegree,i+=2*n.directedLoops),r-i}source(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.source: could not find the "${t}" edge in the graph.`);return n.source.key}target(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.target: could not find the "${t}" edge in the graph.`);return n.target.key}extremities(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.extremities: could not find the "${t}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(t,n){t=""+t;const r=this._edges.get(n=""+n);if(!r)throw new S(`Graph.opposite: could not find the "${n}" edge in the graph.`);const i=r.source.key,o=r.target.key;if(t===i)return o;if(t===o)return i;throw new S(`Graph.opposite: the "${t}" node is not attached to the "${n}" edge (${i}, ${o}).`)}hasExtremity(t,n){n=""+n;const r=this._edges.get(t=""+t);if(!r)throw new S(`Graph.hasExtremity: could not find the "${t}" edge in the graph.`);return r.source.key===n||r.target.key===n}isUndirected(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.isUndirected: could not find the "${t}" edge in the graph.`);return n.undirected}isDirected(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.isDirected: could not find the "${t}" edge in the graph.`);return!n.undirected}isSelfLoop(t){const n=this._edges.get(t=""+t);if(!n)throw new S(`Graph.isSelfLoop: could not find the "${t}" edge in the graph.`);return n.source===n.target}addNode(t,n){return function yP(e,t,n){if(n&&!Ue(n))throw new x(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(n=n||{},e._nodes.has(t=""+t))throw new k(`Graph.addNode: the "${t}" node already exist in the graph.`);const r=new e.NodeDataClass(t,n);return e._nodes.set(t,r),e.emit("nodeAdded",{key:t,attributes:n}),r}(this,t,n).key}mergeNode(t,n){if(n&&!Ue(n))throw new x(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);n=n||{};let r=this._nodes.get(t=""+t);return r?(n&&(Re(r.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:t,attributes:r.attributes,data:n})),[t,!1]):(r=new this.NodeDataClass(t,n),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:n}),[t,!0])}updateNode(t,n){if(n&&"function"!=typeof n)throw new x(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);let r=this._nodes.get(t=""+t);if(r)return n&&(r.attributes=n(r.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:t,attributes:r.attributes})),[t,!1];const i=n?n({}):{};return r=new this.NodeDataClass(t,i),this._nodes.set(t,r),this.emit("nodeAdded",{key:t,attributes:i}),[t,!0]}dropNode(t){const n=this._nodes.get(t=""+t);if(!n)throw new S(`Graph.dropNode: could not find the "${t}" node in the graph.`);let r;if("undirected"!==this.type){for(const i in n.out){r=n.out[i];do{pi(this,r),r=r.next}while(r)}for(const i in n.in){r=n.in[i];do{pi(this,r),r=r.next}while(r)}}if("directed"!==this.type)for(const i in n.undirected){r=n.undirected[i];do{pi(this,r),r=r.next}while(r)}this._nodes.delete(t),this.emit("nodeDropped",{key:t,attributes:n.attributes})}dropEdge(t){let n;if(arguments.length>1){const r=""+arguments[0],i=""+arguments[1];if(n=St(this,r,i,this.type),!n)throw new S(`Graph.dropEdge: could not find the "${r}" -> "${i}" edge in the graph.`)}else if(n=this._edges.get(t=""+t),!n)throw new S(`Graph.dropEdge: could not find the "${t}" edge in the graph.`);return pi(this,n),this}dropDirectedEdge(t,n){if(arguments.length<2)throw new k("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new k("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=St(this,t=""+t,n=""+n,"directed");if(!r)throw new S(`Graph.dropDirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return pi(this,r),this}dropUndirectedEdge(t,n){if(arguments.length<2)throw new k("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new k("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=St(this,t,n,"undirected");if(!r)throw new S(`Graph.dropUndirectedEdge: could not find a "${t}" -> "${n}" edge in the graph.`);return pi(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const t=this._nodes.values();let n;for(;n=t.next(),!0!==n.done;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(t){return this._attributes[t]}getAttributes(){return this._attributes}hasAttribute(t){return this._attributes.hasOwnProperty(t)}setAttribute(t,n){return this._attributes[t]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}updateAttribute(t,n){if("function"!=typeof n)throw new x("Graph.updateAttribute: updater should be a function.");return this._attributes[t]=n(this._attributes[t]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:t}),this}removeAttribute(t){return delete this._attributes[t],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:t}),this}replaceAttributes(t){if(!Ue(t))throw new x("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=t,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(t){if(!Ue(t))throw new x("Graph.mergeAttributes: provided attributes are not a plain object.");return Re(this._attributes,t),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:t}),this}updateAttributes(t){if("function"!=typeof t)throw new x("Graph.updateAttributes: provided updater is not a function.");return this._attributes=t(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(t,n){if("function"!=typeof t)throw new x("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!kD(n))throw new x("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let i,o;for(;i=r.next(),!0!==i.done;)o=i.value,o.attributes=t(o.key,o.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(t,n){if("function"!=typeof t)throw new x("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!kD(n))throw new x("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let i,o,s,a;for(;i=r.next(),!0!==i.done;)o=i.value,s=o.source,a=o.target,o.attributes=t(o.key,o.attributes,s.key,a.key,s.attributes,a.attributes,o.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(t){if("function"!=typeof t)throw new x("Graph.forEachAdjacencyEntry: expecting a callback.");Oa(!1,!1,!1,this,t)}forEachAdjacencyEntryWithOrphans(t){if("function"!=typeof t)throw new x("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Oa(!1,!1,!0,this,t)}forEachAssymetricAdjacencyEntry(t){if("function"!=typeof t)throw new x("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Oa(!1,!0,!1,this,t)}forEachAssymetricAdjacencyEntryWithOrphans(t){if("function"!=typeof t)throw new x("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Oa(!1,!0,!0,this,t)}nodes(){return Array.from(this._nodes.keys())}forEachNode(t){if("function"!=typeof t)throw new x("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),!0!==r.done;)i=r.value,t(i.key,i.attributes)}findNode(t){if("function"!=typeof t)throw new x("Graph.findNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),!0!==r.done;)if(i=r.value,t(i.key,i.attributes))return i.key}mapNodes(t){if("function"!=typeof t)throw new x("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let r,i;const o=new Array(this.order);let s=0;for(;r=n.next(),!0!==r.done;)i=r.value,o[s++]=t(i.key,i.attributes);return o}someNode(t){if("function"!=typeof t)throw new x("Graph.someNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),!0!==r.done;)if(i=r.value,t(i.key,i.attributes))return!0;return!1}everyNode(t){if("function"!=typeof t)throw new x("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let r,i;for(;r=n.next(),!0!==r.done;)if(i=r.value,!t(i.key,i.attributes))return!1;return!0}filterNodes(t){if("function"!=typeof t)throw new x("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let r,i;const o=[];for(;r=n.next(),!0!==r.done;)i=r.value,t(i.key,i.attributes)&&o.push(i.key);return o}reduceNodes(t,n){if("function"!=typeof t)throw new x("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new x("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=n;const i=this._nodes.values();let o,s;for(;o=i.next(),!0!==o.done;)s=o.value,r=t(r,s.key,s.attributes);return r}nodeEntries(){const t=this._nodes.values();return{[Symbol.iterator](){return this},next(){const n=t.next();if(n.done)return n;const r=n.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const t=new Array(this._nodes.size);let n=0;this._nodes.forEach((i,o)=>{t[n++]=function lP(e,t){const n={key:e};return FD(t.attributes)||(n.attributes=Re({},t.attributes)),n}(o,i)});const r=new Array(this._edges.size);return n=0,this._edges.forEach((i,o)=>{r[n++]=function dP(e,t,n){const r={key:t,source:n.source.key,target:n.target.key};return FD(n.attributes)||(r.attributes=Re({},n.attributes)),"mixed"===e&&n.undirected&&(r.undirected=!0),r}(this.type,o,i)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:t,edges:r}}import(t,n=!1){if(t instanceof ce)return t.forEachNode((u,c)=>{n?this.mergeNode(u,c):this.addNode(u,c)}),t.forEachEdge((u,c,l,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(u,l,d,c):this.mergeDirectedEdgeWithKey(u,l,d,c):p?this.addUndirectedEdgeWithKey(u,l,d,c):this.addDirectedEdgeWithKey(u,l,d,c)}),this;if(!Ue(t))throw new x("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(t.attributes){if(!Ue(t.attributes))throw new x("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(t.attributes):this.replaceAttributes(t.attributes)}let r,i,o,s,a;if(t.nodes){if(o=t.nodes,!Array.isArray(o))throw new x("Graph.import: invalid nodes. Expecting an array.");for(r=0,i=o.length;r<i;r++){s=o[r],fP(s);const{key:u,attributes:c}=s;n?this.mergeNode(u,c):this.addNode(u,c)}}if(t.edges){let u=!1;if("undirected"===this.type&&(u=!0),o=t.edges,!Array.isArray(o))throw new x("Graph.import: invalid edges. Expecting an array.");for(r=0,i=o.length;r<i;r++){a=o[r],hP(a);const{source:c,target:l,attributes:d,undirected:f=u}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,l,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,l,d))}}return this}nullCopy(t){const n=new ce(Re({},this._options,t));return n.replaceAttributes(Re({},this.getAttributes())),n}emptyCopy(t){const n=this.nullCopy(t);return this._nodes.forEach((r,i)=>{const o=Re({},r.attributes);r=new n.NodeDataClass(i,o),n._nodes.set(i,r)}),n}copy(t){if("string"==typeof(t=t||{}).type&&t.type!==this.type&&"mixed"!==t.type)throw new k(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${t.type}" because this would mean losing information about the current graph.`);if("boolean"==typeof t.multi&&t.multi!==this.multi&&!0!==t.multi)throw new k("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof t.allowSelfLoops&&t.allowSelfLoops!==this.allowSelfLoops&&!0!==t.allowSelfLoops)throw new k("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(t),r=this._edges.values();let i,o;for(;i=r.next(),!0!==i.done;)o=i.value,qD(n,"copy",!1,o.undirected,o.key,o.source.key,o.target.key,Re({},o.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const t={};this._nodes.forEach((o,s)=>{t[s]=o.attributes});const n={},r={};this._edges.forEach((o,s)=>{let d,u="",c=o.source.key,l=o.target.key;o.undirected&&c>l&&(d=c,c=l,l=d);const f=`(${c})${o.undirected?"--":"->"}(${l})`;s.startsWith("geid_")?this.multi&&(typeof r[f]>"u"?r[f]=0:r[f]++,u+=`${r[f]}. `):u+=`[${s}]: `,u+=f,n[u]=o.attributes});const i={};for(const o in this)this.hasOwnProperty(o)&&!zD.has(o)&&"function"!=typeof this[o]&&"symbol"!=typeof o&&(i[o]=this[o]);return i.attributes=this._attributes,i.nodes=t,i.edges=n,It(i,"constructor",this.constructor),i}}typeof Symbol<"u"&&(ce.prototype[Symbol.for("nodejs.util.inspect.custom")]=ce.prototype.inspect),[{name:e=>`${e}Edge`,generateKey:!0},{name:e=>`${e}DirectedEdge`,generateKey:!0,type:"directed"},{name:e=>`${e}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:e=>`${e}EdgeWithKey`},{name:e=>`${e}DirectedEdgeWithKey`,type:"directed"},{name:e=>`${e}UndirectedEdgeWithKey`,type:"undirected"}].forEach(e=>{["add","merge","update"].forEach(t=>{const n=e.name(t),r="add"===t?qD:_P;ce.prototype[n]=e.generateKey?function(i,o,s){return r(this,n,!0,"undirected"===(e.type||this.type),null,i,o,s,"update"===t)}:function(i,o,s,a){return r(this,n,!1,"undirected"===(e.type||this.type),i,o,s,a,"update"===t)}})}),function AL(e){TL.forEach(function({name:t,attacher:n}){n(e,t("Node"),0),n(e,t("Source"),1),n(e,t("Target"),2),n(e,t("Opposite"),3)})}(ce),function jL(e){$L.forEach(function({name:t,attacher:n}){n(e,t("Edge"),"mixed"),n(e,t("DirectedEdge"),"directed"),n(e,t("UndirectedEdge"),"undirected")})}(ce),function tP(e){BL.forEach(t=>{(function QL(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o,s){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];if(!arguments.length)return function zL(e,t){if(0===e.size)return[];if("mixed"===t||t===e.type)return Array.from(e._edges.keys());const r=new Array("undirected"===t?e.undirectedSize:e.directedSize),i="undirected"===t,o=e._edges.values();let a,u,s=0;for(;a=o.next(),!0!==a.done;)u=a.value,u.undirected===i&&(r[s++]=u.key);return r}(this,r);if(1===arguments.length){const a=this._nodes.get(o=""+o);if(typeof a>"u")throw new S(`Graph.${n}: could not find the "${o}" node in the graph.`);return function qL(e,t,n,r){const i=[];return Pd(!1,e,t,n,r,function(o){i.push(o)}),i}(this.multi,"mixed"===r?this.type:r,i,a)}if(2===arguments.length){s=""+s;const a=this._nodes.get(o=""+o);if(!a)throw new S(`Graph.${n}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(s))throw new S(`Graph.${n}:  could not find the "${s}" target node in the graph.`);return function YL(e,t,n,r,i){const o=[];return Fd(!1,e,t,n,r,i,function(s){o.push(s)}),o}(r,this.multi,i,a,s)}throw new x(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}})(e,t),function XL(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l,d){if("mixed"===r||"mixed"===this.type||r===this.type){if(1===arguments.length)return VD(!1,this,r,d=c);if(2===arguments.length){d=l;const f=this._nodes.get(c=""+c);if(typeof f>"u")throw new S(`Graph.${o}: could not find the "${c}" node in the graph.`);return Pd(!1,this.multi,"mixed"===r?this.type:r,i,f,d)}if(3===arguments.length){l=""+l;const f=this._nodes.get(c=""+c);if(!f)throw new S(`Graph.${o}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(l))throw new S(`Graph.${o}:  could not find the "${l}" target node in the graph.`);return Fd(!1,r,this.multi,i,f,l,d)}throw new x(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop();let d;if(0===c.length){let f=0;"directed"!==r&&(f+=this.undirectedSize),"undirected"!==r&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,g,v,y,m,_,D)=>{d[h++]=l(p,g,v,y,m,_,D)})}else d=[],c.push((f,h,p,g,v,y,m)=>{d.push(l(f,h,p,g,v,y,m))});return this[o].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),l=c.pop(),d=[];return c.push((f,h,p,g,v,y,m)=>{l(f,h,p,g,v,y,m)&&d.push(f)}),this[o].apply(this,c),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(){let l,d,c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new x(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if("function"==typeof c[c.length-1]&&"function"!=typeof c[c.length-2])throw new x(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);2===c.length?(l=c[0],d=c[1],c=[]):3===c.length?(l=c[1],d=c[2],c=[c[0]]):4===c.length&&(l=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,g,v,y,m,_)=>{f=l(f,h,p,g,v,y,m,_)}),this[o].apply(this,c),f}}(e,t),function JL(e,t){const{name:n,type:r,direction:i}=t,o="find"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(u,c,l){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return!1;if(1===arguments.length)return VD(!0,this,r,l=u);if(2===arguments.length){l=c;const d=this._nodes.get(u=""+u);if(typeof d>"u")throw new S(`Graph.${o}: could not find the "${u}" node in the graph.`);return Pd(!0,this.multi,"mixed"===r?this.type:r,i,d,l)}if(3===arguments.length){c=""+c;const d=this._nodes.get(u=""+u);if(!d)throw new S(`Graph.${o}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(c))throw new S(`Graph.${o}:  could not find the "${c}" target node in the graph.`);return Fd(!0,r,this.multi,i,d,c,l)}throw new x(`Graph.${o}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const s="some"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[s]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,v,y)=>c(d,f,h,p,g,v,y)),!!this[o].apply(this,u)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[a]=function(){const u=Array.prototype.slice.call(arguments),c=u.pop();return u.push((d,f,h,p,g,v,y)=>!c(d,f,h,p,g,v,y)),!this[o].apply(this,u)}}(e,t),function eP(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s,a){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return fi();if(!arguments.length)return function WL(e,t){if(0===e.size)return fi();const n="mixed"!==t&&t!==e.type,r="undirected"===t,i=e._edges.values();return{[Symbol.iterator](){return this},next(){let o,s;for(;;){if(o=i.next(),o.done)return o;if(s=o.value,!n||s.undirected===r)break}return{value:{edge:s.key,attributes:s.attributes,source:s.source.key,target:s.target.key,sourceAttributes:s.source.attributes,targetAttributes:s.target.attributes,undirected:s.undirected},done:!1}}}}(this,r);if(1===arguments.length){const u=this._nodes.get(s=""+s);if(!u)throw new S(`Graph.${o}: could not find the "${s}" node in the graph.`);return function ZL(e,t,n){let r=fi();return"undirected"!==e&&("out"!==t&&typeof n.in<"u"&&(r=wn(r,Od(n.in))),"in"!==t&&typeof n.out<"u"&&(r=wn(r,Od(n.out,t?void 0:n.key)))),"directed"!==e&&typeof n.undirected<"u"&&(r=wn(r,Od(n.undirected))),r}(r,i,u)}if(2===arguments.length){a=""+a;const u=this._nodes.get(s=""+s);if(!u)throw new S(`Graph.${o}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(a))throw new S(`Graph.${o}:  could not find the "${a}" target node in the graph.`);return function KL(e,t,n,r){let i=fi();return"undirected"!==e&&(typeof n.in<"u"&&"out"!==t&&r in n.in&&(i=wn(i,Ld(n.in,r))),typeof n.out<"u"&&"in"!==t&&r in n.out&&(t||n.key!==r)&&(i=wn(i,Ld(n.out,r)))),"directed"!==e&&typeof n.undirected<"u"&&r in n.undirected&&(i=wn(i,Ld(n.undirected,r))),i}(r,i,u,a)}throw new x(`Graph.${o}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}(e,t)})}(ce),function cP(e){nP.forEach(t=>{(function oP(e,t){const{name:n,type:r,direction:i}=t;e.prototype[n]=function(o){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return[];const s=this._nodes.get(o=""+o);if(typeof s>"u")throw new S(`Graph.${n}: could not find the "${o}" node in the graph.`);return function rP(e,t,n){if("mixed"!==e){if("undirected"===e)return Object.keys(n.undirected);if("string"==typeof t)return Object.keys(n[t])}const r=[];return kd(!1,e,t,n,function(i){r.push(i)}),r}("mixed"===r?this.type:r,i,s)}})(e,t),function sP(e,t){const{name:n,type:r,direction:i}=t,o="forEach"+n[0].toUpperCase()+n.slice(1,-1);e.prototype[o]=function(c,l){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;const d=this._nodes.get(c=""+c);if(typeof d>"u")throw new S(`Graph.${o}: could not find the "${c}" node in the graph.`);kd(!1,"mixed"===r?this.type:r,i,d,l)};const s="map"+n[0].toUpperCase()+n.slice(1);e.prototype[s]=function(c,l){const d=[];return this[o](c,(f,h)=>{d.push(l(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);e.prototype[a]=function(c,l){const d=[];return this[o](c,(f,h)=>{l(f,h)&&d.push(f)}),d};const u="reduce"+n[0].toUpperCase()+n.slice(1);e.prototype[u]=function(c,l,d){if(arguments.length<3)throw new x(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[o](c,(h,p)=>{f=l(f,h,p)}),f}}(e,t),function aP(e,t){const{name:n,type:r,direction:i}=t,o=n[0].toUpperCase()+n.slice(1,-1),s="find"+o;e.prototype[s]=function(c,l){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return;const d=this._nodes.get(c=""+c);if(typeof d>"u")throw new S(`Graph.${s}: could not find the "${c}" node in the graph.`);return kd(!0,"mixed"===r?this.type:r,i,d,l)},e.prototype["some"+o]=function(c,l){return!!this[s](c,l)},e.prototype["every"+o]=function(c,l){return!this[s](c,(f,h)=>!l(f,h))}}(e,t),function uP(e,t){const{name:n,type:r,direction:i}=t,o=n.slice(0,-1)+"Entries";e.prototype[o]=function(s){if("mixed"!==r&&"mixed"!==this.type&&r!==this.type)return fi();const a=this._nodes.get(s=""+s);if(typeof a>"u")throw new S(`Graph.${o}: could not find the "${s}" node in the graph.`);return function iP(e,t,n){if("mixed"!==e){if("undirected"===e)return xo(null,n,n.undirected);if("string"==typeof t)return xo(null,n,n[t])}let r=fi();const i=new Ra;return"undirected"!==e&&("out"!==t&&(r=wn(r,xo(i,n,n.in))),"in"!==t&&(r=wn(r,xo(i,n,n.out)))),"directed"!==e&&(r=wn(r,xo(i,n,n.undirected))),r}("mixed"===r?this.type:r,i,a)}}(e,t)})}(ce);class ZD extends ce{constructor(t){const n=Re({type:"directed"},t);if("multi"in n&&!1!==n.multi)throw new x("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==n.type)throw new x('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class YD extends ce{constructor(t){const n=Re({type:"undirected"},t);if("multi"in n&&!1!==n.multi)throw new x("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==n.type)throw new x('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class KD extends ce{constructor(t){const n=Re({multi:!0},t);if("multi"in n&&!0!==n.multi)throw new x("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class QD extends ce{constructor(t){const n=Re({type:"directed",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new x("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==n.type)throw new x('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class XD extends ce{constructor(t){const n=Re({type:"undirected",multi:!0},t);if("multi"in n&&!0!==n.multi)throw new x("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==n.type)throw new x('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function gi(e){e.from=function(t,n){const r=Re({},t.options,n),i=new e(r);return i.import(t),i}}gi(ce),gi(ZD),gi(YD),gi(KD),gi(QD),gi(XD),ce.Graph=ce,ce.DirectedGraph=ZD,ce.UndirectedGraph=YD,ce.MultiGraph=KD,ce.MultiDirectedGraph=QD,ce.MultiUndirectedGraph=XD,ce.InvalidArgumentsGraphError=x,ce.NotFoundGraphError=S,ce.UsageGraphError=k;var $d=function(e){function t(){var n;return je(this,t),(n=mt(this,t)).rawEmitter=n,n}return vt(t,e),Be(t)}(PD.EventEmitter),JD={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},eE={easing:"quadraticInOut",duration:150};function Ft(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function La(e,t,n){return e[0]=t,e[4]="number"==typeof n?n:t,e}function tE(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[3]=-n,e[4]=r,e}function nE(e,t,n){return e[6]=t,e[7]=n,e}function Hn(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=t[0],f=t[1],h=t[2],p=t[3],g=t[4],v=t[5],y=t[6],m=t[7],_=t[8];return e[0]=d*n+f*o+h*u,e[1]=d*r+f*s+h*c,e[2]=d*i+f*a+h*l,e[3]=p*n+g*o+v*u,e[4]=p*r+g*s+v*c,e[5]=p*i+g*a+v*l,e[6]=y*n+m*o+_*u,e[7]=y*r+m*s+_*c,e[8]=y*i+m*a+_*l,e}function jd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=t.x,l=t.y;return{x:c*e[0]+l*e[3]+e[6]*n,y:c*e[1]+l*e[4]+e[7]*n}}function Ro(e,t,n,r,i){var o=e.angle,s=e.ratio,a=e.x,u=e.y,c=t.width,l=t.height,d=Ft(),f=Math.min(c,l)-2*r,h=function TP(e,t){var n=e.height/e.width,r=t.height/t.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}(t,n);return i?(Hn(d,nE(Ft(),a,u)),Hn(d,La(Ft(),s)),Hn(d,tE(Ft(),o)),Hn(d,La(Ft(),c/f/2/h,l/f/2/h))):(Hn(d,La(Ft(),f/c*2*h,f/l*2*h)),Hn(d,tE(Ft(),-o)),Hn(d,La(Ft(),1/s)),Hn(d,nE(Ft(),-a,-u))),d}function rE(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function iE(e,t,n){return n.sort(function(r,i){var o=t(r)||0,s=t(i)||0;return o<s?-1:o>s?1:0})}function oE(e){var t=ci(e.x,2),n=t[0],r=t[1],i=ci(e.y,2),o=i[0],s=i[1],a=Math.max(r-n,s-o),u=(r+n)/2,c=(s+o)/2;(0===a||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(u)&&(u=0),isNaN(c)&&(c=0);var l=function(f){return{x:.5+(f.x-u)/a,y:.5+(f.y-c)/a}};return l.applyTo=function(d){d.x=.5+(d.x-u)/a,d.y=.5+(d.y-c)/a},l.inverse=function(d){return{x:u+a*(d.x-.5),y:c+a*(d.y-.5)}},l.ratio=a,l}function Pa(e){return(Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function sE(e,t){var n=t.size;if(0!==n){var r=e.length;e.length+=n;var i=0;t.forEach(function(o){e[r+i]=o,i++})}}function Bd(e){e=e||{};for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];r&&Object.assign(e,r)}return e}var Ud={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,defaultDrawEdgeLabel:function DO(e,t,n,r,i){var o=i.edgeLabelSize,s=i.edgeLabelFont,a=i.edgeLabelWeight,c=t.label;if(c){e.fillStyle=i.edgeLabelColor.attribute?t[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,e.font="".concat(a," ").concat(o,"px ").concat(s);var l=n.size,d=r.size,f=n.x,h=n.y,p=r.x,g=r.y,v=(f+p)/2,y=(h+g)/2,m=p-f,_=g-h,D=Math.sqrt(m*m+_*_);if(!(D<l+d)){v=((f+=m*l/D)+(p-=m*d/D))/2,y=((h+=_*l/D)+(g-=_*d/D))/2,m=p-f,_=g-h,D=Math.sqrt(m*m+_*_);var I,C=e.measureText(c).width;if(C>D){for(C=e.measureText(c+="\u2026").width;C>D&&c.length>1;)c=c.slice(0,-2)+"\u2026",C=e.measureText(c).width;if(c.length<4)return}I=m>0?_>0?Math.acos(m/D):Math.asin(_/D):_>0?Math.acos(m/D)+Math.PI:Math.asin(m/D)+Math.PI/2,e.save(),e.translate(v,y),e.rotate(I),e.fillText(c,-C/2,t.size/2+o),e.restore()}}},defaultDrawNodeLabel:dD,defaultDrawNodeHover:function EO(e,t,n){var r=n.labelSize,i=n.labelFont;if(e.font="".concat(n.labelWeight," ").concat(r,"px ").concat(i),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var a=e.measureText(t.label).width,u=Math.round(a+5),c=Math.round(r+4),l=Math.max(t.size,r/2)+2,d=Math.asin(c/2/l),f=Math.sqrt(Math.abs(Math.pow(l,2)-Math.pow(c/2,2)));e.beginPath(),e.moveTo(t.x+f,t.y+c/2),e.lineTo(t.x+l+u,t.y+c/2),e.lineTo(t.x+l+u,t.y-c/2),e.lineTo(t.x+f,t.y-c/2),e.arc(t.x,t.y,l,d,-d),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,dD(e,t,n)},minEdgeThickness:1.7,antiAliasingFeather:1,dragTimeout:100,draggedEventsTolerance:3,inertiaDuration:200,inertiaRatio:3,zoomDuration:250,zoomingRatio:1.7,doubleClickTimeout:300,doubleClickZoomingRatio:2.2,doubleClickZoomingDuration:200,tapMoveTolerance:10,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",autoRescale:!0,autoCenter:!0,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraZooming:!0,enableCameraPanning:!0,enableCameraRotation:!0,cameraPanBoundaries:null,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},LP={circle:Ta},PP={arrow:jO,line:HO};function Gd(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,n=e.maxCameraRatio;if("number"==typeof t&&"number"==typeof n&&n<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}var aE=function(e){function t(){var n;return je(this,t),w(n=mt(this,t),"x",.5),w(n,"y",.5),w(n,"angle",0),w(n,"ratio",1),w(n,"minRatio",null),w(n,"maxRatio",null),w(n,"enabledZooming",!0),w(n,"enabledPanning",!0),w(n,"enabledRotation",!0),w(n,"clean",null),w(n,"nextFrame",null),w(n,"previousState",null),w(n,"enabled",!0),n.previousState=n.getState(),n}return vt(t,e),Be(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(r){return this.x===r.x&&this.y===r.y&&this.ratio===r.ratio&&this.angle===r.angle}},{key:"getPreviousState",value:function(){var r=this.previousState;return r?{x:r.x,y:r.y,angle:r.angle,ratio:r.ratio}:null}},{key:"getBoundedRatio",value:function(r){var i=r;return"number"==typeof this.minRatio&&(i=Math.max(i,this.minRatio)),"number"==typeof this.maxRatio&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(r){var i={};return this.enabledPanning&&"number"==typeof r.x&&(i.x=r.x),this.enabledPanning&&"number"==typeof r.y&&(i.y=r.y),this.enabledZooming&&"number"==typeof r.ratio&&(i.ratio=this.getBoundedRatio(r.ratio)),this.enabledRotation&&"number"==typeof r.angle&&(i.angle=r.angle),this.clean?this.clean(O(O({},this.getState()),i)):i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(r){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(r);return"number"==typeof i.x&&(this.x=i.x),"number"==typeof i.y&&(this.y=i.y),"number"==typeof i.ratio&&(this.ratio=i.ratio),"number"==typeof i.angle&&(this.angle=i.angle),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(r){return this.setState(r(this.getState())),this}},{key:"animate",value:function(r){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(!s)return new Promise(function(h){return i.animate(r,o,h)});if(this.enabled){var a=O(O({},eE),o),u=this.validateState(r),c="function"==typeof a.easing?a.easing:JD[a.easing],l=Date.now(),d=this.getState(),f=function(){var p=(Date.now()-l)/a.duration;if(p>=1)return i.nextFrame=null,i.setState(u),void(i.animationCallback&&(i.animationCallback.call(null),i.animationCallback=void 0));var g=c(p),v={};"number"==typeof u.x&&(v.x=d.x+(u.x-d.x)*g),"number"==typeof u.y&&(v.y=d.y+(u.y-d.y)*g),i.enabledRotation&&"number"==typeof u.angle&&(v.angle=d.angle+(u.angle-d.angle)*g),"number"==typeof u.ratio&&(v.ratio=d.ratio+(u.ratio-d.ratio)*g),i.setState(v),i.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(f)):f(),this.animationCallback=s}}},{key:"animatedZoom",value:function(r){return r?"number"==typeof r?this.animate({ratio:this.ratio/r}):this.animate({ratio:this.ratio/(r.factor||1.5)},r):this.animate({ratio:this.ratio/1.5})}},{key:"animatedUnzoom",value:function(r){return r?"number"==typeof r?this.animate({ratio:this.ratio*r}):this.animate({ratio:this.ratio*(r.factor||1.5)},r):this.animate({ratio:1.5*this.ratio})}},{key:"animatedReset",value:function(r){return this.animate({x:.5,y:.5,ratio:1,angle:0},r)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(r){return(new t).setState(r)}}])}($d);function kt(e,t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function Cn(e,t){var n=O(O({},kt(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:e});return n}function Oo(e){var t="x"in e?e:O(O({},e.touches[0]||e.previousTouches[0]),{},{original:e.original,sigmaDefaultPrevented:e.sigmaDefaultPrevented,preventSigmaDefault:function(){e.sigmaDefaultPrevented=!0,t.sigmaDefaultPrevented=!0}});return t}var $P=2;function ka(e){for(var t=[],n=0,r=Math.min(e.length,$P);n<r;n++)t.push(e[n]);return t}function Lo(e,t,n){var r={touches:ka(e.touches).map(function(i){return kt(i,n)}),previousTouches:t.map(function(i){return kt(i,n)}),sigmaDefaultPrevented:!1,preventSigmaDefault:function(){r.sigmaDefaultPrevented=!0},original:e};return r}function uE(e){if(typeof e.deltaY<"u")return-3*e.deltaY/360;if(typeof e.detail<"u")return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}var cE=function(e){function t(n,r){var i;return je(this,t),(i=mt(this,t)).container=n,i.renderer=r,i}return vt(t,e),Be(t)}($d),BP=["doubleClickTimeout","doubleClickZoomingDuration","doubleClickZoomingRatio","dragTimeout","draggedEventsTolerance","inertiaDuration","inertiaRatio","zoomDuration","zoomingRatio"].reduce(function(e,t){return O(O({},e),{},w({},t,Ud[t]))},{}),UP=function(e){function t(n,r){var i;return je(this,t),w(i=mt(this,t,[n,r]),"enabled",!0),w(i,"draggedEvents",0),w(i,"downStartTime",null),w(i,"lastMouseX",null),w(i,"lastMouseY",null),w(i,"isMouseDown",!1),w(i,"isMoving",!1),w(i,"movingTimeout",null),w(i,"startCameraState",null),w(i,"clicks",0),w(i,"doubleClickTimeout",null),w(i,"currentWheelDirection",0),w(i,"settings",BP),i.handleClick=i.handleClick.bind(i),i.handleRightClick=i.handleRightClick.bind(i),i.handleDown=i.handleDown.bind(i),i.handleUp=i.handleUp.bind(i),i.handleMove=i.handleMove.bind(i),i.handleWheel=i.handleWheel.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleEnter=i.handleEnter.bind(i),n.addEventListener("click",i.handleClick,{capture:!1}),n.addEventListener("contextmenu",i.handleRightClick,{capture:!1}),n.addEventListener("mousedown",i.handleDown,{capture:!1}),n.addEventListener("wheel",i.handleWheel,{capture:!1}),n.addEventListener("mouseleave",i.handleLeave,{capture:!1}),n.addEventListener("mouseenter",i.handleEnter,{capture:!1}),document.addEventListener("mousemove",i.handleMove,{capture:!1}),document.addEventListener("mouseup",i.handleUp,{capture:!1}),i}return vt(t,e),Be(t,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("click",this.handleClick),r.removeEventListener("contextmenu",this.handleRightClick),r.removeEventListener("mousedown",this.handleDown),r.removeEventListener("wheel",this.handleWheel),r.removeEventListener("mouseleave",this.handleLeave),r.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(r){var i=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(r);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},this.settings.doubleClickTimeout),this.draggedEvents<this.settings.draggedEventsTolerance&&this.emit("click",Cn(r,this.container))}}},{key:"handleRightClick",value:function(r){this.enabled&&this.emit("rightClick",Cn(r,this.container))}},{key:"handleDoubleClick",value:function(r){if(this.enabled){r.preventDefault(),r.stopPropagation();var i=Cn(r,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/this.settings.doubleClickZoomingRatio);o.animate(this.renderer.getViewportZoomedState(kt(r,this.container),s),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}}},{key:"handleDown",value:function(r){if(this.enabled){if(0===r.button){this.startCameraState=this.renderer.getCamera().getState();var i=kt(r,this.container),s=i.y;this.lastMouseX=i.x,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",Cn(r,this.container))}}},{key:"handleUp",value:function(r){var i=this;if(this.enabled&&this.isMouseDown){var o=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=kt(r,this.container),a=s.x,u=s.y,c=o.getState(),l=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:c.x+this.settings.inertiaRatio*(c.x-l.x),y:c.y+this.settings.inertiaRatio*(c.y-l.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==u)&&o.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var d=i.draggedEvents>0;i.draggedEvents=0,d&&i.renderer.getSetting("hideEdgesOnMove")&&i.renderer.refresh()},0),this.emit("mouseup",Cn(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){var o=Cn(r,this.container);if(this.emit("mousemovebody",o),(r.target===this.container||r.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},this.settings.dragTimeout);var s=this.renderer.getCamera(),a=kt(r,this.container),u=a.x,c=a.y,l=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:u,y:c}),f=l.x-d.x,h=l.y-d.y,p=s.getState();s.setState({x:p.x+f,y:p.y+h}),this.lastMouseX=u,this.lastMouseY=c,r.preventDefault(),r.stopPropagation()}}}},{key:"handleLeave",value:function(r){this.emit("mouseleave",Cn(r,this.container))}},{key:"handleEnter",value:function(r){this.emit("mouseenter",Cn(r,this.container))}},{key:"handleWheel",value:function(r){var i=this,o=this.renderer.getCamera();if(this.enabled&&o.enabledZooming){var s=uE(r);if(s){var a=function kP(e,t){return O(O({},Cn(e,t)),{},{delta:uE(e)})}(r,this.container);if(this.emit("wheel",a),a.sigmaDefaultPrevented)return r.preventDefault(),void r.stopPropagation();var u=o.getState().ratio,l=o.getBoundedRatio(u*(s>0?1/this.settings.zoomingRatio:this.settings.zoomingRatio)),d=s>0?1:-1,f=Date.now();u!==l&&(r.preventDefault(),r.stopPropagation(),!(this.currentWheelDirection===d&&this.lastWheelTriggerTime&&f-this.lastWheelTriggerTime<this.settings.zoomDuration/5)&&(o.animate(this.renderer.getViewportZoomedState(kt(r,this.container),l),{easing:"quadraticOut",duration:this.settings.zoomDuration},function(){i.currentWheelDirection=0}),this.currentWheelDirection=d,this.lastWheelTriggerTime=f))}}}},{key:"setSettings",value:function(r){this.settings=r}}])}(cE),HP=["dragTimeout","inertiaDuration","inertiaRatio","doubleClickTimeout","doubleClickZoomingRatio","doubleClickZoomingDuration","tapMoveTolerance"].reduce(function(e,t){return O(O({},e),{},w({},t,Ud[t]))},{}),VP=function(e){function t(n,r){var i;return je(this,t),w(i=mt(this,t,[n,r]),"enabled",!0),w(i,"isMoving",!1),w(i,"hasMoved",!1),w(i,"touchMode",0),w(i,"startTouchesPositions",[]),w(i,"lastTouches",[]),w(i,"lastTap",null),w(i,"settings",HP),i.handleStart=i.handleStart.bind(i),i.handleLeave=i.handleLeave.bind(i),i.handleMove=i.handleMove.bind(i),n.addEventListener("touchstart",i.handleStart,{capture:!1}),n.addEventListener("touchcancel",i.handleLeave,{capture:!1}),document.addEventListener("touchend",i.handleLeave,{capture:!1,passive:!1}),document.addEventListener("touchmove",i.handleMove,{capture:!1,passive:!1}),i}return vt(t,e),Be(t,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("touchstart",this.handleStart),r.removeEventListener("touchcancel",this.handleLeave),document.removeEventListener("touchend",this.handleLeave),document.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"handleStart",value:function(r){var i=this;if(this.enabled){r.preventDefault();var o=ka(r.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(h){return kt(h,i.container)}),2===this.touchMode){var s=ci(this.startTouchesPositions,2),a=s[0],u=a.x,c=a.y,l=s[1],d=l.x,f=l.y;this.startTouchesAngle=Math.atan2(f-c,d-u),this.startTouchesDistance=Math.sqrt(Math.pow(d-u,2)+Math.pow(f-c,2))}this.emit("touchdown",Lo(r,this.lastTouches,this.container)),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions}}},{key:"handleLeave",value:function(r){if(this.enabled&&this.startTouchesPositions.length){switch(r.cancelable&&r.preventDefault(),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===r.touches.length){this.handleStart(r),r.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),o=i.getState(),s=i.getPreviousState()||{x:0,y:0};i.animate({x:o.x+this.settings.inertiaRatio*(o.x-s.x),y:o.y+this.settings.inertiaRatio*(o.y-s.y)},{duration:this.settings.inertiaDuration,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}if(this.emit("touchup",Lo(r,this.lastTouches,this.container)),!r.touches.length){var a=kt(this.lastTouches[0],this.container),u=this.startTouchesPositions[0],c=Math.pow(a.x-u.x,2)+Math.pow(a.y-u.y,2);if(!r.touches.length&&c<Math.pow(this.settings.tapMoveTolerance,2))if(this.lastTap&&Date.now()-this.lastTap.time<this.settings.doubleClickTimeout){var l=Lo(r,this.lastTouches,this.container);if(this.emit("doubletap",l),this.lastTap=null,!l.sigmaDefaultPrevented){var d=this.renderer.getCamera(),f=d.getBoundedRatio(d.getState().ratio/this.settings.doubleClickZoomingRatio);d.animate(this.renderer.getViewportZoomedState(a,f),{easing:"quadraticInOut",duration:this.settings.doubleClickZoomingDuration})}}else{var h=Lo(r,this.lastTouches,this.container);this.emit("tap",h),this.lastTap={time:Date.now(),position:h.touches[0]||h.previousTouches[0]}}}this.lastTouches=ka(r.touches),this.startTouchesPositions=[]}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled&&this.startTouchesPositions.length){r.preventDefault();var o=ka(r.touches),s=o.map(function(zn){return kt(zn,i.container)}),a=this.lastTouches;this.lastTouches=o,this.lastTouchesPositions=s;var u=Lo(r,a,this.container);if(this.emit("touchmove",u),!u.sigmaDefaultPrevented&&(this.hasMoved||(this.hasMoved=s.some(function(zn,Vd){var en=i.startTouchesPositions[Vd];return en&&(zn.x!==en.x||zn.y!==en.y)})),this.hasMoved)){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},this.settings.dragTimeout);var c=this.renderer.getCamera(),l=this.startCameraState,d=this.renderer.getSetting("stagePadding");switch(this.touchMode){case 1:var f=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),h=f.x,p=f.y,g=this.renderer.viewportToFramedGraph(s[0]);c.setState({x:l.x+h-g.x,y:l.y+p-g.y});break;case 2:var m={x:.5,y:.5,angle:0,ratio:1},_=s[0],D=_.x,C=_.y,A=s[1],I=A.x,P=A.y,L=Math.atan2(P-C,I-D)-this.startTouchesAngle,se=Math.hypot(P-C,I-D)/this.startTouchesDistance,ye=c.getBoundedRatio(l.ratio/se);m.ratio=ye,m.angle=l.angle+L;var Oe=this.getDimensions(),$t=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:l}),le=Math.min(Oe.width,Oe.height)-2*d,$a=ye/le,mi=D-le/2/(le/Oe.width),cr=C-le/2/(le/Oe.height),Vn=[mi*Math.cos(-m.angle)-cr*Math.sin(-m.angle),cr*Math.cos(-m.angle)+mi*Math.sin(-m.angle)];cr=Vn[1],m.x=$t.x-(mi=Vn[0])*$a,m.y=$t.y+cr*$a,c.setState(m)}}}}},{key:"setSettings",value:function(r){this.settings=r}}])}(cE);function lE(e){return function zP(e){if(Array.isArray(e))return _d(e)}(e)||function WP(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y_(e)||function qP(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hd(e,t){if(null==e)return{};var n,r,i=function ZP(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t.includes(n=o[r])||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var dE=function(){return Be(function e(t,n){je(this,e),this.key=t,this.size=n},null,[{key:"compare",value:function(n,r){return n.size>r.size?-1:n.size<r.size||n.key>r.key?1:-1}}])}(),fE=function(){return Be(function e(){je(this,e),w(this,"width",0),w(this,"height",0),w(this,"cellSize",0),w(this,"columns",0),w(this,"rows",0),w(this,"cells",{})},[{key:"resizeAndClear",value:function(n,r){this.width=n.width,this.height=n.height,this.cellSize=r,this.columns=Math.ceil(n.width/r),this.rows=Math.ceil(n.height/r),this.cells={}}},{key:"getIndex",value:function(n){var r=Math.floor(n.x/this.cellSize);return Math.floor(n.y/this.cellSize)*this.columns+r}},{key:"add",value:function(n,r,i){var o=new dE(n,r),s=this.getIndex(i),a=this.cells[s];a||(this.cells[s]=a=[]),a.push(o)}},{key:"organize",value:function(){for(var n in this.cells)this.cells[n].sort(dE.compare)}},{key:"getLabelsToDisplay",value:function(n,r){var i=this.cellSize*this.cellSize,a=Math.ceil(i/n/n*r/i),u=[];for(var c in this.cells)for(var l=this.cells[c],d=0;d<Math.min(a,l.length);d++)u.push(l[d].key);return u}}])}(),Sn=Object.prototype.hasOwnProperty,gE=function(e){function t(n,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(je(this,t),w(i=mt(this,t),"elements",{}),w(i,"canvasContexts",{}),w(i,"webGLContexts",{}),w(i,"pickingLayers",new Set),w(i,"textures",{}),w(i,"frameBuffers",{}),w(i,"activeListeners",{}),w(i,"labelGrid",new fE),w(i,"nodeDataCache",{}),w(i,"edgeDataCache",{}),w(i,"nodeProgramIndex",{}),w(i,"edgeProgramIndex",{}),w(i,"nodesWithForcedLabels",new Set),w(i,"edgesWithForcedLabels",new Set),w(i,"nodeExtent",{x:[0,1],y:[0,1]}),w(i,"nodeZExtent",[1/0,-1/0]),w(i,"edgeZExtent",[1/0,-1/0]),w(i,"matrix",Ft()),w(i,"invMatrix",Ft()),w(i,"correctionRatio",1),w(i,"customBBox",null),w(i,"normalizationFunction",oE({x:[0,1],y:[0,1]})),w(i,"graphToViewportRatio",1),w(i,"itemIDsIndex",{}),w(i,"nodeIndices",{}),w(i,"edgeIndices",{}),w(i,"width",0),w(i,"height",0),w(i,"pixelRatio",rE()),w(i,"pickingDownSizingRatio",2*i.pixelRatio),w(i,"displayedNodeLabels",new Set),w(i,"displayedEdgeLabels",new Set),w(i,"highlightedNodes",new Set),w(i,"hoveredNode",null),w(i,"hoveredEdge",null),w(i,"renderFrame",null),w(i,"renderHighlightedNodesFrame",null),w(i,"needToProcess",!1),w(i,"checkEdgesEventsFrame",null),w(i,"nodePrograms",{}),w(i,"nodeHoverPrograms",{}),w(i,"edgePrograms",{}),i.settings=function FP(e){var t=Bd({},Ud,e);return t.nodeProgramClasses=Bd({},LP,t.nodeProgramClasses),t.edgeProgramClasses=Bd({},PP,t.edgeProgramClasses),t}(o),Gd(i.settings),function MP(e){if(!KO()(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode(function(t,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var s in i.graph=n,i.container=r,i.createWebGLContext("edges",{picking:o.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse",{style:{touchAction:"none",userSelect:"none"}}),i.resize(),i.settings.nodeProgramClasses)i.registerNodeProgram(s,i.settings.nodeProgramClasses[s],i.settings.nodeHoverProgramClasses[s]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new aE,i.bindCameraHandlers(),i.mouseCaptor=new UP(i.elements.mouse,i),i.mouseCaptor.setSettings(i.settings),i.touchCaptor=new VP(i.elements.mouse,i),i.touchCaptor.setSettings(i.settings),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return vt(t,e),Be(t,[{key:"registerNodeProgram",value:function(r,i,o){return this.nodePrograms[r]&&this.nodePrograms[r].kill(),this.nodeHoverPrograms[r]&&this.nodeHoverPrograms[r].kill(),this.nodePrograms[r]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[r]=new(o||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(r,i){return this.edgePrograms[r]&&this.edgePrograms[r].kill(),this.edgePrograms[r]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(r){if(this.nodePrograms[r]){var i=this.nodePrograms,o=i[r],s=Hd(i,[r].map(Ao));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[r]){var a=this.nodeHoverPrograms,u=a[r],c=Hd(a,[r].map(Ao));u.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(r){if(this.edgePrograms[r]){var i=this.edgePrograms,o=i[r],s=Hd(i,[r].map(Ao));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(r){var i=this.webGLContexts[r],o=this.frameBuffers[r],s=this.textures[r];s&&i.deleteTexture(s);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,o),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[r]=a,this}},{key:"bindCameraHandlers",value:function(){var r=this;return this.activeListeners.camera=function(){r.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(r){var s=tD(this.webGLContexts.nodes,this.frameBuffers.nodes,r.x,r.y,this.pixelRatio,this.pickingDownSizingRatio),a=eD.apply(void 0,lE(s)),u=this.itemIDsIndex[a];return u&&"node"===u.type?u.id:null}},{key:"bindEventHandlers",value:function(){var r=this;this.activeListeners.handleResize=function(){r.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s=Oo(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}},u=r.getNodeAtPosition(s);if(u&&r.hoveredNode!==u&&!r.nodeDataCache[u].hidden)return r.hoveredNode&&r.emit("leaveNode",O(O({},a),{},{node:r.hoveredNode})),r.hoveredNode=u,r.emit("enterNode",O(O({},a),{},{node:u})),void r.scheduleHighlightedNodesRender();if(r.hoveredNode&&r.getNodeAtPosition(s)!==r.hoveredNode){var c=r.hoveredNode;return r.hoveredNode=null,r.emit("leaveNode",O(O({},a),{},{node:c})),void r.scheduleHighlightedNodesRender()}if(r.settings.enableEdgeEvents){var l=r.hoveredNode?null:r.getEdgeAtPoint(a.event.x,a.event.y);l!==r.hoveredEdge&&(r.hoveredEdge&&r.emit("leaveEdge",O(O({},a),{},{edge:r.hoveredEdge})),l&&r.emit("enterEdge",O(O({},a),{},{edge:l})),r.hoveredEdge=l)}},this.activeListeners.handleMoveBody=function(o){var s=Oo(o);r.emit("moveBody",{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}})},this.activeListeners.handleLeave=function(o){var s=Oo(o),a={event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}};r.hoveredNode&&(r.emit("leaveNode",O(O({},a),{},{node:r.hoveredNode})),r.scheduleHighlightedNodesRender()),r.settings.enableEdgeEvents&&r.hoveredEdge&&(r.emit("leaveEdge",O(O({},a),{},{edge:r.hoveredEdge})),r.scheduleHighlightedNodesRender()),r.emit("leaveStage",O({},a))},this.activeListeners.handleEnter=function(o){var s=Oo(o);r.emit("enterStage",O({},{event:s,preventSigmaDefault:function(){s.preventSigmaDefault()}}))};var i=function(s){return function(a){var u=Oo(a),c={event:u,preventSigmaDefault:function(){u.preventSigmaDefault()}},l=r.getNodeAtPosition(u);if(l)return r.emit("".concat(s,"Node"),O(O({},c),{},{node:l}));if(r.settings.enableEdgeEvents){var d=r.getEdgeAtPoint(u.x,u.y);if(d)return r.emit("".concat(s,"Edge"),O(O({},c),{},{edge:d}))}return r.emit("".concat(s,"Stage"),c)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("mousemovebody",this.activeListeners.handleMoveBody),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this.touchCaptor.on("touchdown",this.activeListeners.handleDown),this.touchCaptor.on("touchdown",this.activeListeners.handleMove),this.touchCaptor.on("touchup",this.activeListeners.handleUp),this.touchCaptor.on("touchmove",this.activeListeners.handleMove),this.touchCaptor.on("tap",this.activeListeners.handleClick),this.touchCaptor.on("doubletap",this.activeListeners.handleDoubleClick),this.touchCaptor.on("touchmove",this.activeListeners.handleMoveBody),this}},{key:"bindGraphHandlers",value:function(){var r=this,i=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,u=null===(a=s.hints)||void 0===a?void 0:a.attributes;r.graph.forEachNode(function(l){return r.updateNode(l)});var c=!u||u.some(function(l){return o.has(l)});r.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,u=null===(a=s.hints)||void 0===a?void 0:a.attributes;r.graph.forEachEdge(function(l){return r.updateEdge(l)});var c=u&&["zIndex","type"].some(function(l){return u?.includes(l)});r.refresh({partialGraph:{edges:i.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;r.addNode(a),r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){r.refresh({partialGraph:{nodes:[s.key]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){r.removeNode(s.key),r.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;r.addEdge(a),r.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){r.refresh({partialGraph:{edges:[s.key]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){r.removeEdge(s.key),r.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){r.clearEdgeState(),r.clearEdgeIndices(),r.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){r.clearEdgeState(),r.clearNodeState(),r.clearEdgeIndices(),r.clearNodeIndices(),r.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var r=this.graph;r.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(r,i){var o=tD(this.webGLContexts.edges,this.frameBuffers.edges,r,i,this.pixelRatio,this.pickingDownSizingRatio),s=eD.apply(void 0,lE(o)),a=this.itemIDsIndex[s];return a&&"edge"===a.type?a.id:null}},{key:"process",value:function(){var r=this;this.emit("beforeProcess");var i=this.graph,o=this.settings,s=this.getDimensions();if(this.nodeExtent=function NP(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,n=-1/0,r=1/0,i=-1/0;return e.forEachNode(function(o,s){var a=s.x,u=s.y;a<t&&(t=a),a>n&&(n=a),u<r&&(r=u),u>i&&(i=u)}),{x:[t,n],y:[r,i]}}(this.graph),!this.settings.autoRescale){var a=s.width,u=s.height,c=this.nodeExtent,l=c.x,d=c.y;this.nodeExtent={x:[(l[0]+l[1])/2-a/2,(l[0]+l[1])/2+a/2],y:[(d[0]+d[1])/2-u/2,(d[0]+d[1])/2+u/2]}}this.normalizationFunction=oE(this.customBBox||this.nodeExtent);var h=Ro((new aE).getState(),s,this.getGraphDimensions(),this.getStagePadding());this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var p={},g={},v={},y={},m=1,_=i.nodes(),D=0,C=_.length;D<C;D++){var A=_[D],I=this.nodeDataCache[A],P=i.getNodeAttributes(A);I.x=P.x,I.y=P.y,this.normalizationFunction.applyTo(I),"string"==typeof I.label&&!I.hidden&&this.labelGrid.add(A,I.size,this.framedGraphToViewport(I,{matrix:h})),p[I.type]=(p[I.type]||0)+1}for(var L in this.labelGrid.organize(),this.nodePrograms){if(!Sn.call(this.nodePrograms,L))throw new Error('Sigma: could not find a suitable program for node type "'.concat(L,'"!'));this.nodePrograms[L].reallocate(p[L]||0),p[L]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(_=iE(0,function(zd){return r.nodeDataCache[zd].zIndex},_));for(var se=0,ye=_.length;se<ye;se++){var Oe=_[se];g[Oe]=m,y[g[Oe]]={type:"node",id:Oe},m++,this.addNodeToProgram(Oe,g[Oe],p[this.nodeDataCache[Oe].type]++)}for(var le={},De=i.edges(),Le=0,$a=De.length;Le<$a;Le++){var cr=this.edgeDataCache[De[Le]];le[cr.type]=(le[cr.type]||0)+1}for(var Vn in this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&(De=iE(0,function(zd){return r.edgeDataCache[zd].zIndex},De)),this.edgePrograms){if(!Sn.call(this.edgePrograms,Vn))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(Vn,'"!'));this.edgePrograms[Vn].reallocate(le[Vn]||0),le[Vn]=0}for(var zn=0,Vd=De.length;zn<Vd;zn++){var en=De[zn];v[en]=m,y[v[en]]={type:"edge",id:en},m++,this.addEdgeToProgram(en,v[en],le[this.edgeDataCache[en].type]++)}return this.itemIDsIndex=y,this.nodeIndices=g,this.edgeIndices=v,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(r){var i=this,o=this.settings;if(this.camera.minRatio=o.minCameraRatio,this.camera.maxRatio=o.maxCameraRatio,this.camera.enabledZooming=o.enableCameraZooming,this.camera.enabledPanning=o.enableCameraPanning,this.camera.enabledRotation=o.enableCameraRotation,this.camera.clean=o.cameraPanBoundaries?function(l){return i.cleanCameraState(l,o.cameraPanBoundaries&&"object"===Pa(o.cameraPanBoundaries)?o.cameraPanBoundaries:{})}:null,this.camera.setState(this.camera.validateState(this.camera.getState())),r){if(r.edgeProgramClasses!==o.edgeProgramClasses){for(var s in o.edgeProgramClasses)o.edgeProgramClasses[s]!==r.edgeProgramClasses[s]&&this.registerEdgeProgram(s,o.edgeProgramClasses[s]);for(var a in r.edgeProgramClasses)o.edgeProgramClasses[a]||this.unregisterEdgeProgram(a)}if(r.nodeProgramClasses!==o.nodeProgramClasses||r.nodeHoverProgramClasses!==o.nodeHoverProgramClasses){for(var u in o.nodeProgramClasses)(o.nodeProgramClasses[u]!==r.nodeProgramClasses[u]||o.nodeHoverProgramClasses[u]!==r.nodeHoverProgramClasses[u])&&this.registerNodeProgram(u,o.nodeProgramClasses[u],o.nodeHoverProgramClasses[u]);for(var c in r.nodeProgramClasses)o.nodeProgramClasses[c]||this.unregisterNodeProgram(c)}}return this.mouseCaptor.setSettings(this.settings),this.touchCaptor.setSettings(this.settings),this}},{key:"cleanCameraState",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.tolerance,s=void 0===o?0:o,a=i.boundaries,u=O({},r),c=a||this.nodeExtent,l=ci(c.x,2),d=l[0],f=l[1],h=ci(c.y,2),p=h[0],g=h[1],v=[this.graphToViewport({x:d,y:p},{cameraState:r}),this.graphToViewport({x:f,y:p},{cameraState:r}),this.graphToViewport({x:d,y:g},{cameraState:r}),this.graphToViewport({x:f,y:g},{cameraState:r})],y=1/0,m=-1/0,_=1/0,D=-1/0;v.forEach(function(le){var De=le.x,Le=le.y;y=Math.min(y,De),m=Math.max(m,De),_=Math.min(_,Le),D=Math.max(D,Le)});var C=m-y,A=D-_,I=this.getDimensions(),P=I.width,L=I.height,se=0,ye=0;if(C>=P?m<P-s?se=m-(P-s):y>s&&(se=y-s):m>P+s?se=m-(P+s):y<-s&&(se=y+s),A>=L?D<L-s?ye=D-(L-s):_>s&&(ye=_-s):D>L+s?ye=D-(L+s):_<-s&&(ye=_+s),se||ye){var Oe=this.viewportToFramedGraph({x:0,y:0},{cameraState:r}),$t=this.viewportToFramedGraph({x:se,y:ye},{cameraState:r});ye=$t.y-Oe.y,u.x+=se=$t.x-Oe.x,u.y+=ye}return u}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var r=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(r.ratio,this.settings.labelDensity);sE(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=i.length;s<a;s++){var u=i[s],c=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!c.hidden){var l=this.framedGraphToViewport(c),d=l.x,f=l.y,h=this.scaleSize(c.size);if((c.forceLabel||!(h<this.settings.labelRenderedSizeThreshold))&&!(d<-150||d>this.width+150||f<-50||f>this.height+50)){this.displayedNodeLabels.add(u);var p=this.settings.defaultDrawNodeLabel,g=this.nodePrograms[c.type];(g?.drawLabel||p)(o,O(O({key:u},c),{},{size:h,x:d,y:f}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var r=this.canvasContexts.edgeLabels;r.clearRect(0,0,this.width,this.height);var i=function YP(e){var n=e.hoveredNode,r=e.highlightedNodes,i=e.displayedNodeLabels,o=[];return e.graph.forEachEdge(function(s,a,u,c){(u===n||c===n||r.has(u)||r.has(c)||i.has(u)&&i.has(c))&&o.push(s)}),o}({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});sE(i,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=i.length;s<a;s++){var u=i[s],c=this.graph.extremities(u),l=this.nodeDataCache[c[0]],d=this.nodeDataCache[c[1]],f=this.edgeDataCache[u];if(!o.has(u)&&!(f.hidden||l.hidden||d.hidden)){var h=this.settings.defaultDrawEdgeLabel,p=this.edgePrograms[f.type];(p?.drawLabel||h)(r,O(O({key:u},f),{},{size:this.scaleSize(f.size)}),O(O(O({key:c[0]},l),this.framedGraphToViewport(l)),{},{size:this.scaleSize(l.size)}),O(O(O({key:c[1]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),this.settings),o.add(u)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var r=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(f){f!==r.hoveredNode&&s.push(f)}),s.forEach(function(f){return v=(g=r.framedGraphToViewport(p=r.nodeDataCache[h=f])).x,y=g.y,m=r.scaleSize(p.size),_=r.settings.defaultDrawNodeHover,D=r.nodePrograms[p.type],void(D?.drawHover||_)(i,O(O({key:h},p),{},{size:m,x:v,y}),r.settings);var h,p,g,v,y,m,_,D});var a={};for(var u in s.forEach(function(f){var h=r.nodeDataCache[f].type;a[h]=(a[h]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(a[u]||0),a[u]=0;s.forEach(function(f){var h=r.nodeDataCache[f];r.nodeHoverPrograms[h.type].process(0,a[h.type]++,h)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].render(c)}},{key:"scheduleHighlightedNodesRender",value:function(){var r=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){r.renderHighlightedNodesFrame=null,r.renderHighlightedNodes(),r.renderEdgeLabels()}))}},{key:"render",value:function(){var r=this;this.emit("beforeRender");var i=function(){return r.emit("afterRender"),r};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(v){return r.resetWebGLTexture(v)}),!this.graph.order)return i();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),u=this.getDimensions(),c=this.getGraphDimensions(),l=this.getStagePadding();this.matrix=Ro(a,u,c,l),this.invMatrix=Ro(a,u,c,l,!0),this.correctionRatio=function AP(e,t,n){var r=jd(e,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),o=r.y;return 1/Math.sqrt(Math.pow(r.x,2)+Math.pow(o,2))/n.width}(this.matrix,a,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var d=this.getRenderParams();for(var f in this.nodePrograms)this.nodePrograms[f].render(d);if(!this.settings.hideEdgesOnMove||!s)for(var p in this.edgePrograms)this.edgePrograms[p].render(d);return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(r){var i=Object.assign({},this.graph.getNodeAttributes(r));this.settings.nodeReducer&&(i=this.settings.nodeReducer(r,i));var o=function KP(e,t,n){if(!Sn.call(n,"x")||!Sn.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=e.defaultNodeColor),!n.label&&""!==n.label&&(n.label=null),n.label=null!=n.label?""+n.label:null,n.size||(n.size=2),Sn.call(n,"hidden")||(n.hidden=!1),Sn.call(n,"highlighted")||(n.highlighted=!1),Sn.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||""===n.type)&&(n.type=e.defaultNodeType),n.zIndex||(n.zIndex=0),n}(this.settings,r,i);this.nodeDataCache[r]=o,this.nodesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(r),this.highlightedNodes.delete(r),o.highlighted&&!o.hidden&&this.highlightedNodes.add(r),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(r){this.addNode(r),this.normalizationFunction.applyTo(this.nodeDataCache[r])}},{key:"removeNode",value:function(r){delete this.nodeDataCache[r],delete this.nodeProgramIndex[r],this.highlightedNodes.delete(r),this.hoveredNode===r&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(r)}},{key:"addEdge",value:function(r){var i=Object.assign({},this.graph.getEdgeAttributes(r));this.settings.edgeReducer&&(i=this.settings.edgeReducer(r,i));var o=function QP(e,t,n){return n.color||(n.color=e.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),Sn.call(n,"hidden")||(n.hidden=!1),Sn.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||""===n.type)&&(n.type=e.defaultEdgeType),n.zIndex||(n.zIndex=0),n}(this.settings,0,i);this.edgeDataCache[r]=o,this.edgesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(r),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(r){this.addEdge(r)}},{key:"removeEdge",value:function(r){delete this.edgeDataCache[r],delete this.edgeProgramIndex[r],this.hoveredEdge===r&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(r)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new fE,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(r,i,o){var s=this.nodeDataCache[r],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(i,o,s),this.nodeProgramIndex[r]=o}},{key:"addEdgeToProgram",value:function(r,i,o){var s=this.edgeDataCache[r],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var u=this.graph.extremities(r);a.process(i,o,this.nodeDataCache[u[0]],this.nodeDataCache[u[1]],s),this.edgeProgramIndex[r]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"getStagePadding",value:function(){var r=this.settings;return r.autoRescale&&r.stagePadding||0}},{key:"createLayer",value:function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.elements[r])throw new Error('Sigma: a layer named "'.concat(r,'" already exists'));var s=function xP(e,t,n){var r=document.createElement(e);if(t)for(var i in t)r.style[i]=t[i];if(n)for(var o in n)r.setAttribute(o,n[o]);return r}(i,{position:"absolute"},{class:"sigma-".concat(r)});return o.style&&Object.assign(s.style,o.style),this.elements[r]=s,"beforeLayer"in o&&o.beforeLayer?this.elements[o.beforeLayer].before(s):"afterLayer"in o&&o.afterLayer?this.elements[o.afterLayer].after(s):this.container.appendChild(s),s}},{key:"createCanvas",value:function(r){return this.createLayer(r,"canvas",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},{key:"createCanvasContext",value:function(r){var o=this.createCanvas(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return this.canvasContexts[r]=o.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this}},{key:"createWebGLContext",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i?.canvas||this.createCanvas(r,i);i.hidden&&o.remove();var a,s=O({preserveDrawingBuffer:!1,antialias:!1},i);(a=o.getContext("webgl2",s))||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var u=a;if(this.webGLContexts[r]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),i.picking){this.pickingLayers.add(r);var c=u.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(r));this.frameBuffers[r]=c}return u}},{key:"killLayer",value:function(r){var o,i=this.elements[r];if(!i)throw new Error("Sigma: cannot kill layer ".concat(r,", which does not exist"));return this.webGLContexts[r]?(null===(o=this.webGLContexts[r].getExtension("WEBGL_lose_context"))||void 0===o||o.loseContext(),delete this.webGLContexts[r]):this.canvasContexts[r]&&delete this.canvasContexts[r],i.remove(),delete this.elements[r],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(r){this.unbindCameraHandlers(),this.camera=r,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(r){r!==this.graph&&(this.hoveredNode&&!r.hasNode(this.hoveredNode)&&(this.hoveredNode=null),this.hoveredEdge&&!r.hasEdge(this.hoveredEdge)&&(this.hoveredEdge=null),this.unbindGraphHandlers(),null!==this.checkEdgesEventsFrame&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=r,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var r=this.customBBox||this.nodeExtent;return{width:r.x[1]-r.x[0]||1,height:r.y[1]-r.y[0]||1}}},{key:"getNodeDisplayData",value:function(r){var i=this.nodeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(r){var i=this.edgeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return O({},this.settings)}},{key:"getSetting",value:function(r){return this.settings[r]}},{key:"setSetting",value:function(r,i){var o=O({},this.settings);return this.settings[r]=i,Gd(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(r,i){return this.setSetting(r,i(this.settings[r])),this}},{key:"setSettings",value:function(r){var i=O({},this.settings);return this.settings=O(O({},this.settings),r),Gd(this.settings),this.handleSettingsUpdate(i),this.scheduleRefresh(),this}},{key:"resize",value:function(r){var i=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=rE(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=1}if(!r&&i===this.width&&o===this.height)return this;for(var s in this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var u in this.canvasContexts)this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[u].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var l=this.webGLContexts[c];if(l.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var d=this.textures[c];d&&l.deleteTexture(d)}}return this.emit("resize"),this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(r){var i=this,o=void 0!==r?.skipIndexation&&r?.skipIndexation,s=void 0!==r?.schedule&&r.schedule,a=!r||!r.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(D){return i.addNode(D)}),this.graph.forEachEdge(function(D){return i.addEdge(D)});else{for(var u,c,l=(null===(u=r.partialGraph)||void 0===u?void 0:u.nodes)||[],d=0,f=l?.length||0;d<f;d++){var h=l[d];if(this.updateNode(h),o){var p=this.nodeProgramIndex[h];if(void 0===p)throw new Error('Sigma: node "'.concat(h,"\" can't be repaint"));this.addNodeToProgram(h,this.nodeIndices[h],p)}}for(var g=(null==r||null===(c=r.partialGraph)||void 0===c?void 0:c.edges)||[],v=0,y=g.length;v<y;v++){var m=g[v];if(this.updateEdge(m),o){var _=this.edgeProgramIndex[m];if(void 0===_)throw new Error('Sigma: edge "'.concat(m,"\" can't be repaint"));this.addEdgeToProgram(m,this.edgeIndices[m],_)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var r=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){r.render()})),this}},{key:"scheduleRefresh",value:function(r){return this.refresh(O(O({},r),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(r,i){var o=this.camera.getState(),s=o.ratio,a=o.angle,u=o.x,c=o.y,l=this.settings,d=l.minCameraRatio,f=l.maxCameraRatio;"number"==typeof f&&(i=Math.min(i,f)),"number"==typeof d&&(i=Math.max(i,d));var h=i/s,p={x:this.width/2,y:this.height/2},g=this.viewportToFramedGraph(r),v=this.viewportToFramedGraph(p);return{angle:a,x:(g.x-v.x)*(1-h)+u,y:(g.y-v.y)*(1-h)+c,ratio:i}}},{key:"viewRectangle",value:function(){var r=this.viewportToFramedGraph({x:0,y:0}),i=this.viewportToFramedGraph({x:this.width,y:0}),o=this.viewportToFramedGraph({x:0,y:this.height});return{x1:r.x,y1:r.y,x2:i.x,y2:i.y,height:i.y-o.y}}},{key:"framedGraphToViewport",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=jd(i.matrix?i.matrix:i.cameraState||i.viewportDimensions||i.graphDimensions?Ro(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding()):this.matrix,r);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=jd(i.matrix?i.matrix:i.cameraState||i.viewportDimensions||!i.graphDimensions?Ro(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getStagePadding(),!0):this.invMatrix,{x:r.x/this.width*2-1,y:1-r.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(r){return this.normalizationFunction.inverse(this.viewportToFramedGraph(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"graphToViewport",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(r),i)}},{key:"getGraphToViewportRatio",value:function(){var r={x:0,y:0},i={x:1,y:1},o=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),s=this.graphToViewport(r),a=this.graphToViewport(i);return Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2))/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(r){return this.customBBox=r,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.canvasContexts={},this.webGLContexts={},this.elements={},this.nodePrograms)this.nodePrograms[i].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();for(var a in this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={},this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.camera.ratio;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/this.settings.zoomToSizeRatioFunction(i)*("positions"===this.getSetting("itemSizesReference")?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){var r={};for(var i in this.elements)this.elements[i]instanceof HTMLCanvasElement&&(r[i]=this.elements[i]);return r}}])}($d);let JP=(()=>{class e{#e;#s;#t;#n;#a;#o;#r;#i;constructor(){this.LISTEN_COLOR="yellow",this.SEND_COLOR="blue",this.SUCCESS_COLOR="blue",this.COLLISION_COLOR="red",this.DEFAULT_SIZE=6,this.FOCUS_SIZE=8,this.numNodes=512,this.treeNodes=127,this.f=[2,4,32],this.g=[64,16,1],this.#e=[],this.#s=[],this.#t=[],this.#n=[],this.#a=[],this.#o=[],this.#r=[],this.#i=[]}createBinaryTree(n){let i=1;for(let o=0;o<7;o++)for(let s=0;s<2**o;s++)n.addNode(""+i++,{x:500*(s-2**(o-1))/2**o+500/2**(o+1),y:50*(7-o),size:6,color:"lightgray"});for(let o=1;o<64;o++)n.addEdge(`${o}`,""+2*o),n.addEdge(`${o}`,""+(2*o+1))}createNetwork(n){const r=[];for(let i=0;i<this.numNodes;i++){let o=1e3*Math.random()-500,s=1e3*Math.random()-500;for(;o**2+s**2>=25e4||r.filter(a=>(a[0]-o)**2+(a[1]-s)**2<=500).length>0;)o=1e3*Math.random()-500,s=1e3*Math.random()-500;n.addNode(`${i}`,{x:o,y:s,size:6,color:"lightgray"}),r.push([o,s])}}initialize(n,r){const i=[];for(let a=0;a<this.treeNodes;a++)this.#n.push("lightgray");for(let a=0;a<this.numNodes;a++)this.#e.push("lightgray");const o=[];for(let a=0;a<this.numNodes;a++)o.push(Math.floor(this.numNodes*Math.random()));let s=[];for(let a=0;a<this.numNodes;a++)s.push(-1);for(let a=0;a<3;a++){const u=[];for(let c=0;c<this.numNodes;c++)u.push(-1);for(let c=0;c<this.g[a];c++)0==a?i.push(...this.mergeBins(n,r,c,o,s)):i.push(...this.mergeGroups(n,r,a,c,s,u));a>0&&(s=u,console.log(u.filter(c=>-1!=c).length))}return i.push({nodeAnimations:[],treeAnimations:[]}),i}mergeBins(n,r,i,o,s){const a=[],u=[],c=[];a.push({nodeAnimations:u,treeAnimations:c}),this.#c(c),this.#u(u),c.push({node:64+i,from:this.#n[63+i],to:"blue"}),this.#n[63+i]="blue",this.#r.push({node:64+i,from:"blue",to:"lightgray"});const l=[];for(let f=0;f<8;f++){const h=[];for(let p=0;p<this.numNodes;p++)o[p]==8*i+f&&h.push(p);for(const p of h){let g=this.COLLISION_COLOR;1==h.length&&(g=this.SUCCESS_COLOR,l.push(p)),u.push({node:p,from:this.#e[p],to:g,fromSize:this.DEFAULT_SIZE,toSize:this.FOCUS_SIZE}),this.#e[p]=g,this.#i.push({node:p,from:g,to:"lightgray",fromSize:this.FOCUS_SIZE,toSize:this.DEFAULT_SIZE})}}let d=1;if(l.length>1)for(const f of l)s[f]=i,n.updateNodeAttribute(`${f}`,"id",h=>d++),n.updateNodeAttribute(`${f}`,"count",h=>l.length),n.updateNodeAttribute(`${f}`,"childCount",h=>i%2==0?l.length:0);return a}mergeGroups(n,r,i,o,s,a){const u=[],l=[this.g[i]+o];let d=1;for(;l.length<2**this.f[i-1]-1;){const v=l[l.length-d];l.unshift(2*v,2*v+1),d++}const f=[void 0,32,8],h=[];for(let v=0;v<l.length;v++){const y=l[v];if(v<l.length/2){const m=2*(y-f[i]),_=m+1;2==i&&console.log(m,_);const D=n.nodes().filter(A=>s[+A]===m&&1===n.getNodeAttribute(A,"id"))[0],C=n.nodes().filter(A=>s[+A]===_&&1===n.getNodeAttribute(A,"id"))[0];h.push(D),h.push(C),h.push(D??C)}else{const m=2*y,_=m+1,D=l.indexOf(m),C=l.indexOf(_),A=s[+h[3*D+2]],I=s[+h[3*C+2]],P=Math.floor(Math.log2(l.length+1)-Math.log2(l.length-v+1))+1;console.log(m,_,D,C,A,I,P);const L=n.nodes().filter(ye=>s[+ye]===A&&n.getNodeAttribute(ye,"id")===P)[0],se=n.nodes().filter(ye=>s[+ye]===I&&n.getNodeAttribute(ye,"id")===P)[0];h.push(L),h.push(se),h.push(L??se)}}for(let v=l.length-1;v>=0;v--)h.push(h[3*v+2]);console.log(s),console.log(h);let p=0,g=0;for(const v of l){let y=[],m=[];const _=h[p]?n.getNodeAttribute(h[p],"count"):0,D=h[p+1]?n.getNodeAttribute(h[p+1],"count"):0,C=_+D;g=C,u.push({state:`Left Count: ${_}`,nodeAnimations:y,treeAnimations:m}),this.#c(m),this.#u(y),m.push({node:v,from:this.#n[v-1],to:"blue"}),this.#n[v-1]="blue";const A=+h[p],I=+h[p+1];Number.isNaN(A)||(y.push({node:A,from:this.#e[A],to:this.SEND_COLOR,fromSize:this.#t[A],toSize:this.FOCUS_SIZE}),this.#e[A]=this.SEND_COLOR,this.#t[A]=this.FOCUS_SIZE),Number.isNaN(I)||(y.push({node:I,from:this.#e[I],to:this.LISTEN_COLOR,fromSize:this.#t[I],toSize:this.FOCUS_SIZE}),this.#e[I]=this.LISTEN_COLOR,this.#t[I]=this.FOCUS_SIZE),y=[],m=[],u.push({state:`Right Count: ${D}`,nodeAnimations:y,treeAnimations:m}),this.#u(y),Number.isNaN(A)||(y.push({node:A,from:this.#e[A],to:this.LISTEN_COLOR,fromSize:this.#t[A],toSize:this.FOCUS_SIZE}),this.#e[A]=this.LISTEN_COLOR,this.#t[A]=this.FOCUS_SIZE),Number.isNaN(I)||(y.push({node:I,from:this.#e[I],to:this.SEND_COLOR,fromSize:this.#t[I],toSize:this.FOCUS_SIZE}),this.#e[I]=this.SEND_COLOR,this.#t[I]=this.FOCUS_SIZE),y=[],m=[],u.push({state:`Total Count: ${C}`,nodeAnimations:y,treeAnimations:m}),this.#u(y);const P=Number.isNaN(A)?Number.isNaN(I)?void 0:I:A;if(null!=P&&(y.push({node:P,from:this.#e[P],to:this.SEND_COLOR,fromSize:this.#t[P],toSize:this.FOCUS_SIZE}),this.#e[P]=this.SEND_COLOR,this.#t[P]=this.FOCUS_SIZE,P!=I&&!Number.isNaN(I)&&(y.push({node:I,from:this.#e[I],to:"lightgray",fromSize:this.#t[I],toSize:this.DEFAULT_SIZE}),this.#e[I]="lightgray",this.#t[I]=this.DEFAULT_SIZE),P==I&&(console.log("abc"),n.updateNodeAttribute(`${P}`,"childCount",L=>0))),l[l.length-1]!=v){const L=Math.floor(v/2),se=l.indexOf(L),ye=null!=A?s[A]:void 0,Oe=null!=I?s[I]:void 0,$t=Math.floor(Math.log2(l.length+1)-Math.log2(l.length-se+1))+1,le=n.nodes().filter(Le=>s[+Le]===ye&&n.getNodeAttribute(Le,"id")===$t)[0],De=n.nodes().filter(Le=>s[+Le]===Oe&&n.getNodeAttribute(Le,"id")===$t)[0];console.log(A,I,ye,Oe,$t,le,De),null!=ye&&null!=le&&(n.updateNodeAttribute(le,"count",Le=>C),console.log("cc",C,le),n.updateNodeAttribute(le,"childCount",Le=>C),y.push({node:+le,from:this.#e[+le],to:this.LISTEN_COLOR,fromSize:this.#t[+le],toSize:this.FOCUS_SIZE}),this.#e[+le]=this.LISTEN_COLOR,this.#t[+le]=this.FOCUS_SIZE,this.#i.push({node:+le,from:this.#e[+le],to:"lightgray",fromSize:this.#t[+le],toSize:this.DEFAULT_SIZE})),null!=Oe&&null!=De&&(n.updateNodeAttribute(De,"count",Le=>C),console.log("dd"),n.updateNodeAttribute(De,"childCount",Le=>C),y.push({node:+De,from:this.#e[+De],to:this.LISTEN_COLOR,fromSize:this.#t[+De],toSize:this.FOCUS_SIZE}),this.#e[+De]=this.LISTEN_COLOR,this.#t[+De]=this.FOCUS_SIZE,this.#i.push({node:+De,from:this.#e[+De],to:"lightgray",fromSize:this.#t[+De],toSize:this.DEFAULT_SIZE})),this.#r.push({node:v,from:"blue",to:"lightgray"}),null!=P&&this.#i.push({node:P,from:this.#e[P],fromSize:this.#t[P],toSize:this.DEFAULT_SIZE,to:"lightgray"})}p+=3}l.reverse();for(const v of l){const y=[],m=[],_=+h[p],D=Number.isNaN(_)?0:n.getNodeAttribute(`${_}`,"offset")??0,C=D+((!Number.isNaN(_)&&n.getNodeAttribute(`${_}`,"childCount"))??0);u.push({state:`Left Offset: ${D}, Right Offset: ${C}`,nodeAnimations:y,treeAnimations:m}),console.log(D,C,!Number.isNaN(_)&&n.getNodeAttribute(`${_}`,"count"),!Number.isNaN(_)&&n.getNodeAttribute(`${_}`,"childCount")),this.#c(m),this.#u(y),m.push({node:v,from:this.#n[v-1],to:"blue"}),this.#n[v-1]="blue",this.#r=[{node:v,from:"blue",to:"lightgray"}];const A=2*(p-3*l.length+1)+3*l.length-1,I=A+1;if(!Number.isNaN(_)){if(l[0]!=v&&(y.push({node:_,from:this.#e[_],to:this.SEND_COLOR,fromSize:this.#t[_],toSize:this.FOCUS_SIZE}),this.#e[_]=this.SEND_COLOR,this.#t[_]=this.FOCUS_SIZE),A<h.length){const P=+h[I],L=+h[A];Number.isNaN(P)||(n.updateNodeAttribute(`${P}`,"offset",se=>D),y.push({node:P,from:this.#e[P],to:this.LISTEN_COLOR,fromSize:this.#t[P],toSize:this.FOCUS_SIZE}),this.#e[P]=this.LISTEN_COLOR,this.#t[P]=this.FOCUS_SIZE,this.#i.push({node:P,from:this.#e[P],to:"lightgray",fromSize:this.#t[P],toSize:this.DEFAULT_SIZE})),Number.isNaN(L)||(n.updateNodeAttribute(`${L}`,"offset",se=>C),y.push({node:L,from:this.#e[L],to:this.LISTEN_COLOR,fromSize:this.#t[L],toSize:this.FOCUS_SIZE}),this.#e[L]=this.LISTEN_COLOR,this.#t[L]=this.FOCUS_SIZE,+h[p+1]!=L&&this.#i.push({node:L,from:this.#e[L],to:"lightgray",fromSize:this.#t[L],toSize:this.DEFAULT_SIZE}))}else{let P=s[_];P%2==1&&P--;for(let L=0;L<s.length;L++)(s[L]==P||s[L]==P+1)&&(_!=L&&(y.push({node:L,from:this.#e[L],to:this.LISTEN_COLOR,fromSize:this.#t[L],toSize:this.FOCUS_SIZE}),this.#e[L]=this.LISTEN_COLOR,this.#t[L]=this.FOCUS_SIZE,this.#i.push({node:L,from:this.#e[L],to:"lightgray",fromSize:this.#t[L],toSize:this.DEFAULT_SIZE})),n.updateNodeAttribute(`${L}`,"id",se=>se+(s[L]==P?D:C)));if(1!=i||g>=this.f[1])for(let L=0;L<a.length;L++)(s[L]==P||s[L]==P+1)&&(a[L]=o,n.updateNodeAttribute(`${L}`,"count",se=>g),n.updateNodeAttribute(`${L}`,"childCount",se=>g),n.updateNodeAttribute(`${L}`,"offset",se=>0))}this.#i.push({node:_,from:this.#e[_],to:"lightgray",fromSize:this.#t[_],toSize:this.DEFAULT_SIZE})}p++}return u}#c(n){for(const r of this.#r)this.#n[r.node-1]=r.to;n.push(...this.#r),this.#r=[]}#u(n){for(const r of this.#i)this.#e[r.node]=r.to,this.#t[r.node]=r.toSize??this.DEFAULT_SIZE;n.push(...this.#i),this.#i=[]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function mE(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function vE(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(u){mE(o,r,i,s,a,"next",u)}function a(u){mE(o,r,i,s,a,"throw",u)}s(void 0)})}}const eF=vi(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});let rF=(()=>{class e{#e;#s;#t;#n;#a;#o;#r;constructor(){this.state=new dr,this.#n=0,this.#a=new dr,this.#o=!1,this.#r=!1}update(n,r,i){this.#s=n,this.#t=r,this.#e=i,this.#n=0}animate(){var n=this;return vE(function*(){if(n.#r)return n.#r=!1,void n.#a.next();if(n.#o=!0,!(n.#n>=n.#e.length)){n.state.next(n.#e[n.#n].state);for(let r of n.#e[n.#n].nodeAnimations)n.#s.updateNode(`${r.node}`,i=>({...i,type:"border",color:r.to,label:r.toLabel,size:r.toSize??6}));for(let r of n.#e[n.#n].treeAnimations)n.#t.updateNode(`${r.node}`,i=>({...i,type:"border",color:r.to,label:r.toLabel,size:r.toSize??6}));return n.#n++,new Promise(r=>setTimeout(()=>{n.animate()},n.#e[n.#n]?.time??1e3))}})()}goTo(n){var r=this;return vE(function*(){if(r.#o&&(r.#r=!0,yield function tF(e,t){const n="object"==typeof t;return new Promise((r,i)=>{const o=new ee({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(t.defaultValue):i(new eF)}});e.subscribe(o)})}(r.#a.pipe(function nF(e){return e<=0?()=>qa:Tn((t,n)=>{let r=0;t.subscribe(An(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}(1)))),r.#o=!0,r.#n!=n)if(r.state.next(r.#e[Math.max(n-1,0)].state),r.#n>n)for(;r.#n!=n;){for(let i of r.#e[r.#n-1].nodeAnimations.slice().reverse())r.#s.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.from,label:i.fromLabel,size:i.fromSize??6}));for(let i of r.#e[r.#n-1].treeAnimations.slice().reverse())r.#t.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.from,size:i.fromSize??6}));r.#n--}else for(;r.#n!=n;){for(let i of r.#e[r.#n].nodeAnimations)r.#s.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.to,size:i.toSize??6}));for(let i of r.#e[r.#n].treeAnimations)r.#t.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.to,size:i.toSize??6}));r.#n++}r.#o=!1,r.#a.next()})()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=ue({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),iF=(()=>{class e{constructor(n,r){this._algorithmService=n,this._animationService=r,this.animations=[]}ngOnInit(){this.graph=new ce,this.tree=new ce,this._algorithmService.createNetwork(this.graph),this._algorithmService.createBinaryTree(this.tree),this.animations=this._algorithmService.initialize(this.graph,this.tree),this._animationService.state.subscribe(i=>this.state=i),this._animationService.update(this.graph,this.tree,this.animations),this._animationService.animate(),console.log(this.animations),new gE(this.graph,document.getElementById("graph"),{defaultNodeType:"border",nodeProgramClasses:{border:xd({borders:[{size:{attribute:"borderSize",defaultValue:.2},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]})}}),new gE(this.tree,document.getElementById("tree"),{defaultNodeType:"border",nodeProgramClasses:{border:xd({borders:[{size:{attribute:"borderSize",defaultValue:.2},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]})}})}goTo(n){this._animationService.goTo(n)}play(){this._animationService.animate()}static{this.\u0275fac=function(r){return new(r||e)(q(JP),q(rF))}}static{this.\u0275cmp=fu({type:e,selectors:[["app-graph"]],decls:10,vars:2,consts:[[2,"width","100%","display","flex","justify-content","center"],[1,"graph-container"],["id","graph",1,"graph"],["id","tree",1,"graph"],["id","range","type","range","min","0","step","1","value","0",1,"form-range",2,"width","100%",3,"max","input"],["range",""],[1,"btn","btn-primary"]],template:function(r,i){if(1&r){const o=function vm(){return E()}();Yt(0,"div",0)(1,"h3"),fo(2),Kt()(),Yt(3,"div",1),Zs(4,"div",2)(5,"div",3),Kt(),Yt(6,"input",4,5),ol("input",function(){!function gh(e){return j.lFrame.contextLView=e,e[Se]}(o);const a=function hm(e){return function Dr(e,t){return e[t]}(function Rb(){return j.lFrame.contextLView}(),Y+e)}(7);return function mh(e){return j.lFrame.contextLView=null,e}(i.goTo(+a.value))}),Kt(),Yt(8,"button",6),fo(9,"Play"),Kt()}if(2&r){let o;Fc(2),dl(null!==(o=i.state)&&void 0!==o?o:"State"),Fc(4),el("max",i.animations.length-1)}},styles:[".graph-container[_ngcontent-%COMP%]{display:flex}.graph-container[_ngcontent-%COMP%]   .graph[_ngcontent-%COMP%]{width:50%;aspect-ratio:1.5}"]})}}return e})(),oF=(()=>{class e{constructor(){this.title="Initialization-Simulation"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fu({type:e,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"container"],[1,"card",2,"border-color","#f76902"],[1,"card-header",2,"border-color","#000000"],[1,"row","align-items-center"],[1,"card-body"],[1,"card"],[1,"row"]],template:function(r,i){1&r&&(Yt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),fo(5,"Initialization Simulation"),Kt()()(),Yt(6,"div",4)(7,"p"),fo(8,"Dominick Banasik"),Kt()()()(),Yt(9,"div",0)(10,"div",5)(11,"div",4)(12,"div",6),Zs(13,"app-graph"),Kt()()()())},dependencies:[iF],styles:[".container[_ngcontent-%COMP%]{margin-left:1%;margin-right:1%;max-width:98%}"]})}}return e})(),sF=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Ai({type:e,bootstrap:[oF]})}static{this.\u0275inj=fr({imports:[Q1]})}}return e})();Y1().bootstrapModule(sF).catch(e=>console.error(e))},356:In=>{"use strict";var fe,jt="object"==typeof Reflect?Reflect:null,at=jt&&"function"==typeof jt.apply?jt.apply:function(b,M,F){return Function.prototype.apply.call(b,M,F)};fe=jt&&"function"==typeof jt.ownKeys?jt.ownKeys:Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:function(b){return Object.getOwnPropertyNames(b)};var lr=Number.isNaN||function(b){return b!=b};function te(){te.init.call(this)}In.exports=te,In.exports.once=function wi(T,b){return new Promise(function(M,F){function G(Z){T.removeListener(b,ee),F(Z)}function ee(){"function"==typeof T.removeListener&&T.removeListener("error",G),M([].slice.call(arguments))}Zn(T,b,ee,{once:!0}),"error"!==b&&function nn(T,b,M){"function"==typeof T.on&&Zn(T,"error",b,M)}(T,G,{once:!0})})},te.EventEmitter=te,te.prototype._events=void 0,te.prototype._eventsCount=0,te.prototype._maxListeners=void 0;var ut=10;function Wn(T){if("function"!=typeof T)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}function yi(T){return void 0===T._maxListeners?te.defaultMaxListeners:T._maxListeners}function _i(T,b,M,F){var G,ee,Z;if(Wn(M),void 0===(ee=T._events)?(ee=T._events=Object.create(null),T._eventsCount=0):(void 0!==ee.newListener&&(T.emit("newListener",b,M.listener?M.listener:M),ee=T._events),Z=ee[b]),void 0===Z)Z=ee[b]=M,++T._eventsCount;else if("function"==typeof Z?Z=ee[b]=F?[M,Z]:[Z,M]:F?Z.unshift(M):Z.push(M),(G=yi(T))>0&&Z.length>G&&!Z.warned){Z.warned=!0;var ct=new Error("Possible EventEmitter memory leak detected. "+Z.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");ct.name="MaxListenersExceededWarning",ct.emitter=T,ct.type=b,ct.count=Z.length,function vi(T){console&&console.warn&&console.warn(T)}(ct)}return T}function tn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qn(T,b,M){var F={fired:!1,wrapFn:void 0,target:T,type:b,listener:M},G=tn.bind(F);return G.listener=M,F.wrapFn=G,G}function Di(T,b,M){var F=T._events;if(void 0===F)return[];var G=F[b];return void 0===G?[]:"function"==typeof G?M?[G.listener||G]:[G]:M?function Ba(T){for(var b=new Array(T.length),M=0;M<b.length;++M)b[M]=T[M].listener||T[M];return b}(G):Po(G,G.length)}function Ei(T){var b=this._events;if(void 0!==b){var M=b[T];if("function"==typeof M)return 1;if(void 0!==M)return M.length}return 0}function Po(T,b){for(var M=new Array(b),F=0;F<b;++F)M[F]=T[F];return M}function Zn(T,b,M,F){if("function"==typeof T.on)F.once?T.once(b,M):T.on(b,M);else{if("function"!=typeof T.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T);T.addEventListener(b,function G(ee){F.once&&T.removeEventListener(b,G),M(ee)})}}Object.defineProperty(te,"defaultMaxListeners",{enumerable:!0,get:function(){return ut},set:function(T){if("number"!=typeof T||T<0||lr(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");ut=T}}),te.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},te.prototype.setMaxListeners=function(b){if("number"!=typeof b||b<0||lr(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this},te.prototype.getMaxListeners=function(){return yi(this)},te.prototype.emit=function(b){for(var M=[],F=1;F<arguments.length;F++)M.push(arguments[F]);var G="error"===b,ee=this._events;if(void 0!==ee)G=G&&void 0===ee.error;else if(!G)return!1;if(G){var Z;if(M.length>0&&(Z=M[0]),Z instanceof Error)throw Z;var ct=new Error("Unhandled error."+(Z?" ("+Z.message+")":""));throw ct.context=Z,ct}var rn=ee[b];if(void 0===rn)return!1;if("function"==typeof rn)at(rn,this,M);else{var Fo=rn.length,bi=Po(rn,Fo);for(F=0;F<Fo;++F)at(bi[F],this,M)}return!0},te.prototype.on=te.prototype.addListener=function(b,M){return _i(this,b,M,!1)},te.prototype.prependListener=function(b,M){return _i(this,b,M,!0)},te.prototype.once=function(b,M){return Wn(M),this.on(b,qn(this,b,M)),this},te.prototype.prependOnceListener=function(b,M){return Wn(M),this.prependListener(b,qn(this,b,M)),this},te.prototype.off=te.prototype.removeListener=function(b,M){var F,G,ee,Z,ct;if(Wn(M),void 0===(G=this._events))return this;if(void 0===(F=G[b]))return this;if(F===M||F.listener===M)0==--this._eventsCount?this._events=Object.create(null):(delete G[b],G.removeListener&&this.emit("removeListener",b,F.listener||M));else if("function"!=typeof F){for(ee=-1,Z=F.length-1;Z>=0;Z--)if(F[Z]===M||F[Z].listener===M){ct=F[Z].listener,ee=Z;break}if(ee<0)return this;0===ee?F.shift():function ja(T,b){for(;b+1<T.length;b++)T[b]=T[b+1];T.pop()}(F,ee),1===F.length&&(G[b]=F[0]),void 0!==G.removeListener&&this.emit("removeListener",b,ct||M)}return this},te.prototype.removeAllListeners=function(b){var M,F,G;if(void 0===(F=this._events))return this;if(void 0===F.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==F[b]&&(0==--this._eventsCount?this._events=Object.create(null):delete F[b]),this;if(0===arguments.length){var Z,ee=Object.keys(F);for(G=0;G<ee.length;++G)"removeListener"!==(Z=ee[G])&&this.removeAllListeners(Z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(M=F[b]))this.removeListener(b,M);else if(void 0!==M)for(G=M.length-1;G>=0;G--)this.removeListener(b,M[G]);return this},te.prototype.listeners=function(b){return Di(this,b,!0)},te.prototype.rawListeners=function(b){return Di(this,b,!1)},te.listenerCount=function(T,b){return"function"==typeof T.listenerCount?T.listenerCount(b):Ei.call(T,b)},te.prototype.listenerCount=Ei,te.prototype.eventNames=function(){return this._eventsCount>0?fe(this._events):[]}},791:In=>{In.exports=function(at){return null!==at&&"object"==typeof at&&"function"==typeof at.addUndirectedEdgeWithKey&&"function"==typeof at.dropNode&&"boolean"==typeof at.multi}}},In=>{In(In.s=602)}]);